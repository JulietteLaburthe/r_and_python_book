<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Control Flow | An Introduction to R and Python For Data Analysis: A Side By Side Approach</title>
  <meta name="description" content="Chapter 11 Control Flow | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Control Flow | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="tbrown122387/r_and_python_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Control Flow | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  
  
  

<meta name="author" content="Taylor R. Brown" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="using-third-party-code.html"/>
<link rel="next" href="reshaping-and-combining-data-sets.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction to R and Python For Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-sample-course"><i class="fa fa-check"></i>A Sample Course</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#become-a-contributor"><i class="fa fa-check"></i>Become a Contributor</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licenses"><i class="fa fa-check"></i>License(s)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#about-this-book"><i class="fa fa-check"></i>About this book</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-the-required-software"><i class="fa fa-check"></i>Installing the Required Software</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-r-and-rstudio"><i class="fa fa-check"></i>Installing R (and RStudio)</a></li>
<li class="chapter" data-level="0.0.1" data-path="preface.html"><a href="preface.html#installing-python-by-installing-anaconda"><i class="fa fa-check"></i><b>0.0.1</b> Installing Python by Installing Anaconda {-}</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Part I</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#hello-world-in-r"><i class="fa fa-check"></i><b>1.1</b> Hello World in R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#hello-world-in-python"><i class="fa fa-check"></i><b>1.2</b> Hello World in Python</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#getting-help"><i class="fa fa-check"></i><b>1.3</b> Getting Help</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#reading-documentation"><i class="fa fa-check"></i><b>1.3.1</b> Reading Documentation</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#understanding-file-paths"><i class="fa fa-check"></i><b>1.3.2</b> Understanding File Paths</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Part I: Data Types</b></span></li>
<li class="chapter" data-level="2" data-path="basic-types.html"><a href="basic-types.html"><i class="fa fa-check"></i><b>2</b> Basic Types</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basic-types.html"><a href="basic-types.html#basic-types-in-python"><i class="fa fa-check"></i><b>2.1</b> Basic Types In Python</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="basic-types.html"><a href="basic-types.html#type-conversions-in-python"><i class="fa fa-check"></i><b>2.1.1</b> Type Conversions in Python</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic-types.html"><a href="basic-types.html#basic-types-in-r"><i class="fa fa-check"></i><b>2.2</b> Basic Types In R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="basic-types.html"><a href="basic-types.html#type-conversions-in-r"><i class="fa fa-check"></i><b>2.2.1</b> Type Conversions in R</a></li>
<li class="chapter" data-level="2.2.2" data-path="basic-types.html"><a href="basic-types.html#rs-simplification"><i class="fa fa-check"></i><b>2.2.2</b> R’s Simplification</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="basic-types.html"><a href="basic-types.html#exercises"><i class="fa fa-check"></i><b>2.3</b> Exercises</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="basic-types.html"><a href="basic-types.html#easier-r-questions"><i class="fa fa-check"></i><b>2.3.1</b> Easier R Questions</a></li>
<li class="chapter" data-level="2.3.2" data-path="basic-types.html"><a href="basic-types.html#easier-python-questions"><i class="fa fa-check"></i><b>2.3.2</b> Easier Python Questions</a></li>
<li class="chapter" data-level="2.3.3" data-path="basic-types.html"><a href="basic-types.html#more-difficult-r-questions"><i class="fa fa-check"></i><b>2.3.3</b> More Difficult R Questions</a></li>
<li class="chapter" data-level="2.3.4" data-path="basic-types.html"><a href="basic-types.html#more-difficult-python-questions"><i class="fa fa-check"></i><b>2.3.4</b> More Difficult Python Questions</a></li>
<li class="chapter" data-level="2.3.5" data-path="basic-types.html"><a href="basic-types.html#examining-a-series-taken-from-a-dataframe"><i class="fa fa-check"></i><b>2.3.5</b> Examining a <code>Series</code> taken from a <code>DataFrame</code></a></li>
<li class="chapter" data-level="2.3.6" data-path="basic-types.html"><a href="basic-types.html#monte-carlo-integration"><i class="fa fa-check"></i><b>2.3.6</b> Monte Carlo Integration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html"><i class="fa fa-check"></i><b>3</b> R vectors versus Numpy <code>array</code>s and Pandas’ <code>Series</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#overview-of-r"><i class="fa fa-check"></i><b>3.1</b> Overview of R</a></li>
<li class="chapter" data-level="3.2" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#overview-of-python"><i class="fa fa-check"></i><b>3.2</b> Overview of Python</a></li>
<li class="chapter" data-level="3.3" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#vectorization-in-r"><i class="fa fa-check"></i><b>3.3</b> Vectorization in R</a></li>
<li class="chapter" data-level="3.4" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#vectorization-in-python"><i class="fa fa-check"></i><b>3.4</b> Vectorization in Python</a></li>
<li class="chapter" data-level="3.5" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#indexing-vectors-in-r"><i class="fa fa-check"></i><b>3.5</b> Indexing Vectors in R</a></li>
<li class="chapter" data-level="3.6" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#indexing-numpy-arrays"><i class="fa fa-check"></i><b>3.6</b> Indexing Numpy arrays</a></li>
<li class="chapter" data-level="3.7" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#indexing-pandas-series"><i class="fa fa-check"></i><b>3.7</b> Indexing Pandas’ Series</a></li>
<li class="chapter" data-level="3.8" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#some-gotchas"><i class="fa fa-check"></i><b>3.8</b> Some Gotchas</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#shallow-versus-deep-copies"><i class="fa fa-check"></i><b>3.8.1</b> Shallow versus Deep Copies</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="r-vectors-versus-numpy-arrays-and-pandas-series.html"><a href="r-vectors-versus-numpy-arrays-and-pandas-series.html#how-do-r-and-python-handle-missing-values"><i class="fa fa-check"></i><b>3.9</b> How do R and Python handle missing values?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="numpys-ndarrays-versus-rs-matrices-and-arrays.html"><a href="numpys-ndarrays-versus-rs-matrices-and-arrays.html"><i class="fa fa-check"></i><b>4</b> Numpy’s <code>ndarray</code>s versus R’s matrices and arrays</a>
<ul>
<li class="chapter" data-level="4.1" data-path="numpys-ndarrays-versus-rs-matrices-and-arrays.html"><a href="numpys-ndarrays-versus-rs-matrices-and-arrays.html#numpy-ndarrays-in-python"><i class="fa fa-check"></i><b>4.1</b> Numpy <code>ndarray</code>s In Python</a></li>
<li class="chapter" data-level="4.2" data-path="numpys-ndarrays-versus-rs-matrices-and-arrays.html"><a href="numpys-ndarrays-versus-rs-matrices-and-arrays.html#the-matrix-and-array-classes-in-r"><i class="fa fa-check"></i><b>4.2</b> The <code>matrix</code> and <code>array</code> classes in R</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="rs-lists-versus-pythons-lists-and-dictionaries.html"><a href="rs-lists-versus-pythons-lists-and-dictionaries.html"><i class="fa fa-check"></i><b>5</b> R’s lists versus Python’s lists and dictionaries</a>
<ul>
<li class="chapter" data-level="5.1" data-path="rs-lists-versus-pythons-lists-and-dictionaries.html"><a href="rs-lists-versus-pythons-lists-and-dictionaries.html#lists-in-r"><i class="fa fa-check"></i><b>5.1</b> Lists In R</a></li>
<li class="chapter" data-level="5.2" data-path="rs-lists-versus-pythons-lists-and-dictionaries.html"><a href="rs-lists-versus-pythons-lists-and-dictionaries.html#lists-in-python"><i class="fa fa-check"></i><b>5.2</b> Lists In Python</a></li>
<li class="chapter" data-level="5.3" data-path="rs-lists-versus-pythons-lists-and-dictionaries.html"><a href="rs-lists-versus-pythons-lists-and-dictionaries.html#dictionaries-in-python"><i class="fa fa-check"></i><b>5.3</b> Dictionaries In Python</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="functions.html"><a href="functions.html#defining-r-functions"><i class="fa fa-check"></i><b>6.1</b> Defining R Functions</a></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#defining-python-functions"><i class="fa fa-check"></i><b>6.2</b> Defining Python Functions</a></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#more-details-on-rs-user-defined-functions"><i class="fa fa-check"></i><b>6.3</b> More details on R’s user-defined functions</a></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#more-details-on-pythons-user-defined-functions"><i class="fa fa-check"></i><b>6.4</b> More details on Python’s user-defined functions</a></li>
<li class="chapter" data-level="6.5" data-path="functions.html"><a href="functions.html#function-scope-in-r"><i class="fa fa-check"></i><b>6.5</b> Function Scope in R</a></li>
<li class="chapter" data-level="6.6" data-path="functions.html"><a href="functions.html#function-scope-in-python"><i class="fa fa-check"></i><b>6.6</b> Function Scope in Python</a></li>
<li class="chapter" data-level="6.7" data-path="functions.html"><a href="functions.html#modifying-a-functions-arguments"><i class="fa fa-check"></i><b>6.7</b> Modifying a Function’s Arguments</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="functions.html"><a href="functions.html#passing-by-value-in-r"><i class="fa fa-check"></i><b>6.7.1</b> Passing By Value In R</a></li>
<li class="chapter" data-level="6.7.2" data-path="functions.html"><a href="functions.html#passing-by-assignment-in-python"><i class="fa fa-check"></i><b>6.7.2</b> Passing By Assignment In Python</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="functions.html"><a href="functions.html#accessing-and-modifying-non-local-variables"><i class="fa fa-check"></i><b>6.8</b> Accessing and Modifying Non-Local Variables</a>
<ul>
<li class="chapter" data-level="6.8.1" data-path="functions.html"><a href="functions.html#accessing-and-modifying-non-local-variables-in-r"><i class="fa fa-check"></i><b>6.8.1</b> Accessing and Modifying Non-Local Variables in R</a></li>
<li class="chapter" data-level="6.8.2" data-path="functions.html"><a href="functions.html#accessing-and-modifying-non-local-variables-in-python"><i class="fa fa-check"></i><b>6.8.2</b> Accessing and Modifying Non-Local Variables in Python</a></li>
<li class="chapter" data-level="6.8.3" data-path="functions.html"><a href="functions.html#modifying-non-local-variables-in-r"><i class="fa fa-check"></i><b>6.8.3</b> Modifying Non-Local Variables In R</a></li>
<li class="chapter" data-level="6.8.4" data-path="functions.html"><a href="functions.html#modifying-non-local-variables-in-python"><i class="fa fa-check"></i><b>6.8.4</b> Modifying Non-Local Variables In Python</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="categorical-data.html"><a href="categorical-data.html"><i class="fa fa-check"></i><b>7</b> Categorical Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="categorical-data.html"><a href="categorical-data.html#categorical-data-in-r"><i class="fa fa-check"></i><b>7.1</b> Categorical Data in R</a></li>
<li class="chapter" data-level="7.2" data-path="categorical-data.html"><a href="categorical-data.html#categorical-data-in-python"><i class="fa fa-check"></i><b>7.2</b> Categorical Data in Python</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>8</b> Data Frames</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-r"><i class="fa fa-check"></i><b>8.1</b> Data Frames in R</a></li>
<li class="chapter" data-level="8.2" data-path="data-frames.html"><a href="data-frames.html#data-frames-in-python"><i class="fa fa-check"></i><b>8.2</b> Data Frames in Python</a></li>
<li class="chapter" data-level="8.3" data-path="data-frames.html"><a href="data-frames.html#row-names-and-indexes"><i class="fa fa-check"></i><b>8.3</b> Row Names and Indexes</a></li>
<li class="chapter" data-level="8.4" data-path="data-frames.html"><a href="data-frames.html#getting-versus-setting"><i class="fa fa-check"></i><b>8.4</b> Getting Versus Setting</a></li>
</ul></li>
<li class="part"><span><b>III Part 2: Common Tasks and Patterns</b></span></li>
<li class="chapter" data-level="9" data-path="input-and-output.html"><a href="input-and-output.html"><i class="fa fa-check"></i><b>9</b> Input and Output</a>
<ul>
<li class="chapter" data-level="9.1" data-path="input-and-output.html"><a href="input-and-output.html#general-input-considerations"><i class="fa fa-check"></i><b>9.1</b> General Input Considerations</a></li>
<li class="chapter" data-level="9.2" data-path="input-and-output.html"><a href="input-and-output.html#reading-in-text-files-with-r"><i class="fa fa-check"></i><b>9.2</b> Reading in Text Files with R</a></li>
<li class="chapter" data-level="9.3" data-path="input-and-output.html"><a href="input-and-output.html#reading-in-text-files-with-python"><i class="fa fa-check"></i><b>9.3</b> Reading in Text Files with Python</a></li>
<li class="chapter" data-level="9.4" data-path="input-and-output.html"><a href="input-and-output.html#output"><i class="fa fa-check"></i><b>9.4</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="using-third-party-code.html"><a href="using-third-party-code.html"><i class="fa fa-check"></i><b>10</b> Using Third-Party Code</a>
<ul>
<li class="chapter" data-level="10.1" data-path="using-third-party-code.html"><a href="using-third-party-code.html#installing-packages-in-r"><i class="fa fa-check"></i><b>10.1</b> Installing Packages In R</a></li>
<li class="chapter" data-level="10.2" data-path="using-third-party-code.html"><a href="using-third-party-code.html#installing-packages-in-python"><i class="fa fa-check"></i><b>10.2</b> Installing Packages In Python</a></li>
<li class="chapter" data-level="10.3" data-path="using-third-party-code.html"><a href="using-third-party-code.html#loading-packages-in-r"><i class="fa fa-check"></i><b>10.3</b> Loading Packages In R</a></li>
<li class="chapter" data-level="10.4" data-path="using-third-party-code.html"><a href="using-third-party-code.html#loading-packages-in-python"><i class="fa fa-check"></i><b>10.4</b> Loading Packages In Python</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="using-third-party-code.html"><a href="using-third-party-code.html#importing-examples"><i class="fa fa-check"></i><b>10.4.1</b> <code>import</code>ing Examples</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>11</b> Control Flow</a>
<ul>
<li class="chapter" data-level="11.1" data-path="control-flow.html"><a href="control-flow.html#conditional-logic"><i class="fa fa-check"></i><b>11.1</b> Conditional Logic</a></li>
<li class="chapter" data-level="11.2" data-path="control-flow.html"><a href="control-flow.html#loops"><i class="fa fa-check"></i><b>11.2</b> Loops</a></li>
<li class="chapter" data-level="11.3" data-path="control-flow.html"><a href="control-flow.html#a-longer-example"><i class="fa fa-check"></i><b>11.3</b> A Longer Example</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="control-flow.html"><a href="control-flow.html#description-of-accept-reject-sampling"><i class="fa fa-check"></i><b>11.3.1</b> Description of Accept-Reject Sampling</a></li>
<li class="chapter" data-level="11.3.2" data-path="control-flow.html"><a href="control-flow.html#a-specific-example"><i class="fa fa-check"></i><b>11.3.2</b> A Specific Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="reshaping-and-combining-data-sets.html"><a href="reshaping-and-combining-data-sets.html"><i class="fa fa-check"></i><b>12</b> Reshaping and Combining Data Sets</a>
<ul>
<li class="chapter" data-level="12.1" data-path="reshaping-and-combining-data-sets.html"><a href="reshaping-and-combining-data-sets.html#ordering-and-sorting-data"><i class="fa fa-check"></i><b>12.1</b> Ordering and Sorting Data</a></li>
<li class="chapter" data-level="12.2" data-path="reshaping-and-combining-data-sets.html"><a href="reshaping-and-combining-data-sets.html#stacking-data-sets-and-placing-them-shoulder-to-shoulder"><i class="fa fa-check"></i><b>12.2</b> Stacking Data Sets and Placing them Shoulder to Shoulder</a></li>
<li class="chapter" data-level="12.3" data-path="reshaping-and-combining-data-sets.html"><a href="reshaping-and-combining-data-sets.html#merging-or-joining-data-sets"><i class="fa fa-check"></i><b>12.3</b> Merging or Joining Data Sets</a></li>
<li class="chapter" data-level="12.4" data-path="reshaping-and-combining-data-sets.html"><a href="reshaping-and-combining-data-sets.html#long-versus-wide-data"><i class="fa fa-check"></i><b>12.4</b> Long Versus Wide Data</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="reshaping-and-combining-data-sets.html"><a href="reshaping-and-combining-data-sets.html#long-versus-wide-in-r"><i class="fa fa-check"></i><b>12.4.1</b> Long Versus Wide in R</a></li>
<li class="chapter" data-level="12.4.2" data-path="reshaping-and-combining-data-sets.html"><a href="reshaping-and-combining-data-sets.html#long-versus-wide-in-python"><i class="fa fa-check"></i><b>12.4.2</b> Long Versus Wide in Python</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>13</b> Visualization</a>
<ul>
<li class="chapter" data-level="13.1" data-path="visualization.html"><a href="visualization.html#base-r-plotting"><i class="fa fa-check"></i><b>13.1</b> Base R Plotting</a></li>
<li class="chapter" data-level="13.2" data-path="visualization.html"><a href="visualization.html#plotting-with-ggplot2"><i class="fa fa-check"></i><b>13.2</b> Plotting with <code>ggplot2</code></a></li>
<li class="chapter" data-level="13.3" data-path="visualization.html"><a href="visualization.html#plotting-with-matplotlib"><i class="fa fa-check"></i><b>13.3</b> Plotting with Matplotlib</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="working-with-text-data.html"><a href="working-with-text-data.html"><i class="fa fa-check"></i><b>14</b> Working With Text Data</a></li>
<li class="chapter" data-level="15" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>15</b> Dates and Times</a></li>
<li class="chapter" data-level="16" data-path="running-scripts-from-the-command-line.html"><a href="running-scripts-from-the-command-line.html"><i class="fa fa-check"></i><b>16</b> Running Scripts from the Command Line</a></li>
<li class="part"><span><b>IV Part 3: Programming Styles</b></span></li>
<li class="chapter" data-level="17" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html"><i class="fa fa-check"></i><b>17</b> An Introduction to Object-Oriented Programming</a>
<ul>
<li class="chapter" data-level="17.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#oop-in-python"><i class="fa fa-check"></i><b>17.1</b> OOP In Python</a>
<ul>
<li class="chapter" data-level="17.1.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#overview"><i class="fa fa-check"></i><b>17.1.1</b> Overview</a></li>
<li class="chapter" data-level="17.1.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#a-first-example"><i class="fa fa-check"></i><b>17.1.2</b> A First Example</a></li>
<li class="chapter" data-level="17.1.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#adding-inheritance"><i class="fa fa-check"></i><b>17.1.3</b> Adding Inheritance</a></li>
<li class="chapter" data-level="17.1.4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#adding-in-composition"><i class="fa fa-check"></i><b>17.1.4</b> Adding in Composition</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#oop-in-r"><i class="fa fa-check"></i><b>17.2</b> OOP In R</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#s3-objects-the-big-picture"><i class="fa fa-check"></i><b>17.2.1</b> S3 objects: The Big Picture</a></li>
<li class="chapter" data-level="17.2.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#using-s3-objects"><i class="fa fa-check"></i><b>17.2.2</b> Using S3 objects</a></li>
<li class="chapter" data-level="17.2.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-s3-objects"><i class="fa fa-check"></i><b>17.2.3</b> Creating S3 objects</a></li>
<li class="chapter" data-level="17.2.4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#s4-objects-the-big-picture"><i class="fa fa-check"></i><b>17.2.4</b> S4 objects: The Big Picture</a></li>
<li class="chapter" data-level="17.2.5" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#using-s4-objects"><i class="fa fa-check"></i><b>17.2.5</b> Using S4 objects</a></li>
<li class="chapter" data-level="17.2.6" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-s4-objects"><i class="fa fa-check"></i><b>17.2.6</b> Creating S4 objects</a></li>
<li class="chapter" data-level="17.2.7" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#reference-classes-the-big-picture"><i class="fa fa-check"></i><b>17.2.7</b> Reference Classes: The Big Picture</a></li>
<li class="chapter" data-level="17.2.8" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-reference-classes"><i class="fa fa-check"></i><b>17.2.8</b> Creating Reference Classes</a></li>
<li class="chapter" data-level="17.2.9" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-r6-classes"><i class="fa fa-check"></i><b>17.2.9</b> Creating R6 Classes</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#exercises-1"><i class="fa fa-check"></i><b>17.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="functional-programming.html"><a href="functional-programming.html"><i class="fa fa-check"></i><b>18</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="18.1" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-r"><i class="fa fa-check"></i><b>18.1</b> Functions as Function Inputs in R</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="functional-programming.html"><a href="functional-programming.html#sapply-and-vapply"><i class="fa fa-check"></i><b>18.1.1</b> <code>sapply</code> and <code>vapply</code></a></li>
<li class="chapter" data-level="18.1.2" data-path="functional-programming.html"><a href="functional-programming.html#lapply"><i class="fa fa-check"></i><b>18.1.2</b> <code>lapply</code></a></li>
<li class="chapter" data-level="18.1.3" data-path="functional-programming.html"><a href="functional-programming.html#apply"><i class="fa fa-check"></i><b>18.1.3</b> <code>apply</code></a></li>
<li class="chapter" data-level="18.1.4" data-path="functional-programming.html"><a href="functional-programming.html#tapply"><i class="fa fa-check"></i><b>18.1.4</b> <code>tapply</code></a></li>
<li class="chapter" data-level="18.1.5" data-path="functional-programming.html"><a href="functional-programming.html#mapply"><i class="fa fa-check"></i><b>18.1.5</b> <code>mapply</code></a></li>
<li class="chapter" data-level="18.1.6" data-path="functional-programming.html"><a href="functional-programming.html#reduce-and-do.call"><i class="fa fa-check"></i><b>18.1.6</b> <code>Reduce</code> and <code>do.call</code></a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="functional-programming.html"><a href="functional-programming.html#another-example-in-r"><i class="fa fa-check"></i><b>18.2</b> Another Example in R</a></li>
<li class="chapter" data-level="18.3" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-base-python"><i class="fa fa-check"></i><b>18.3</b> Functions as Function Inputs in Base Python</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="functional-programming.html"><a href="functional-programming.html#map"><i class="fa fa-check"></i><b>18.3.1</b> <code>map</code></a></li>
<li class="chapter" data-level="18.3.2" data-path="functional-programming.html"><a href="functional-programming.html#filter"><i class="fa fa-check"></i><b>18.3.2</b> <code>filter</code></a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-numpy"><i class="fa fa-check"></i><b>18.4</b> Functions as Function Inputs in Numpy</a></li>
<li class="chapter" data-level="18.5" data-path="functional-programming.html"><a href="functional-programming.html#functional-methods-in-pandas"><i class="fa fa-check"></i><b>18.5</b> Functional Methods in pandas</a></li>
<li class="chapter" data-level="18.6" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-miscellany"><i class="fa fa-check"></i><b>18.6</b> Functions as Function Inputs (miscellany)</a></li>
<li class="chapter" data-level="18.7" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-outputs-in-r"><i class="fa fa-check"></i><b>18.7</b> Functions as Function Outputs in R</a></li>
<li class="chapter" data-level="18.8" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-outputs-in-python"><i class="fa fa-check"></i><b>18.8</b> Functions as Function Outputs in Python</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R and Python For Data Analysis: A Side By Side Approach</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="control-flow" class="section level1" number="11">
<h1><span class="header-section-number">Chapter 11</span> Control Flow</h1>
<div id="conditional-logic" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Conditional Logic</h2>
<p>We discussed Boolean objects in <a href="basic-types.html#basic-types">2</a>. We used these for</p>
<ul>
<li>counting up number of times a condition appeared, and</li>
<li>subsetting.</li>
</ul>
<p>Another way to use them is to conditionally execute code, depending on whether or truth condition of a Boolean.</p>
<p>In R,</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="control-flow.html#cb125-1" aria-hidden="true" tabindex="-1"></a>myName <span class="ot">&lt;-</span> <span class="st">&quot;Clare&quot;</span></span>
<span id="cb125-2"><a href="control-flow.html#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(myName <span class="sc">!=</span> <span class="st">&quot;Taylor&quot;</span>){</span>
<span id="cb125-3"><a href="control-flow.html#cb125-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;you are not Taylor&quot;</span>)</span>
<span id="cb125-4"><a href="control-flow.html#cb125-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb125-5"><a href="control-flow.html#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;you are not Taylor&quot;</span></span></code></pre></div>
<p><a href="https://docs.python.org/3/tutorial/controlflow.html#if-statements">In Python</a>, you don’t need curly braces, but the indentation needs to be just right, and you need a colon.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb126-1"><a href="control-flow.html#cb126-1" aria-hidden="true" tabindex="-1"></a>my_name <span class="op">=</span> <span class="st">&quot;Taylor&quot;</span></span>
<span id="cb126-2"><a href="control-flow.html#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> my_name <span class="op">==</span> <span class="st">&quot;Taylor&quot;</span>:</span>
<span id="cb126-3"><a href="control-flow.html#cb126-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;hi Taylor&quot;</span>)</span>
<span id="cb126-4"><a href="control-flow.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co">## hi Taylor</span></span></code></pre></div>
<p>There can be more than one truth test. To test alternative Boolean conditions, you can add one or more <code>else if</code> (in R) or <code>elif</code> (in Python) blocks. The first block with a Boolean that is found to be true will execute, and none of the resulting conditions will be checked.</p>
<p>If no <code>if</code> block or <code>else if</code>/<code>elif</code> block executes, an <code>else</code> block will always execute. That’s why <code>else</code> blocks don’t need to look at a Boolean. Whether they execute only depends on the Booleans in the previous blocks.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="control-flow.html#cb127-1" aria-hidden="true" tabindex="-1"></a>food <span class="ot">&lt;-</span> <span class="st">&quot;muffin&quot;</span></span>
<span id="cb127-2"><a href="control-flow.html#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(food <span class="sc">==</span> <span class="st">&quot;apple&quot;</span>){</span>
<span id="cb127-3"><a href="control-flow.html#cb127-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;an apple a day keeps the doctor away&quot;</span>)</span>
<span id="cb127-4"><a href="control-flow.html#cb127-4" aria-hidden="true" tabindex="-1"></a>}<span class="cf">else</span> <span class="cf">if</span>(food <span class="sc">==</span> <span class="st">&quot;muffin&quot;</span>){</span>
<span id="cb127-5"><a href="control-flow.html#cb127-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;muffins have a lot of sugar in them&quot;</span>)</span>
<span id="cb127-6"><a href="control-flow.html#cb127-6" aria-hidden="true" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb127-7"><a href="control-flow.html#cb127-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;neither an apple nor a muffin&quot;</span>)</span>
<span id="cb127-8"><a href="control-flow.html#cb127-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb127-9"><a href="control-flow.html#cb127-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;muffins have a lot of sugar in them&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb128"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb128-1"><a href="control-flow.html#cb128-1" aria-hidden="true" tabindex="-1"></a>my_num <span class="op">=</span> <span class="fl">42.999</span></span>
<span id="cb128-2"><a href="control-flow.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> my_num <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb128-3"><a href="control-flow.html#cb128-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;my_num is even&quot;</span>)</span>
<span id="cb128-4"><a href="control-flow.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> my_num <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb128-5"><a href="control-flow.html#cb128-5" aria-hidden="true" tabindex="-1"></a>    my_num <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb128-6"><a href="control-flow.html#cb128-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;my_num was made even&quot;</span>)</span>
<span id="cb128-7"><a href="control-flow.html#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb128-8"><a href="control-flow.html#cb128-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;you&#39;re cheating by not using integers!&quot;</span>)</span>
<span id="cb128-9"><a href="control-flow.html#cb128-9" aria-hidden="true" tabindex="-1"></a><span class="co">## you&#39;re cheating by not using integers!</span></span></code></pre></div>
</div>
<div id="loops" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Loops</h2>
<p>One line of code generally does one “thing,” unless you’re using loops. Code written inside a loop will execute many times.</p>
<p>The most common loop for us will be a <code>for</code> loop. A simple <code>for</code> loop in R might look like this</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="control-flow.html#cb129-1" aria-hidden="true" tabindex="-1"></a>myLength <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb129-2"><a href="control-flow.html#cb129-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> myLength)</span>
<span id="cb129-3"><a href="control-flow.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(myLength)){</span>
<span id="cb129-4"><a href="control-flow.html#cb129-4" aria-hidden="true" tabindex="-1"></a>    r[i] <span class="ot">&lt;-</span> i</span>
<span id="cb129-5"><a href="control-flow.html#cb129-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb129-6"><a href="control-flow.html#cb129-6" aria-hidden="true" tabindex="-1"></a>r</span>
<span id="cb129-7"><a href="control-flow.html#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4 5 6 7 8 9</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li><code>seq_len(myLength)</code> gives us a <code>vector</code></li>
<li><code>i</code> is a variable that takes on the values found in the <code>vector</code></li>
<li>Code inside the loop (inside the curly braces), is repeatedly executed, and it may or may not reference the dynamic variable <code>i</code></li>
</ol>
<p><a href="https://docs.python.org/3/tutorial/controlflow.html#for-statements">In Python</a></p>
<div class="sourceCode" id="cb130"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb130-1"><a href="control-flow.html#cb130-1" aria-hidden="true" tabindex="-1"></a>my_length <span class="op">=</span> <span class="dv">9</span></span>
<span id="cb130-2"><a href="control-flow.html#cb130-2" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> []</span>
<span id="cb130-3"><a href="control-flow.html#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(my_length):</span>
<span id="cb130-4"><a href="control-flow.html#cb130-4" aria-hidden="true" tabindex="-1"></a>    r.append(i)</span>
<span id="cb130-5"><a href="control-flow.html#cb130-5" aria-hidden="true" tabindex="-1"></a>r</span>
<span id="cb130-6"><a href="control-flow.html#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="co">## [0, 1, 2, 3, 4, 5, 6, 7, 8]</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Unsurprisingly, Python’s syntax opts for indentation and colons instead of curly braces and parentheses,</li>
<li>Code inside the loop (inside the curly braces), is repeatedly executed, and it may or may not reference the dynamic variable <code>i</code></li>
<li><code>for</code> loops in Python are more flexible because they iterate over many different types of data structures,</li>
<li>The <a href="https://docs.python.org/3/tutorial/controlflow.html#the-range-function"><code>range</code></a> doesn’t generate all the numbers in the sequence at once, so it saves on memory. This can be quite useful for certain applications. However, <code>r</code> is a list that <em>does</em> store all the consecutive integers.</li>
</ol>
<div class="rmd-caution">
<p>Loop tips:</p>
<ol style="list-style-type: decimal">
<li>If you find yourself copy/paste-ing code, changing only a small portion of text on each line of code, you should consider using a loop,</li>
<li>If a <code>for</code> loop works for something you are trying to do, first try to find a replacement function that does what you want. The examples above just made a <code>vector</code>/<code>list</code> of consecutive integers. There are many built in functions that accomplish this. Avoiding loops in this case would make your program shorter, easier to read, and (potentially) much faster.</li>
<li>A third option between looping, and a built-in function, is to try the functional approach. This will be explained more in the last chapter.</li>
<li>Watch out for <a href="https://en.wikipedia.org/wiki/Off-by-one_error"><strong>off-by-one</strong> errors</a>. Iterating over the wrong sequence is a common mistake, considering
<ul>
<li>Python starts counting from <span class="math inline">\(0\)</span>, while R starts counting from <span class="math inline">\(1\)</span></li>
<li>sometimes iteration <code>i</code> references the <code>i-1</code>th element of a container</li>
<li>The behavior of loops is sometimes more difficult to understand if they’re using <code>break</code> or <code>continue</code>/<code>next</code> statements</li>
</ul></li>
<li><em>Don’t hardcode variables.</em> Minimize the number of places you have to make changes to your code. You will change your code consistently, so save your future self some time.</li>
</ol>
</div>
<div class="rmd-caution">
<p>The last point bears repeating: <em>don’t hardcode variables</em>. In statistical programs, there are often “tuning parameters,” for instance that must be changed frequently to affect the overall behavior of the program. If these variables only need to be changed in one location, that saves you a lot of time and gives you more flexibility.</p>
<p>In the example above, the <code>myLength</code> or <code>my_length</code> variable could be referenced in many places throughout the entire program. If you wanted to change the number of iterations in your program (which happens all the time), and you <em>did</em> hardcode the length in a bunch of places throughout the program, you would need to hunt down all those changes!</p>
</div>
<p>Python provides an alternative way to construct lists similar to the one we constructed in the above example. They are called <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions"><strong>list comprehensions</strong></a>. You can incorporate iteration and conditional logic in one line of code.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb131-1"><a href="control-flow.html#cb131-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span><span class="op">*</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>) <span class="cf">if</span> i<span class="op">%</span><span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb131-2"><a href="control-flow.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="co">## [0, 6, 12, 18, 24]</span></span></code></pre></div>
<p>You might also have a look at <a href="https://www.python.org/dev/peps/pep-0289/"><em>generator expressions</em></a> and <a href="https://www.python.org/dev/peps/pep-0274/"><em>dictionary comprehensions</em></a>.</p>
<p>R can come close to replicating the above behavior with vectorization, but the conditional part is hard to achieve without subsetting.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="control-flow.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">*</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">9</span>)[<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">9</span>)<span class="sc">%%</span><span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>]</span>
<span id="cb132-2"><a href="control-flow.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  0  6 12 18 24</span></span></code></pre></div>
</div>
<div id="a-longer-example" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> A Longer Example</h2>
<div id="description-of-accept-reject-sampling" class="section level3" number="11.3.1">
<h3><span class="header-section-number">11.3.1</span> Description of Accept-Reject Sampling</h3>
<p>An example of an algorithm that uses conditional logic is the <strong>accept-reject sampling method</strong> <span class="citation">(<a href="#ref-monte-carlo-stat-methods" role="doc-biblioref">Robert and Casella 2005</a>)</span>. This is useful for when we want to sample from a <em>target probability density</em> <span class="math inline">\(p(x)\)</span>, using another distribution called a <em>proposal distribution</em> <span class="math inline">\(q(x)\)</span>.</p>
<p><span class="math inline">\(q(x)\)</span> is probably a distribution that is easy to sample from and is easy to evaluate pointwise. For example, a uniform distribution satisfies these criteria because both R and Python have functions that accomplish these two things (e.g. sampling can be done with <code>runif</code> in R and <code>np.random.uniform</code> in Python). <span class="math inline">\(p(x)\)</span> is generally more “complicated.” If it wasn’t, we would try to find some built-in function for it.</p>
<p>One common way a distribution can be complicated is that it can have an unknown <strong>normalizing constant</strong>–one that is difficult or impossible to solve using calculus. This happens a lot in <em>Bayesian Statistics</em>, for example.<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>. We might write down
<span class="math display">\[
p(x) = \frac{f(x)}{\int f(x) dx},
\]</span>
and this is guaranteed to be a probability density function as long as <span class="math inline">\(f(x) \ge 0\)</span> and <span class="math inline">\(\int f(x) dx &lt; \infty\)</span>, but we might have no idea how to solve the denominator. In this case, <span class="math inline">\(f(x)\)</span> is easy to evaluate pointwise, but <span class="math inline">\(p(x)\)</span> is not.</p>
<p>This algorithm makes use of an auxiliary random variable that is sampled from a <span class="math inline">\(\text{Bernoulli}(p)\)</span> distribution. As long as <span class="math inline">\(0 &lt; p &lt; 1\)</span>, a Bernoulli random variable <span class="math inline">\(Y\)</span> is either <span class="math inline">\(0\)</span> or <span class="math inline">\(1\)</span>. The probability it takes the value <span class="math inline">\(1\)</span> is <span class="math inline">\(p\)</span>, while the probability that it takes the value <span class="math inline">\(0\)</span> is <span class="math inline">\(1-p\)</span>. A coin flip is a good example use-case for this distribution. Coin flips are commonly assumed to be distributed as<span class="math inline">\(\text{Bernoulli}(.5)\)</span>. At least for fair coins, there is an equal chance that the coin lands heads (i.e. <span class="math inline">\(0\)</span>) or tails (i.e. <span class="math inline">\(1\)</span>).</p>
<p>The most difficult part about using this algorithm is that one must calculate the probability parameter of this Bernoulli random variable. This involves calculating (by hand) an upper bound <span class="math inline">\(M\)</span> for the ratio <span class="math inline">\(f(x) / q(x)\)</span>. This bound has to hold uniformly, meaning that it is a constant number that is greater than the ratio no matter what <span class="math inline">\(x\)</span> we plug in.</p>
<p>Below is one step of the accept-reject algorithm.</p>
<hr />
<p><strong>Algorithm 1</strong>: Accept-Reject Sampling (One Step)</p>
<hr />
<ol style="list-style-type: decimal">
<li>Calculate <span class="math inline">\(M &gt; \frac{f(x)}{q(x)}\)</span> (the smaller the better)</li>
<li>Sample <span class="math inline">\(X\)</span> from <span class="math inline">\(q(x)\)</span></li>
<li>Sample <span class="math inline">\(Y \mid X\)</span> from <span class="math inline">\(\text{Bernoulli}\left(\frac{f(X)}{q(X)M}\right)\)</span></li>
<li>If <span class="math inline">\(Y = 1\)</span>, then return <span class="math inline">\(X\)</span></li>
<li>Otherwise, return nothing</li>
</ol>
<hr />
<p>Multiple samples will be required, so this process needs to be iterated many times. There are two ways to do this. If you want to iterate a fixed number of times, you can use a <code>for</code> loop. However, in that case, you will end up with a random number of samples. On the other hand, if you want a nonrandom number of samples, you will probably want a <code>while</code> loop. This is the approach the example below takes. The <code>while</code> loop will continue iterating until a condition is false. In our case, we want to loop until we receive the total number of samples we requested.</p>
</div>
<div id="a-specific-example" class="section level3" number="11.3.2">
<h3><span class="header-section-number">11.3.2</span> A Specific Example</h3>
<p>Here is a specific example. Let’s say our target<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a> is
<span class="math display">\[
p(x) = 
\begin{cases}
\frac{x^2(1-x)}{\int_0^1 x^2(1-x) dx} &amp; 0 &lt; x &lt; 1 \\
0 &amp; \text{otherwise}
\end{cases}.
\]</span>
The denominator, <span class="math inline">\(\int_0^1 x^2(1-x) dx\)</span>, is the target’s normalizing constant. You might know how to solve this integral, but let’s pretend for the sake of our example that it’s too difficult for us. We want to sample from <span class="math inline">\(p(x)\)</span> while only being able to evaluate (not sample) from its normalized version.</p>
<p>Next, let’s choose a uniform distribution for our proposal distribution:
<span class="math display">\[
q(x) = 
\begin{cases}
1 &amp; 0 &lt; x &lt; 1 \\
0 &amp; \text{otherwise}
\end{cases}
\]</span>
We can plot all three functions.</p>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-129-1.png" width="80%" /></p>
<p>Here’s some Python code that attempts to sample once from <span class="math inline">\(p(x)\)</span>. Sometimes proposals are not accepted. When that happens, the function returns <code>None</code>.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb133-1"><a href="control-flow.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb133-2"><a href="control-flow.html#cb133-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-3"><a href="control-flow.html#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(samp):</span>
<span id="cb133-4"><a href="control-flow.html#cb133-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;the unnormalized density&quot;&quot;&quot;</span></span>
<span id="cb133-5"><a href="control-flow.html#cb133-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">1</span><span class="op">-</span>samp)<span class="op">*</span>(samp<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb133-6"><a href="control-flow.html#cb133-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-7"><a href="control-flow.html#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> attempt_one_samp():</span>
<span id="cb133-8"><a href="control-flow.html#cb133-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;attempts to sample from target distribution, using uniform as a proposal&quot;&quot;&quot;</span></span>
<span id="cb133-9"><a href="control-flow.html#cb133-9" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> np.random.uniform()</span>
<span id="cb133-10"><a href="control-flow.html#cb133-10" aria-hidden="true" tabindex="-1"></a>    M <span class="op">=</span> <span class="dv">4</span><span class="op">/</span><span class="dv">27</span></span>
<span id="cb133-11"><a href="control-flow.html#cb133-11" aria-hidden="true" tabindex="-1"></a>    bern_prob_param <span class="op">=</span> f(x)<span class="op">/</span>M</span>
<span id="cb133-12"><a href="control-flow.html#cb133-12" aria-hidden="true" tabindex="-1"></a>    accept <span class="op">=</span> np.random.binomial(<span class="dv">1</span>, bern_prob_param) <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb133-13"><a href="control-flow.html#cb133-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> accept:</span>
<span id="cb133-14"><a href="control-flow.html#cb133-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x</span></code></pre></div>
<div class="sourceCode" id="cb134"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb134-1"><a href="control-flow.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sample_from_target(num_times):</span>
<span id="cb134-2"><a href="control-flow.html#cb134-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;sample num_times from the target distribution&quot;&quot;&quot;</span></span>
<span id="cb134-3"><a href="control-flow.html#cb134-3" aria-hidden="true" tabindex="-1"></a>    samps <span class="op">=</span> []</span>
<span id="cb134-4"><a href="control-flow.html#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">len</span>(samps) <span class="op">&lt;</span> num_times:</span>
<span id="cb134-5"><a href="control-flow.html#cb134-5" aria-hidden="true" tabindex="-1"></a>        potential_samp <span class="op">=</span> attempt_one_samp()</span>
<span id="cb134-6"><a href="control-flow.html#cb134-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> potential_samp <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb134-7"><a href="control-flow.html#cb134-7" aria-hidden="true" tabindex="-1"></a>            samps.append(potential_samp)</span>
<span id="cb134-8"><a href="control-flow.html#cb134-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> samps</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>we used a <code>while</code> loop instead of a <code>for</code> loop because we did not know how many iterations it would take to get <code>num_times</code> samples</li>
<li>We are following the <a href="https://www.python.org/dev/peps/pep-0008/#other-recommendations">Python style guide</a> and using the <code>is not</code> keyword to check if something is <code>None</code></li>
</ol>
<p>In chapter <a href="visualization.html#visualization">13</a>, we’ll show you the code that you can use to generate the plot below.
<img src="r_and_python_book_files/figure-html/unnamed-chunk-132-1.png" width="672" /></p>

</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-monte-carlo-stat-methods" class="csl-entry">
Robert, Christian P., and George Casella. 2005. <em>Monte Carlo Statistical Methods (Springer Texts in Statistics)</em>. Berlin, Heidelberg: Springer-Verlag.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="11">
<li id="fn11"><p>The posterior distribution is usually the object of interest in Bayesian statistics. According to Bayes’ Rule, the unnormalized posterior is usually the product of two “easy” functions. However, integrating the product is not always possible!<a href="control-flow.html#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p>This is the density of a <span class="math inline">\(\text{Beta}(3,2)\)</span> random variable, if you’re curious.<a href="control-flow.html#fnref12" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="using-third-party-code.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reshaping-and-combining-data-sets.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tbrown122387/r_and_python_book/edit/master/11-control_flow.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
