<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Functional Programming | An Introduction to R and Python For Data Analysis: a Side By Side Approach</title>
  <meta name="description" content="Chapter 5 Functional Programming | An Introduction to R and Python For Data Analysis: a Side By Side Approach" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Functional Programming | An Introduction to R and Python For Data Analysis: a Side By Side Approach" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="tbrown122387/r_and_python_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Functional Programming | An Introduction to R and Python For Data Analysis: a Side By Side Approach" />
  
  
  

<meta name="author" content="Taylor R. Brown" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="an-introduction-to-object-oriented-programming.html"/>

<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction to R and Python For Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-sample-course"><i class="fa fa-check"></i>A Sample Course</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#become-a-contributor"><i class="fa fa-check"></i>Become a Contributor</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licenses"><i class="fa fa-check"></i>License(s)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#about-this-book"><i class="fa fa-check"></i>About this book</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-the-required-software"><i class="fa fa-check"></i>Installing the Required Software</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-r-and-rstudio"><i class="fa fa-check"></i>Installing R (and RStudio)</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-python-by-installing-anaconda"><i class="fa fa-check"></i>Installing Python by Installing Anaconda</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#hello-world-in-r"><i class="fa fa-check"></i><b>1.1</b> Hello World in R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#hello-world-in-python"><i class="fa fa-check"></i><b>1.2</b> Hello World in Python</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#getting-help"><i class="fa fa-check"></i><b>1.3</b> Getting Help</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#reading-documentation"><i class="fa fa-check"></i><b>1.3.1</b> Reading Documentation</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#understanding-file-paths"><i class="fa fa-check"></i><b>1.3.2</b> Understanding File Paths</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>1.4</b> Exercises</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#discussion"><i class="fa fa-check"></i><b>1.4.1</b> Discussion</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#easy"><i class="fa fa-check"></i><b>1.4.2</b> Easy</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>2</b> Data Types</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-types.html"><a href="data-types.html#basic-types"><i class="fa fa-check"></i><b>2.1</b> Basic Types</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-types.html"><a href="data-types.html#in-python-1"><i class="fa fa-check"></i><b>2.1.1</b> In Python</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-types.html"><a href="data-types.html#in-r-1"><i class="fa fa-check"></i><b>2.1.2</b> In R</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-types.html"><a href="data-types.html#exercises-1"><i class="fa fa-check"></i><b>2.1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-types.html"><a href="data-types.html#r-vectors-versus-numpy-arrays-and-pandas-series"><i class="fa fa-check"></i><b>2.2</b> R vectors versus Numpy <code>array</code>s (and Pandas <code>Series</code>)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-types.html"><a href="data-types.html#overview-of-r"><i class="fa fa-check"></i><b>2.2.1</b> Overview of R</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-types.html"><a href="data-types.html#overview-of-python"><i class="fa fa-check"></i><b>2.2.2</b> Overview of Python</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-types.html"><a href="data-types.html#vectorization-in-r"><i class="fa fa-check"></i><b>2.2.3</b> Vectorization in R</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-types.html"><a href="data-types.html#vectorization-in-python"><i class="fa fa-check"></i><b>2.2.4</b> Vectorization in Python</a></li>
<li class="chapter" data-level="2.2.5" data-path="data-types.html"><a href="data-types.html#indexing-vectors-in-r"><i class="fa fa-check"></i><b>2.2.5</b> Indexing <code>vector</code>s in R</a></li>
<li class="chapter" data-level="2.2.6" data-path="data-types.html"><a href="data-types.html#indexing-numpy-arrays"><i class="fa fa-check"></i><b>2.2.6</b> Indexing Numpy arrays</a></li>
<li class="chapter" data-level="2.2.7" data-path="data-types.html"><a href="data-types.html#some-gotchas"><i class="fa fa-check"></i><b>2.2.7</b> Some Gotchas</a></li>
<li class="chapter" data-level="2.2.8" data-path="data-types.html"><a href="data-types.html#how-do-r-and-python-handle-missing-values"><i class="fa fa-check"></i><b>2.2.8</b> How do R and Python handle missing values?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-types.html"><a href="data-types.html#numpys-ndarrays-versus-rs-matrices-and-arrays"><i class="fa fa-check"></i><b>2.3</b> Numpy’s <code>ndarray</code>s versus R’s matrices and arrays</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-types.html"><a href="data-types.html#in-python-2"><i class="fa fa-check"></i><b>2.3.1</b> In Python</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-types.html"><a href="data-types.html#in-r-2"><i class="fa fa-check"></i><b>2.3.2</b> In R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-types.html"><a href="data-types.html#rs-lists-versus-pythons-lists-and-dictionaries"><i class="fa fa-check"></i><b>2.4</b> R’s lists versus Python’s lists and dictionaries</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-types.html"><a href="data-types.html#lists-in-r"><i class="fa fa-check"></i><b>2.4.1</b> Lists In R</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-types.html"><a href="data-types.html#lists-in-python"><i class="fa fa-check"></i><b>2.4.2</b> Lists In Python</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-types.html"><a href="data-types.html#dictionaries-in-python"><i class="fa fa-check"></i><b>2.4.3</b> Dictionaries In Python</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-types.html"><a href="data-types.html#user-defined-functions-in-r-and-python"><i class="fa fa-check"></i><b>2.5</b> User-defined functions in R and Python</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-types.html"><a href="data-types.html#defining-r-functions"><i class="fa fa-check"></i><b>2.5.1</b> Defining R Functions</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-types.html"><a href="data-types.html#defining-python-functions"><i class="fa fa-check"></i><b>2.5.2</b> Defining Python Functions</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-types.html"><a href="data-types.html#more-details-on-rs-user-defined-functions"><i class="fa fa-check"></i><b>2.5.3</b> More details on R’s user-defined functions</a></li>
<li class="chapter" data-level="2.5.4" data-path="data-types.html"><a href="data-types.html#more-details-on-pythons-user-defined-functions"><i class="fa fa-check"></i><b>2.5.4</b> More details on Python’s user-defined functions</a></li>
<li class="chapter" data-level="2.5.5" data-path="data-types.html"><a href="data-types.html#function-scope-in-r"><i class="fa fa-check"></i><b>2.5.5</b> Function Scope in R</a></li>
<li class="chapter" data-level="2.5.6" data-path="data-types.html"><a href="data-types.html#function-scope-in-python"><i class="fa fa-check"></i><b>2.5.6</b> Function Scope in Python</a></li>
<li class="chapter" data-level="2.5.7" data-path="data-types.html"><a href="data-types.html#dynamic-lookup"><i class="fa fa-check"></i><b>2.5.7</b> Dynamic Lookup</a></li>
<li class="chapter" data-level="2.5.8" data-path="data-types.html"><a href="data-types.html#modifying-a-functions-arguments"><i class="fa fa-check"></i><b>2.5.8</b> Modifying a Function’s Arguments</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data-types.html"><a href="data-types.html#categorical-data"><i class="fa fa-check"></i><b>2.6</b> Categorical Data</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data-types.html"><a href="data-types.html#categorical-data-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Categorical Data in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="data-types.html"><a href="data-types.html#categorical-data-in-python"><i class="fa fa-check"></i><b>2.6.2</b> Categorical Data in Python</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data-types.html"><a href="data-types.html#data-frames"><i class="fa fa-check"></i><b>2.7</b> Data Frames</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="data-types.html"><a href="data-types.html#data-frames-in-r"><i class="fa fa-check"></i><b>2.7.1</b> Data Frames in R</a></li>
<li class="chapter" data-level="2.7.2" data-path="data-types.html"><a href="data-types.html#data-frames-in-python"><i class="fa fa-check"></i><b>2.7.2</b> Data Frames in Python</a></li>
<li class="chapter" data-level="2.7.3" data-path="data-types.html"><a href="data-types.html#row-names-and-indexes"><i class="fa fa-check"></i><b>2.7.3</b> Row Names and Indexes</a></li>
<li class="chapter" data-level="2.7.4" data-path="data-types.html"><a href="data-types.html#getting-versus-setting"><i class="fa fa-check"></i><b>2.7.4</b> Getting Versus Setting</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="data-types.html"><a href="data-types.html#exercises-2"><i class="fa fa-check"></i><b>2.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="odds-and-ends.html"><a href="odds-and-ends.html"><i class="fa fa-check"></i><b>3</b> Odds and Ends</a>
<ul>
<li class="chapter" data-level="3.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#input-and-output"><i class="fa fa-check"></i><b>3.1</b> Input and Output</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#reading-in-text-files"><i class="fa fa-check"></i><b>3.1.1</b> Reading In Text Files</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#using-third-party-code"><i class="fa fa-check"></i><b>3.2</b> Using Third-Party Code</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#installing-packages-in-r"><i class="fa fa-check"></i><b>3.2.1</b> Installing Packages In R</a></li>
<li class="chapter" data-level="3.2.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#installing-packages-in-python"><i class="fa fa-check"></i><b>3.2.2</b> Installing Packages In Python</a></li>
<li class="chapter" data-level="3.2.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loading-packages-in-r"><i class="fa fa-check"></i><b>3.2.3</b> Loading Packages In R</a></li>
<li class="chapter" data-level="3.2.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loading-packages-in-python"><i class="fa fa-check"></i><b>3.2.4</b> Loading Packages In Python</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#control-flow"><i class="fa fa-check"></i><b>3.3</b> Control Flow</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#conditional-logic"><i class="fa fa-check"></i><b>3.3.1</b> Conditional Logic</a></li>
<li class="chapter" data-level="3.3.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loops"><i class="fa fa-check"></i><b>3.3.2</b> Loops</a></li>
<li class="chapter" data-level="3.3.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#a-longer-example"><i class="fa fa-check"></i><b>3.3.3</b> A Longer Example</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#reshaping-and-combining-data-sets"><i class="fa fa-check"></i><b>3.4</b> Reshaping and Combining Data Sets</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#ordering-and-sorting-data"><i class="fa fa-check"></i><b>3.4.1</b> Ordering and Sorting Data</a></li>
<li class="chapter" data-level="3.4.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#stacking-data-sets-and-placing-them-shoulder-to-shoulder"><i class="fa fa-check"></i><b>3.4.2</b> Stacking Data Sets and Placing them Shoulder to Shoulder</a></li>
<li class="chapter" data-level="3.4.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#merging-or-joining-data-sets"><i class="fa fa-check"></i><b>3.4.3</b> Merging or Joining Data Sets</a></li>
<li class="chapter" data-level="3.4.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#long-versus-wide-data"><i class="fa fa-check"></i><b>3.4.4</b> Long Versus Wide Data</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="odds-and-ends.html"><a href="odds-and-ends.html#visualization"><i class="fa fa-check"></i><b>3.5</b> Visualization</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#base-r-plotting"><i class="fa fa-check"></i><b>3.5.1</b> Base R Plotting</a></li>
<li class="chapter" data-level="3.5.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#plotting-with-ggplot2"><i class="fa fa-check"></i><b>3.5.2</b> Plotting with <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.5.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#plotting-with-matplotlib"><i class="fa fa-check"></i><b>3.5.3</b> Plotting with Matplotlib</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="odds-and-ends.html"><a href="odds-and-ends.html#exercises-3"><i class="fa fa-check"></i><b>3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html"><i class="fa fa-check"></i><b>4</b> An Introduction to Object-Oriented Programming</a>
<ul>
<li class="chapter" data-level="4.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#oop-in-python"><i class="fa fa-check"></i><b>4.1</b> OOP In Python</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#overview"><i class="fa fa-check"></i><b>4.1.1</b> Overview</a></li>
<li class="chapter" data-level="4.1.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#a-first-example"><i class="fa fa-check"></i><b>4.1.2</b> A First Example</a></li>
<li class="chapter" data-level="4.1.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#adding-inheritance"><i class="fa fa-check"></i><b>4.1.3</b> Adding Inheritance</a></li>
<li class="chapter" data-level="4.1.4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#adding-in-composition"><i class="fa fa-check"></i><b>4.1.4</b> Adding in Composition</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#oop-in-r"><i class="fa fa-check"></i><b>4.2</b> OOP In R</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#s3-objects-the-big-picture"><i class="fa fa-check"></i><b>4.2.1</b> S3 objects: The Big Picture</a></li>
<li class="chapter" data-level="4.2.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#using-s3-objects"><i class="fa fa-check"></i><b>4.2.2</b> Using S3 objects</a></li>
<li class="chapter" data-level="4.2.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-s3-objects"><i class="fa fa-check"></i><b>4.2.3</b> Creating S3 objects</a></li>
<li class="chapter" data-level="4.2.4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#s4-objects-the-big-picture"><i class="fa fa-check"></i><b>4.2.4</b> S4 objects: The Big Picture</a></li>
<li class="chapter" data-level="4.2.5" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#using-s4-objects"><i class="fa fa-check"></i><b>4.2.5</b> Using S4 objects</a></li>
<li class="chapter" data-level="4.2.6" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-s4-objects"><i class="fa fa-check"></i><b>4.2.6</b> Creating S4 objects</a></li>
<li class="chapter" data-level="4.2.7" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#reference-classes-the-big-picture"><i class="fa fa-check"></i><b>4.2.7</b> Reference Classes: The Big Picture</a></li>
<li class="chapter" data-level="4.2.8" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-reference-classes"><i class="fa fa-check"></i><b>4.2.8</b> Creating Reference Classes</a></li>
<li class="chapter" data-level="4.2.9" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-r6-classes"><i class="fa fa-check"></i><b>4.2.9</b> Creating R6 Classes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#exercises-4"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functional-programming.html"><a href="functional-programming.html"><i class="fa fa-check"></i><b>5</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="functional-programming.html"><a href="functional-programming.html#background"><i class="fa fa-check"></i><b>5.1</b> Background</a></li>
<li class="chapter" data-level="5.2" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-r"><i class="fa fa-check"></i><b>5.2</b> Functions as Function Inputs in R</a></li>
<li class="chapter" data-level="5.3" data-path="functional-programming.html"><a href="functional-programming.html#another-example-in-r"><i class="fa fa-check"></i><b>5.3</b> Another Example in R</a></li>
<li class="chapter" data-level="5.4" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-base-python"><i class="fa fa-check"></i><b>5.4</b> Functions as Function Inputs in Base Python</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="functional-programming.html"><a href="functional-programming.html#map"><i class="fa fa-check"></i><b>5.4.1</b> <code>map</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="functional-programming.html"><a href="functional-programming.html#filter"><i class="fa fa-check"></i><b>5.4.2</b> <code>filter</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="functional-programming.html"><a href="functional-programming.html#selected-numpy-functionals"><i class="fa fa-check"></i><b>5.5</b> Selected Numpy Functionals</a></li>
<li class="chapter" data-level="5.6" data-path="functional-programming.html"><a href="functional-programming.html#functional-methods-in-pandas"><i class="fa fa-check"></i><b>5.6</b> Functional Methods in Pandas</a></li>
<li class="chapter" data-level="5.7" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-outputs-in-r"><i class="fa fa-check"></i><b>5.7</b> Functions as Function Outputs in R</a></li>
<li class="chapter" data-level="5.8" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-outputs-in-python"><i class="fa fa-check"></i><b>5.8</b> Functions as Function Outputs in Python</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="functional-programming.html"><a href="functional-programming.html#exercises-5"><i class="fa fa-check"></i><b>5.8.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R and Python For Data Analysis: a Side By Side Approach</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functional-programming" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Functional Programming</h1>
<div id="background" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Background</h2>
<p>Even though this book only discusses <em>one</em> of our languages of interest, the motivation for <strong>functional programming</strong> in both R and Python is clearly explained in <a href="https://adv-r.hadley.nz/fp.html">Advanced R</a>:</p>
<blockquote>
<p>A functional style tends to create functions that can easily be analysed in isolation (i.e. using only local information), and hence is often much easier to automatically optimise or parallelise.</p>
</blockquote>
<p>This sounds like a good thing to aspire to, so what is functional programming? Unfortunately, it’s hard to give a one-line definition that is also comprehensive. Even with a definition, it isn’t immediately obvious why the pieces of that definition would be conducive to the above goals.</p>
<p>Here is my definition:</p>
<ul>
<li>a functional programming style is a style of programming that favors using functions that are both <em>first-class</em> and <em>pure</em>.</li>
</ul>
<p>Neither R nor Python is a 100% pure functional language. So for us, it’s a style that we can choose to let us guide us, or that we can disregard. You can choose to employ a more functional style, or you can choose to use elements discussed in <a href="an-introduction-to-object-oriented-programming.html#an-introduction-to-object-oriented-programming">4</a>. Some people unilaterally prefer one to the other, but others prefer to decide which to use depending on the task at hand.</p>
<ol style="list-style-type: decimal">
<li><strong>First class functions</strong> are functions that can be passed as arguments to other functions, can be returned from other functions, and can be assigned to variables or stored in data structures. TODO quote.</li>
</ol>
<p>Functions in both R and Python are first class. Many of the examples we discuss in this chapter would not exist if they were not.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Pure functions</strong> return the same output if they are given the same input, and they do not produce <strong>side-effects</strong>.</li>
</ol>
<p>Side-effects are changes made to non-temporary variables, to the “state” of the program. If your function refers to or modifies global variables, or if it modifies arguments passed in, then it is more difficult to understand. As was discussed in TODO, this is possible in both R and Python, but the function is not completely understandable</p>
<div class="line-block">  a.) by itself in isolation, or</div>
<div class="line-block">  b.) without knowing how many times it is called.</div>
<p>Regarding a.), we discussed examples where changing the value of a single global variable can completely change the behavior of an entire program (not just a single function!). Regarding b.) a variable has <strong>referential transparency</strong> if it can be replaced with a single value without changing the program’s behavior.</p>
<p>One of the biggest tip-offs that you should be using functional programming is if you need to evaluate a single function many times, or in many different ways. This can happen in a great number of ways. Instead of copy/pasting similar-looking lines of code, you might consider <em>higher-order</em> functions that take your function as an input, and intelligently call it in all the many ways you want it to. A third option, not as heavily-discussed in this section, is to use a loop structure (c.f. <a href="odds-and-ends.html#loops">3.3.2</a>).</p>
<p>Another tip-off is if you need many different functions that are all resembling one another. Should you define each function separately, using excessive copy/paste-ing? Or should you write a function that can elegantly generate any function you need?</p>
</div>
<div id="functions-as-function-inputs-in-r" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Functions as Function Inputs in R</h2>
<p>Many of the most commonly-used functionals in R have names that end in “apply.” The ones I discuss are <code>sapply</code>, <code>vapply</code>, <code>lapply</code>, <code>apply</code>, <code>tapply</code> and <code>mapply</code>. Each of these takes a function as one of its arguments. This is possible because R has first-class functions.</p>
<p>Suppose we have a <code>data.frame</code> that has 10 rows and 100 columns. What if we want to take the mean of each column?</p>
<p>An amateurish way to do this would be something like the following.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="functional-programming.html#cb183-1" aria-hidden="true" tabindex="-1"></a>myFirstMean <span class="ot">&lt;-</span> <span class="fu">mean</span>(myDF[,<span class="dv">1</span>])</span>
<span id="cb183-2"><a href="functional-programming.html#cb183-2" aria-hidden="true" tabindex="-1"></a>mySecondMean <span class="ot">&lt;-</span> <span class="fu">mean</span>(myDF[,<span class="dv">2</span>])</span>
<span id="cb183-3"><a href="functional-programming.html#cb183-3" aria-hidden="true" tabindex="-1"></a>myThirdMean <span class="ot">&lt;-</span> <span class="fu">mean</span>(myDF[,<span class="dv">3</span>])</span>
<span id="cb183-4"><a href="functional-programming.html#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="co"># so on and so forth</span></span></code></pre></div>
<p>You need one line of code for each column in this data frame. For data frames with a lot of columns, this becomes quite tedious. You should also ask yourself what happens to you and your collaborators when the data frame changes even slightly, or if you want to apply a different function to its columns. Third, the results are not stored in a single container. You are making it difficult on yourself if you want to use these variables in subsequent pieces of code. TODO cite DRY</p>
<p>Instead, prefer the use of <code>sapply</code> in this situation. The “s” in <code>sapply</code> stands for “simplified.” In this bit of code <code>mean</code> is called on each column of th data frame. <code>sapply</code> applies the function over columns, instead of rows, because data frames are internally a <code>list</code> of columns.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="functional-programming.html#cb184-1" aria-hidden="true" tabindex="-1"></a>myMeans <span class="ot">&lt;-</span> <span class="fu">sapply</span>(myDF, mean)</span>
<span id="cb184-2"><a href="functional-programming.html#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(myMeans)</span>
<span id="cb184-3"><a href="functional-programming.html#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="do">##         X1         X2         X3         X4         X5         X6 </span></span>
<span id="cb184-4"><a href="functional-programming.html#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  0.1109985 -0.1202489  0.6826312 -0.3002237 -0.3812627  0.5790147</span></span></code></pre></div>
<p>Each call to <code>mean</code> returns a <code>double</code> <code>vector</code> of length <span class="math inline">\(1\)</span>. This is necessary if you want to collect all the results into a <code>vector</code>–remember, all elements of a <code>vector</code> have to have the same type. To get the same behavior, you might also consider using <code>vapply(myDF, mean, numeric(1))</code>.</p>
<p>In the above case, “simplify” referred to how one-hundred length-<span class="math inline">\(1\)</span> vectors were simplified into one length-<span class="math inline">\(100\)</span> vector. However, “simplified” does not necessarily imply that all elements will be stored in a vector. Consider the <code>summary</code> function, which returns a <code>double</code> <code>vector</code> of length <span class="math inline">\(6\)</span>. In this case, one-hundred length-<span class="math inline">\(6\)</span> vectors were simplified into one <span class="math inline">\(6 \times 100\)</span> matrix.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="functional-programming.html#cb185-1" aria-hidden="true" tabindex="-1"></a>mySummaries <span class="ot">&lt;-</span> <span class="fu">sapply</span>(myDF, summary)</span>
<span id="cb185-2"><a href="functional-programming.html#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(mySummaries)</span>
<span id="cb185-3"><a href="functional-programming.html#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb185-4"><a href="functional-programming.html#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mySummaries)</span>
<span id="cb185-5"><a href="functional-programming.html#cb185-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]   6 100</span></span></code></pre></div>
<div class="rmd-details">
<p>
Another function that is worth mentioning is <code>replicate</code>–it is a wrapper for <code>sapply</code>. Consider a situation where you want to call a function many times with the same inputs. You might try something like <code>sapply(1:100, function(elem) { return(myFunc(someInput)) } )</code>. Another, more readable, way to do this is <code>replicate(100, myFunc(someInput))</code>.
</p>
</div>
<p>For functions that do not return amenable types that fit into a <code>vector</code>, <code>matrix</code> or <code>array</code>, they might need to be stored in <code>list</code>. In this situation, you would need <code>lapply</code>. The “l” in <code>lapply</code> stands for “list.” <code>lapply</code> always returns a <code>list</code> of the same length as the <code>input</code>.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="functional-programming.html#cb186-1" aria-hidden="true" tabindex="-1"></a>regress <span class="ot">&lt;-</span> <span class="cf">function</span>(y){ <span class="fu">lm</span>(y <span class="sc">~</span> <span class="dv">1</span>) }</span>
<span id="cb186-2"><a href="functional-programming.html#cb186-2" aria-hidden="true" tabindex="-1"></a>myRegs <span class="ot">&lt;-</span> <span class="fu">lapply</span>(myDF, regress)</span>
<span id="cb186-3"><a href="functional-programming.html#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(myRegs)</span>
<span id="cb186-4"><a href="functional-programming.html#cb186-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 100</span></span>
<span id="cb186-5"><a href="functional-programming.html#cb186-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(myRegs[[<span class="dv">1</span>]])</span>
<span id="cb186-6"><a href="functional-programming.html#cb186-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;lm&quot;</span></span>
<span id="cb186-7"><a href="functional-programming.html#cb186-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(myRegs[[<span class="dv">12</span>]])</span>
<span id="cb186-8"><a href="functional-programming.html#cb186-8" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb186-9"><a href="functional-programming.html#cb186-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Call:</span></span>
<span id="cb186-10"><a href="functional-programming.html#cb186-10" aria-hidden="true" tabindex="-1"></a><span class="do">## lm(formula = y ~ 1)</span></span>
<span id="cb186-11"><a href="functional-programming.html#cb186-11" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb186-12"><a href="functional-programming.html#cb186-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Residuals:</span></span>
<span id="cb186-13"><a href="functional-programming.html#cb186-13" aria-hidden="true" tabindex="-1"></a><span class="do">##     Min      1Q  Median      3Q     Max </span></span>
<span id="cb186-14"><a href="functional-programming.html#cb186-14" aria-hidden="true" tabindex="-1"></a><span class="do">## -1.4981 -0.6023 -0.2952  0.4766  1.8411 </span></span>
<span id="cb186-15"><a href="functional-programming.html#cb186-15" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb186-16"><a href="functional-programming.html#cb186-16" aria-hidden="true" tabindex="-1"></a><span class="do">## Coefficients:</span></span>
<span id="cb186-17"><a href="functional-programming.html#cb186-17" aria-hidden="true" tabindex="-1"></a><span class="do">##             Estimate Std. Error t value Pr(&gt;|t|)</span></span>
<span id="cb186-18"><a href="functional-programming.html#cb186-18" aria-hidden="true" tabindex="-1"></a><span class="do">## (Intercept)  -0.1565     0.3278  -0.477    0.644</span></span>
<span id="cb186-19"><a href="functional-programming.html#cb186-19" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb186-20"><a href="functional-programming.html#cb186-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Residual standard error: 1.037 on 9 degrees of freedom</span></span></code></pre></div>
<p>I use <code>sapply</code> and <code>lapply</code> the most, personally. The next most common function I use is <code>apply</code>. I use it to apply functions to <em>rows</em> instead of columns, although, it can also apply functions over columns, just as the other functions we discussed can.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="functional-programming.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(myDF)</span>
<span id="cb187-2"><a href="functional-programming.html#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  10 100</span></span>
<span id="cb187-3"><a href="functional-programming.html#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(myDF, <span class="dv">1</span>, mean)</span>
<span id="cb187-4"><a href="functional-programming.html#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] -0.02844857  0.03432364  0.08382327  0.19122755 -0.01740320 -0.04212675  0.05733915 -0.10417475 -0.04773444</span></span>
<span id="cb187-5"><a href="functional-programming.html#cb187-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] -0.11698402</span></span></code></pre></div>
<p><code>tapply</code> can be very handy when you need it. First, we’ve alluded to the definition before in TODO, but a <strong>ragged array</strong> is a collection of arrays that all have potentially different lengths. I don’t typically construct such an object and then pass it to <code>tapply</code>. Rather, I let <code>tapply</code> construct the ragged array for me. The first argument it expects is “typically vector-like,” while the second tells us how to break that <code>vector</code> into chunks. The third argument is a function that gets applied to each <code>vector</code> chunk.</p>
<p>If I wanted the average home price for each city, I could use something like this.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="functional-programming.html#cb188-1" aria-hidden="true" tabindex="-1"></a>albRealEstate <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/albemarle_real_estate.csv&quot;</span>)</span>
<span id="cb188-2"><a href="functional-programming.html#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(albRealEstate)</span>
<span id="cb188-3"><a href="functional-programming.html#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   YearBuilt YearRemodeled Condition NumStories FinSqFt Bedroom FullBath HalfBath TotalRooms LotSize TotalValue</span></span>
<span id="cb188-4"><a href="functional-programming.html#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      2006             0   Average       1.00    1922       3        3        0         10   5.000     409900</span></span>
<span id="cb188-5"><a href="functional-programming.html#cb188-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      2003             0   Average       1.00    1848       3        2        0          7  61.189     523100</span></span>
<span id="cb188-6"><a href="functional-programming.html#cb188-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      1972             0   Average       1.00    1248       2        1        0          4   1.760     180900</span></span>
<span id="cb188-7"><a href="functional-programming.html#cb188-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      1998             0      Good       1.00    1244       1        1        0          3  50.648     620700</span></span>
<span id="cb188-8"><a href="functional-programming.html#cb188-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5      1886             0   Average       1.86    1861       4        1        0          6   3.880     162500</span></span>
<span id="cb188-9"><a href="functional-programming.html#cb188-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6      1910             0      Fair       1.53    1108       3        1        0          6   8.838     167200</span></span>
<span id="cb188-10"><a href="functional-programming.html#cb188-10" aria-hidden="true" tabindex="-1"></a><span class="do">##          City</span></span>
<span id="cb188-11"><a href="functional-programming.html#cb188-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      CROZET</span></span>
<span id="cb188-12"><a href="functional-programming.html#cb188-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      CROZET</span></span>
<span id="cb188-13"><a href="functional-programming.html#cb188-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 EARLYSVILLE</span></span>
<span id="cb188-14"><a href="functional-programming.html#cb188-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      CROZET</span></span>
<span id="cb188-15"><a href="functional-programming.html#cb188-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 5      CROZET</span></span>
<span id="cb188-16"><a href="functional-programming.html#cb188-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 6      CROZET</span></span>
<span id="cb188-17"><a href="functional-programming.html#cb188-17" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(albRealEstate<span class="sc">$</span>City)</span>
<span id="cb188-18"><a href="functional-programming.html#cb188-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;CROZET&quot;          &quot;EARLYSVILLE&quot;     &quot;CHARLOTTESVILLE&quot; &quot;SCOTTSVILLE&quot;     &quot;NORTH GARDEN&quot;    &quot;KESWICK&quot;</span></span>
<span id="cb188-19"><a href="functional-programming.html#cb188-19" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(albRealEstate<span class="sc">$</span>TotalValue, <span class="fu">list</span>(albRealEstate<span class="sc">$</span>City), mean)</span>
<span id="cb188-20"><a href="functional-programming.html#cb188-20" aria-hidden="true" tabindex="-1"></a><span class="do">## CHARLOTTESVILLE          CROZET     EARLYSVILLE         KESWICK    NORTH GARDEN     SCOTTSVILLE </span></span>
<span id="cb188-21"><a href="functional-programming.html#cb188-21" aria-hidden="true" tabindex="-1"></a><span class="do">##        381933.0        380425.7        439141.0        540532.6        366597.8        268407.4</span></span></code></pre></div>
<p>You might be wondering why we put <code>albRealEstate$City</code> into a <code>list</code>. That seems kind of unnecessary. This is because <code>tapply</code> can be used with multiple <code>factor</code>s–this will break down the <code>vector</code> input into a finer partition. The second argument must be one object, though, so all of these <code>factor</code>s must be collected into a <code>list</code>. The following code produces a “pivot table.”</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="functional-programming.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(albRealEstate<span class="sc">$</span>TotalValue, <span class="fu">list</span>(albRealEstate<span class="sc">$</span>City, albRealEstate<span class="sc">$</span>Condition), mean)</span>
<span id="cb189-2"><a href="functional-programming.html#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="do">##                  Average Excellent     Fair     Good      Poor Substandard</span></span>
<span id="cb189-3"><a href="functional-programming.html#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="do">## CHARLOTTESVILLE 337913.4  491702.4 229336.2 444325.5 202420.00      457500</span></span>
<span id="cb189-4"><a href="functional-programming.html#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="do">## CROZET          342133.4  552081.6 198009.5 390657.7 203806.25       53450</span></span>
<span id="cb189-5"><a href="functional-programming.html#cb189-5" aria-hidden="true" tabindex="-1"></a><span class="do">## EARLYSVILLE     365990.6  652387.4 230646.2 470554.7 372442.86      160400</span></span>
<span id="cb189-6"><a href="functional-programming.html#cb189-6" aria-hidden="true" tabindex="-1"></a><span class="do">## KESWICK         392998.6  871719.8 172790.9 672510.7 100337.50          NA</span></span>
<span id="cb189-7"><a href="functional-programming.html#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="do">## NORTH GARDEN    241187.7  966528.6 131997.0 440503.1 151187.50          NA</span></span>
<span id="cb189-8"><a href="functional-programming.html#cb189-8" aria-hidden="true" tabindex="-1"></a><span class="do">## SCOTTSVILLE     214046.9  502273.8 157438.0 374600.4  95377.78          NA</span></span></code></pre></div>
<div class="rmd-details">
<p>
For functions that return higher-dimensional output, you will have to use something like <code>by</code> or <code>aggregate</code> in place of <code>tapply</code>.
</p>
</div>
<p>The <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/mapply.html">documentation of <code>mapply</code></a> states <code>mapply</code> is a multivariate version of <code>sapply</code>. <code>sapply</code> worked with univariate functions: the function was called multiple times, but each time with a single argument. If you have a function that takes multiple arguments, and you want those arguments to change each time the function is called, then you might be able to use <code>mapply</code>.</p>
<p>Here is a short example. Regarding the <code>n=</code> argument of <code>rnorm</code>, the documentation explains, “[i]f <code>length(n) &gt; 1</code>, the length is taken to be the number required.” This would be a problem if we want to sample a.) three times from a mean <span class="math inline">\(0\)</span> normal, b.) twice from a mean <span class="math inline">\(100\)</span> normal, and c.) once from a mean <span class="math inline">\(-100\)</span> normal distribution.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="functional-programming.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="at">n =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>), <span class="at">mean =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="sc">-</span><span class="dv">100</span>), <span class="at">sd =</span> <span class="fu">c</span>(.<span class="dv">01</span>, .<span class="dv">01</span>, .<span class="dv">01</span>))</span></code></pre></div>
<pre><code>## [1]    0.01110882  100.00341417 -100.00127857</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="functional-programming.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(rnorm, <span class="at">n =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>), <span class="at">mean =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="sc">-</span><span class="dv">100</span>), <span class="at">sd =</span> <span class="fu">c</span>(.<span class="dv">01</span>, .<span class="dv">01</span>, .<span class="dv">01</span>))</span></code></pre></div>
<pre><code>## [[1]]
## [1]  0.001423347  0.006750018 -0.004550915
## 
## [[2]]
## [1] 99.96786 99.99925
## 
## [[3]]
## [1] -100.0084</code></pre>
<p>I conclude by mentioning <code>Reduce</code>. Instead of applying a unary function to consecutive elements, it applies a binary function to elements. <code>Reduce</code>’s function argument gets called on the first two elements, then on the first output and the third element, then on the second output and fourth element, and so on. Here is an initial example.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="functional-programming.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb194-2"><a href="functional-programming.html#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6</span></span>
<span id="cb194-3"><a href="functional-programming.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Reduce</span>(sum, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb194-4"><a href="functional-programming.html#cb194-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6</span></span></code></pre></div>
<p>You can make the examples more interesting by making the binary function more complicated, or by changing the data structures. For instance, I often use <code>Reduce</code> for combining many data sets.</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="functional-programming.html#cb195-1" aria-hidden="true" tabindex="-1"></a>myVecs <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="cf">function</span>(num) <span class="fu">matrix</span>(<span class="fu">rep</span>(num,<span class="dv">4</span>), <span class="at">ncol=</span><span class="dv">1</span>))</span>
<span id="cb195-2"><a href="functional-programming.html#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Reduce</span>(cbind, myVecs)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## [1,]    1    2    3    4    5    6    7    8    9    10
## [2,]    1    2    3    4    5    6    7    8    9    10
## [3,]    1    2    3    4    5    6    7    8    9    10
## [4,]    1    2    3    4    5    6    7    8    9    10</code></pre>
<p><code>Filter</code> is useful with <strong>predicate functions.</strong> Predicate functions return a boolean. Repeatedly calling a predicate on different inputs of any container can be done as follows.</p>
<p>TODO</p>
</div>
<div id="another-example-in-r" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Another Example in R</h2>
<p>Consider another less contrived example. Suppose we want to plot a bivariate Gaussian distribution.</p>
<p><span class="math display">\[
f(x,y) = \frac{1}{2 \pi}  \exp\left[ -\frac{x ^2 + y^2}{2}     \right]
\]</span>
The random elements <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>, in this particular case, are uncorrelated, each have unit variance, and zero mean. This density is a surface in 3-d dimensional space. To visualize this, we would need to</p>
<ol style="list-style-type: decimal">
<li>generate a “grid” of points in <span class="math inline">\(\mathbb{R}^2\)</span>,</li>
<li>evaluate our function on each point, and then</li>
<li>call some plotting function that takes this all and makes a pretty picture.</li>
</ol>
<p>There are a couple ways you could write this function. One way might take two arguments, and another might take one argument. If we are to use <code>mapply</code>, we need the function to take two arguments.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="functional-programming.html#cb197-1" aria-hidden="true" tabindex="-1"></a>fTwoArgs <span class="ot">&lt;-</span> <span class="cf">function</span>(x,y){</span>
<span id="cb197-2"><a href="functional-programming.html#cb197-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">exp</span>(<span class="sc">-</span>.<span class="dv">5</span><span class="sc">*</span>(x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> y<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">/</span> <span class="dv">2</span> <span class="sc">/</span> pi</span>
<span id="cb197-3"><a href="functional-programming.html#cb197-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can construct every possible point on a grid with the <code>expand.grid</code> function.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="functional-programming.html#cb198-1" aria-hidden="true" tabindex="-1"></a>xGrid <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="dv">3</span>,.<span class="dv">1</span>)</span>
<span id="cb198-2"><a href="functional-programming.html#cb198-2" aria-hidden="true" tabindex="-1"></a>yGrid <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">3</span>,<span class="dv">3</span>,.<span class="dv">1</span>)</span>
<span id="cb198-3"><a href="functional-programming.html#cb198-3" aria-hidden="true" tabindex="-1"></a>grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(xGrid, yGrid)</span>
<span id="cb198-4"><a href="functional-programming.html#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(grid)</span>
<span id="cb198-5"><a href="functional-programming.html#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   Var1 Var2</span></span>
<span id="cb198-6"><a href="functional-programming.html#cb198-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 -3.0   -3</span></span>
<span id="cb198-7"><a href="functional-programming.html#cb198-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 -2.9   -3</span></span>
<span id="cb198-8"><a href="functional-programming.html#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 -2.8   -3</span></span>
<span id="cb198-9"><a href="functional-programming.html#cb198-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 -2.7   -3</span></span>
<span id="cb198-10"><a href="functional-programming.html#cb198-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 -2.6   -3</span></span>
<span id="cb198-11"><a href="functional-programming.html#cb198-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 -2.5   -3</span></span></code></pre></div>
<p><code>mapply</code> would take <code>fTwoArgs</code>, and effectively call it on every row pair. The pairs do not need to be organized in a <code>data.frame</code>, though.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="functional-programming.html#cb199-1" aria-hidden="true" tabindex="-1"></a>funcOut1 <span class="ot">&lt;-</span> <span class="fu">mapply</span>(fTwoArgs, grid[,<span class="dv">1</span>], grid[,<span class="dv">2</span>])</span>
<span id="cb199-2"><a href="functional-programming.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(funcOut1)</span>
<span id="cb199-3"><a href="functional-programming.html#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1.964128e-05 2.638072e-05 3.508008e-05 4.618400e-05 6.019766e-05 7.768277e-05</span></span>
<span id="cb199-4"><a href="functional-programming.html#cb199-4" aria-hidden="true" tabindex="-1"></a>rectangularOutput <span class="ot">&lt;-</span> <span class="fu">matrix</span>(funcOut1, <span class="at">ncol =</span> <span class="fu">length</span>(xGrid))</span>
<span id="cb199-5"><a href="functional-programming.html#cb199-5" aria-hidden="true" tabindex="-1"></a><span class="fu">persp</span>(xGrid, yGrid, rectangularOutput, </span>
<span id="cb199-6"><a href="functional-programming.html#cb199-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">zlab =</span> <span class="st">&quot;f(x,y)&quot;</span>, <span class="at">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-217-1.png" width="672" /></p>
<p>If you prefer using <code>apply</code>, that is also possible, but you would need to rewrite the function to take one (length-two) argument.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="functional-programming.html#cb200-1" aria-hidden="true" tabindex="-1"></a>fOneArg <span class="ot">&lt;-</span> <span class="cf">function</span>(vec){</span>
<span id="cb200-2"><a href="functional-programming.html#cb200-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">exp</span>(<span class="sc">-</span><span class="fu">sum</span>(vec<span class="sc">^</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">2</span><span class="sc">/</span>pi</span>
<span id="cb200-3"><a href="functional-programming.html#cb200-3" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb200-4"><a href="functional-programming.html#cb200-4" aria-hidden="true" tabindex="-1"></a>funcOut2 <span class="ot">&lt;-</span> <span class="fu">apply</span>(grid, <span class="dv">1</span>, fOneArg)</span>
<span id="cb200-5"><a href="functional-programming.html#cb200-5" aria-hidden="true" tabindex="-1"></a>moreRectOut <span class="ot">&lt;-</span> <span class="fu">matrix</span>(funcOut2, <span class="at">ncol =</span> <span class="fu">length</span>(xGrid))</span>
<span id="cb200-6"><a href="functional-programming.html#cb200-6" aria-hidden="true" tabindex="-1"></a><span class="fu">contour</span>(xGrid, yGrid, moreRectOut, <span class="at">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-218-1.png" width="672" /></p>
</div>
<div id="functions-as-function-inputs-in-base-python" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Functions as Function Inputs in Base Python</h2>
<p>I discuss two functions from base Python that take functions as input. Neither return a <code>list</code> or a <code>np.array</code>, but they do return different kinds of <strong>iterables</strong>, which are “objects capable of returning their members one at a time,” <a href="https://docs.python.org/3/glossary.html">according to the Python documentation.</a> <code>map</code>, the function, will return objects of type <code>map</code>. <code>filter</code>, the function, will return objects of type <code>filter</code>. Often times we will just convert these to the container we are more familiar with.</p>
<div id="map" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> <code>map</code></h3>
<p><a href="https://docs.python.org/3/library/functions.html#map"><code>map</code></a> can call a function repeatedly using elements of a container as inputs. Here is an example of calculating outputs of a <em>spline</em> function, which can be useful for coming up with predictors in regression models. This particular spline function is <span class="math inline">\(f(x) = (x-k)1(x \ge k)\)</span>, where <span class="math inline">\(k\)</span> is some chosen “knot point.”</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb201-1"><a href="functional-programming.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb201-2"><a href="functional-programming.html#cb201-2" aria-hidden="true" tabindex="-1"></a>my_inputs <span class="op">=</span> np.linspace(start <span class="op">=</span> <span class="dv">0</span>, stop <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>np.pi)</span>
<span id="cb201-3"><a href="functional-programming.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> spline(x):</span>
<span id="cb201-4"><a href="functional-programming.html#cb201-4" aria-hidden="true" tabindex="-1"></a>    knot <span class="op">=</span> <span class="fl">3.0</span></span>
<span id="cb201-5"><a href="functional-programming.html#cb201-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> x <span class="op">&gt;=</span> knot:</span>
<span id="cb201-6"><a href="functional-programming.html#cb201-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x<span class="op">-</span>knot</span>
<span id="cb201-7"><a href="functional-programming.html#cb201-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb201-8"><a href="functional-programming.html#cb201-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">0.0</span></span>
<span id="cb201-9"><a href="functional-programming.html#cb201-9" aria-hidden="true" tabindex="-1"></a>output <span class="op">=</span> <span class="bu">list</span>(<span class="bu">map</span>(spline, my_inputs))</span></code></pre></div>
<p>We can visualize the mathematical function by plotting its outputs against its inputs. More information on visualization is given in TODO.</p>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-220-1.png" width="70%" /></p>
<p><code>map</code> can also be used like <code>mapply</code>. In other words, you can apply it to two containers,</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb202-1"><a href="functional-programming.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb202-2"><a href="functional-programming.html#cb202-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(start <span class="op">=</span> <span class="op">-</span><span class="fl">1.</span>, stop <span class="op">=</span> <span class="fl">1.0</span>)</span>
<span id="cb202-3"><a href="functional-programming.html#cb202-3" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.linspace(start <span class="op">=</span> <span class="op">-</span><span class="fl">1.</span>, stop <span class="op">=</span> <span class="fl">1.0</span>)</span>
<span id="cb202-4"><a href="functional-programming.html#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(x):</span>
<span id="cb202-5"><a href="functional-programming.html#cb202-5" aria-hidden="true" tabindex="-1"></a>    np.log(x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> y<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb202-6"><a href="functional-programming.html#cb202-6" aria-hidden="true" tabindex="-1"></a>output <span class="op">=</span> <span class="bu">list</span>(<span class="bu">map</span>(spline, my_inputs))</span></code></pre></div>
</div>
<div id="filter" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> <code>filter</code></h3>
<p><a href="https://docs.python.org/3/library/functions.html#filter"><code>filter</code></a> is very similar to R’s <code>Filter</code>. It returns an iterable of type <code>filter</code>.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb203-1"><a href="functional-programming.html#cb203-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="op">=</span> np.arange(<span class="dv">0</span>,<span class="fl">1.5</span>,<span class="fl">.01</span>)</span>
<span id="cb203-2"><a href="functional-programming.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> elem <span class="kw">in</span> <span class="bu">filter</span>(<span class="kw">lambda</span> x : x<span class="op">**</span><span class="dv">2</span> <span class="op">&gt;</span> <span class="dv">2</span>, raw_data):</span>
<span id="cb203-3"><a href="functional-programming.html#cb203-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(elem)</span>
<span id="cb203-4"><a href="functional-programming.html#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 1.42</span></span>
<span id="cb203-5"><a href="functional-programming.html#cb203-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 1.43</span></span>
<span id="cb203-6"><a href="functional-programming.html#cb203-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 1.44</span></span>
<span id="cb203-7"><a href="functional-programming.html#cb203-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 1.45</span></span>
<span id="cb203-8"><a href="functional-programming.html#cb203-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 1.46</span></span>
<span id="cb203-9"><a href="functional-programming.html#cb203-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 1.47</span></span>
<span id="cb203-10"><a href="functional-programming.html#cb203-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 1.48</span></span>
<span id="cb203-11"><a href="functional-programming.html#cb203-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 1.49</span></span></code></pre></div>
<p>This function is also similar to <code>which</code> in <code>R</code>. The only difference is that <code>which</code> does not accept a function, just a <code>logical vector</code>.</p>
</div>
</div>
<div id="selected-numpy-functionals" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Selected Numpy Functionals</h2>
<p>Numpy provides a <a href="https://numpy.org/doc/stable/reference/routines.functional.html">number of functions</a> that facilitate working with <code>np.ndarray</code>s in a functional style. For example, <a href="https://numpy.org/doc/stable/reference/generated/numpy.apply_along_axis.html"><code>np.apply_along_axis</code></a> is similar to R’s <code>apply</code>. <code>apply</code> had a <code>MARGIN</code> argument (<code>1</code> sums rows, <code>2</code> sums columns), whereas this function has a <code>axis=</code> argument (<code>0</code> sums columns, <code>1</code> sums rows).</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb204-1"><a href="functional-programming.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb204-2"><a href="functional-programming.html#cb204-2" aria-hidden="true" tabindex="-1"></a>my_array <span class="op">=</span> np.arange(<span class="dv">6</span>).reshape((<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb204-3"><a href="functional-programming.html#cb204-3" aria-hidden="true" tabindex="-1"></a>my_array</span>
<span id="cb204-4"><a href="functional-programming.html#cb204-4" aria-hidden="true" tabindex="-1"></a><span class="co">## array([[0, 1, 2],</span></span>
<span id="cb204-5"><a href="functional-programming.html#cb204-5" aria-hidden="true" tabindex="-1"></a><span class="co">##        [3, 4, 5]])</span></span>
<span id="cb204-6"><a href="functional-programming.html#cb204-6" aria-hidden="true" tabindex="-1"></a>np.apply_along_axis(<span class="bu">sum</span>, <span class="dv">0</span>, my_array) <span class="co"># summing columns</span></span>
<span id="cb204-7"><a href="functional-programming.html#cb204-7" aria-hidden="true" tabindex="-1"></a><span class="co">## array([3, 5, 7])</span></span>
<span id="cb204-8"><a href="functional-programming.html#cb204-8" aria-hidden="true" tabindex="-1"></a>np.apply_along_axis(<span class="bu">sum</span>, <span class="dv">1</span>, my_array) <span class="co"># summing rows</span></span>
<span id="cb204-9"><a href="functional-programming.html#cb204-9" aria-hidden="true" tabindex="-1"></a><span class="co">## array([ 3, 12])</span></span></code></pre></div>
<div class="sourceCode" id="cb205"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb205-1"><a href="functional-programming.html#cb205-1" aria-hidden="true" tabindex="-1"></a>my_array <span class="op">=</span> np.random.normal(size<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">1000</span>))</span>
<span id="cb205-2"><a href="functional-programming.html#cb205-2" aria-hidden="true" tabindex="-1"></a>np.apply_along_axis(<span class="bu">sum</span>, <span class="dv">0</span>, my_array).shape </span>
<span id="cb205-3"><a href="functional-programming.html#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="co">## (1000,)</span></span>
<span id="cb205-4"><a href="functional-programming.html#cb205-4" aria-hidden="true" tabindex="-1"></a>np.apply_along_axis(<span class="bu">sum</span>, <span class="dv">1</span>, my_array).shape</span>
<span id="cb205-5"><a href="functional-programming.html#cb205-5" aria-hidden="true" tabindex="-1"></a><span class="co">## (10,)</span></span></code></pre></div>
</div>
<div id="functional-methods-in-pandas" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Functional Methods in Pandas</h2>
<p>Pandas <code>DataFrame</code>s have an <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html"><code>.apply</code> method</a> that is very similar to <code>apply</code> in R,<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a> but again, just like the above function, you have to think about an <code>axis=</code> argument instead of a <code>MARGIN=</code> argument.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb206-1"><a href="functional-programming.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb206-2"><a href="functional-programming.html#cb206-2" aria-hidden="true" tabindex="-1"></a>alb_real_est <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/albemarle_real_estate.csv&quot;</span>)</span>
<span id="cb206-3"><a href="functional-programming.html#cb206-3" aria-hidden="true" tabindex="-1"></a>alb_real_est.shape</span>
<span id="cb206-4"><a href="functional-programming.html#cb206-4" aria-hidden="true" tabindex="-1"></a><span class="co">## (27943, 12)</span></span>
<span id="cb206-5"><a href="functional-programming.html#cb206-5" aria-hidden="true" tabindex="-1"></a>alb_real_est.<span class="bu">apply</span>(<span class="bu">len</span>, axis<span class="op">=</span><span class="dv">0</span>) <span class="co"># length of columns</span></span>
<span id="cb206-6"><a href="functional-programming.html#cb206-6" aria-hidden="true" tabindex="-1"></a><span class="co">## YearBuilt        27943</span></span>
<span id="cb206-7"><a href="functional-programming.html#cb206-7" aria-hidden="true" tabindex="-1"></a><span class="co">## YearRemodeled    27943</span></span>
<span id="cb206-8"><a href="functional-programming.html#cb206-8" aria-hidden="true" tabindex="-1"></a><span class="co">## Condition        27943</span></span>
<span id="cb206-9"><a href="functional-programming.html#cb206-9" aria-hidden="true" tabindex="-1"></a><span class="co">## NumStories       27943</span></span>
<span id="cb206-10"><a href="functional-programming.html#cb206-10" aria-hidden="true" tabindex="-1"></a><span class="co">## FinSqFt          27943</span></span>
<span id="cb206-11"><a href="functional-programming.html#cb206-11" aria-hidden="true" tabindex="-1"></a><span class="co">## Bedroom          27943</span></span>
<span id="cb206-12"><a href="functional-programming.html#cb206-12" aria-hidden="true" tabindex="-1"></a><span class="co">## FullBath         27943</span></span>
<span id="cb206-13"><a href="functional-programming.html#cb206-13" aria-hidden="true" tabindex="-1"></a><span class="co">## HalfBath         27943</span></span>
<span id="cb206-14"><a href="functional-programming.html#cb206-14" aria-hidden="true" tabindex="-1"></a><span class="co">## TotalRooms       27943</span></span>
<span id="cb206-15"><a href="functional-programming.html#cb206-15" aria-hidden="true" tabindex="-1"></a><span class="co">## LotSize          27943</span></span>
<span id="cb206-16"><a href="functional-programming.html#cb206-16" aria-hidden="true" tabindex="-1"></a><span class="co">## TotalValue       27943</span></span>
<span id="cb206-17"><a href="functional-programming.html#cb206-17" aria-hidden="true" tabindex="-1"></a><span class="co">## City             27943</span></span>
<span id="cb206-18"><a href="functional-programming.html#cb206-18" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb206-19"><a href="functional-programming.html#cb206-19" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(alb_real_est.<span class="bu">apply</span>(<span class="bu">len</span>, axis<span class="op">=</span><span class="dv">1</span>)) <span class="co"># length of rows</span></span>
<span id="cb206-20"><a href="functional-programming.html#cb206-20" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;class &#39;pandas.core.series.Series&#39;&gt;</span></span></code></pre></div>
<p>Another thing to keep in mind is that <code>DataFrame</code>s, unlike <code>ndarray</code>s, don’t have to have the same type for all elements. If you have mixed column types, then summing rows, for instance, might not make sense. This just requires subsetting columns before <code>.apply</code>ing a function to rows. Here is an example of computing each property’s “score.”</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb207-1"><a href="functional-programming.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb207-2"><a href="functional-programming.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="co"># alb_real_est.apply(sum, axis=1) # can&#39;t add letters to numbers!</span></span>
<span id="cb207-3"><a href="functional-programming.html#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_prop_score(row):</span>
<span id="cb207-4"><a href="functional-programming.html#cb207-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">2</span><span class="op">*</span>row[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">3</span><span class="op">*</span>row[<span class="dv">1</span>]</span>
<span id="cb207-5"><a href="functional-programming.html#cb207-5" aria-hidden="true" tabindex="-1"></a>alb_real_est[<span class="st">&#39;Score&#39;</span>] <span class="op">=</span> alb_real_est[[<span class="st">&#39;FinSqFt&#39;</span>,<span class="st">&#39;LotSize&#39;</span>]].<span class="bu">apply</span>(get_prop_score, <span class="dv">1</span>)</span>
<span id="cb207-6"><a href="functional-programming.html#cb207-6" aria-hidden="true" tabindex="-1"></a>alb_real_est[[<span class="st">&#39;FinSqFt&#39;</span>,<span class="st">&#39;LotSize&#39;</span>,<span class="st">&#39;Score&#39;</span>]].head(<span class="dv">2</span>)</span>
<span id="cb207-7"><a href="functional-programming.html#cb207-7" aria-hidden="true" tabindex="-1"></a><span class="co">##    FinSqFt  LotSize     Score</span></span>
<span id="cb207-8"><a href="functional-programming.html#cb207-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 0     1922    5.000  3859.000</span></span>
<span id="cb207-9"><a href="functional-programming.html#cb207-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 1     1848   61.189  3879.567</span></span></code></pre></div>
<p><code>.apply</code> also works with more than one function at a time.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb208-1"><a href="functional-programming.html#cb208-1" aria-hidden="true" tabindex="-1"></a>alb_real_est[[<span class="st">&#39;FinSqFt&#39;</span>,<span class="st">&#39;LotSize&#39;</span>]].<span class="bu">apply</span>([<span class="bu">sum</span>, <span class="bu">len</span>])</span>
<span id="cb208-2"><a href="functional-programming.html#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="co">##       FinSqFt     LotSize</span></span>
<span id="cb208-3"><a href="functional-programming.html#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="co">## sum  55559801  97856.8384</span></span>
<span id="cb208-4"><a href="functional-programming.html#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="co">## len     27943  27943.0000</span></span></code></pre></div>
<p>If you do not want to waste two lines defining a function with <code>def</code>, you can use an anonymous (unnamed) <a href="https://docs.python.org/3/tutorial/controlflow.html#lambda-expressions"><strong>lambda function</strong></a>. Be careful, though–if your function is complex enough, then your lines will get quite wide. For instance, this example is pushing it.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb209-1"><a href="functional-programming.html#cb209-1" aria-hidden="true" tabindex="-1"></a>alb_real_est[[<span class="st">&#39;FinSqFt&#39;</span>,<span class="st">&#39;LotSize&#39;</span>]].<span class="bu">apply</span>(<span class="kw">lambda</span> row : <span class="bu">sum</span>(row<span class="op">*</span>[<span class="dv">2</span>,<span class="dv">3</span>]), <span class="dv">1</span>)[:<span class="dv">4</span>]</span>
<span id="cb209-2"><a href="functional-programming.html#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    3859.000</span></span>
<span id="cb209-3"><a href="functional-programming.html#cb209-3" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    3879.567</span></span>
<span id="cb209-4"><a href="functional-programming.html#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    2501.280</span></span>
<span id="cb209-5"><a href="functional-programming.html#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 3    2639.944</span></span>
<span id="cb209-6"><a href="functional-programming.html#cb209-6" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: float64</span></span></code></pre></div>
<p>If you want to apply a (scalar-valued) function that takes only individual elements, you should try to use a unary function (recall that this was discussed in TODO). If no such unary function exists, you can apply it with <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap"><code>.applymap</code></a>.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb210-1"><a href="functional-programming.html#cb210-1" aria-hidden="true" tabindex="-1"></a>alb_real_est[[<span class="st">&#39;FinSqFt&#39;</span>,<span class="st">&#39;LotSize&#39;</span>]].applymap(<span class="kw">lambda</span> e : e <span class="op">+</span> <span class="dv">1</span>).head(<span class="dv">2</span>)</span>
<span id="cb210-2"><a href="functional-programming.html#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="co">##    FinSqFt  LotSize</span></span>
<span id="cb210-3"><a href="functional-programming.html#cb210-3" aria-hidden="true" tabindex="-1"></a><span class="co">## 0     1923    6.000</span></span>
<span id="cb210-4"><a href="functional-programming.html#cb210-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 1     1849   62.189</span></span></code></pre></div>
<p>Last, we have a <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html"><code>.groupby</code></a> method, which can be used to mirror the behavior of R’s <code>tapply</code>, <code>aggregate</code> or <code>by</code>. It can take the <code>DataFrame</code> it belongs to, and group its rows into multiple sub-<code>DataFrame</code>s. The collection of sub-<code>DataFrames</code> has a lot of the same methods that an individual <code>DataFrame</code> has (e.g. the subsetting operators, and the <code>.apply</code> method), which can all be used in a second step of calculating things on each sub-<code>DataFrame</code>.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb211-1"><a href="functional-programming.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(alb_real_est.groupby([<span class="st">&#39;City&#39;</span>]))</span>
<span id="cb211-2"><a href="functional-programming.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="co">## pandas.core.groupby.generic.DataFrameGroupBy</span></span>
<span id="cb211-3"><a href="functional-programming.html#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(alb_real_est.groupby([<span class="st">&#39;City&#39;</span>])[<span class="st">&#39;TotalValue&#39;</span>])</span>
<span id="cb211-4"><a href="functional-programming.html#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="co">## pandas.core.groupby.generic.SeriesGroupBy</span></span></code></pre></div>
<p>Here is an example that models some pretty typical functionality. It shows two ways to get the average home price by city. The first line groups the rows by which <code>City</code> they are in, extracts the <code>TotalValue</code> column in each sub-<code>DataFrame</code>, and then <code>.apply</code>s the <code>np.average</code> function on the sole column found in each sub-<code>DataFrame</code>. The second applys a lambda function to each sub-<code>DataFrame</code> directly.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb212-1"><a href="functional-programming.html#cb212-1" aria-hidden="true" tabindex="-1"></a>alb_real_est.groupby([<span class="st">&#39;City&#39;</span>])[<span class="st">&#39;TotalValue&#39;</span>].<span class="bu">apply</span>(np.average)</span>
<span id="cb212-2"><a href="functional-programming.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="co">## City</span></span>
<span id="cb212-3"><a href="functional-programming.html#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="co">## CHARLOTTESVILLE    381932.962760</span></span>
<span id="cb212-4"><a href="functional-programming.html#cb212-4" aria-hidden="true" tabindex="-1"></a><span class="co">## CROZET             380425.678927</span></span>
<span id="cb212-5"><a href="functional-programming.html#cb212-5" aria-hidden="true" tabindex="-1"></a><span class="co">## EARLYSVILLE        439140.987124</span></span>
<span id="cb212-6"><a href="functional-programming.html#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="co">## KESWICK            540532.605905</span></span>
<span id="cb212-7"><a href="functional-programming.html#cb212-7" aria-hidden="true" tabindex="-1"></a><span class="co">## NORTH GARDEN       366597.750865</span></span>
<span id="cb212-8"><a href="functional-programming.html#cb212-8" aria-hidden="true" tabindex="-1"></a><span class="co">## SCOTTSVILLE        268407.384615</span></span>
<span id="cb212-9"><a href="functional-programming.html#cb212-9" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: TotalValue, dtype: float64</span></span>
<span id="cb212-10"><a href="functional-programming.html#cb212-10" aria-hidden="true" tabindex="-1"></a>alb_real_est.groupby([<span class="st">&#39;City&#39;</span>]).<span class="bu">apply</span>(<span class="kw">lambda</span> df : np.average(df[<span class="st">&#39;TotalValue&#39;</span>]))</span>
<span id="cb212-11"><a href="functional-programming.html#cb212-11" aria-hidden="true" tabindex="-1"></a><span class="co">## City</span></span>
<span id="cb212-12"><a href="functional-programming.html#cb212-12" aria-hidden="true" tabindex="-1"></a><span class="co">## CHARLOTTESVILLE    381932.962760</span></span>
<span id="cb212-13"><a href="functional-programming.html#cb212-13" aria-hidden="true" tabindex="-1"></a><span class="co">## CROZET             380425.678927</span></span>
<span id="cb212-14"><a href="functional-programming.html#cb212-14" aria-hidden="true" tabindex="-1"></a><span class="co">## EARLYSVILLE        439140.987124</span></span>
<span id="cb212-15"><a href="functional-programming.html#cb212-15" aria-hidden="true" tabindex="-1"></a><span class="co">## KESWICK            540532.605905</span></span>
<span id="cb212-16"><a href="functional-programming.html#cb212-16" aria-hidden="true" tabindex="-1"></a><span class="co">## NORTH GARDEN       366597.750865</span></span>
<span id="cb212-17"><a href="functional-programming.html#cb212-17" aria-hidden="true" tabindex="-1"></a><span class="co">## SCOTTSVILLE        268407.384615</span></span>
<span id="cb212-18"><a href="functional-programming.html#cb212-18" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: float64</span></span></code></pre></div>
<p>More tips on this programming pattern can be found <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/groupby.html">here</a>.</p>
</div>
<div id="functions-as-function-outputs-in-r" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Functions as Function Outputs in R</h2>
<p>Functions that create and return other functions are sometimes called <strong>function factories.</strong> Functions are first class objects in R, so it’s easy to return them. What’s more interesting is that supposedly temporary objects inside the outer function can be accessed during the call of the inner function after it’s returned.</p>
<p>Here is a first quick example.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="functional-programming.html#cb213-1" aria-hidden="true" tabindex="-1"></a>funcFactory <span class="ot">&lt;-</span> <span class="cf">function</span>(greetingMessage){</span>
<span id="cb213-2"><a href="functional-programming.html#cb213-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(name){</span>
<span id="cb213-3"><a href="functional-programming.html#cb213-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(greetingMessage, name)</span>
<span id="cb213-4"><a href="functional-programming.html#cb213-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb213-5"><a href="functional-programming.html#cb213-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb213-6"><a href="functional-programming.html#cb213-6" aria-hidden="true" tabindex="-1"></a>greetWithHello <span class="ot">&lt;-</span> <span class="fu">funcFactory</span>(<span class="st">&quot;Hello&quot;</span>)</span>
<span id="cb213-7"><a href="functional-programming.html#cb213-7" aria-hidden="true" tabindex="-1"></a><span class="fu">greetWithHello</span>(<span class="st">&quot;Taylor&quot;</span>)</span>
<span id="cb213-8"><a href="functional-programming.html#cb213-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Hello Taylor&quot;</span></span>
<span id="cb213-9"><a href="functional-programming.html#cb213-9" aria-hidden="true" tabindex="-1"></a><span class="fu">greetWithHello</span>(<span class="st">&quot;Charlie&quot;</span>)</span>
<span id="cb213-10"><a href="functional-programming.html#cb213-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Hello Charlie&quot;</span></span></code></pre></div>
<p>The <code>greetingMessage</code> argument that is passed in, <code>"Hello"</code>, isn’t temporary anymore.</p>
<p>Here is an example that implements a variance reduction technique called <strong>common random numbers</strong>.</p>
<p>Suppose <span class="math inline">\(X \sim \text{Normal}(\mu, \sigma^2)\)</span>, and we are interested in approximating an expectation of a function of this random variable. Suppose that we don’t know that
<span class="math display">\[
\mathbb{E}[\sin(X)] = \sin(\mu) \exp\left(-\frac{\sigma^2}{2}\right)
\]</span>
for any particular choice of <span class="math inline">\(\mu\)</span> and <span class="math inline">\(\sigma^2\)</span>, and instead, we choose to use the Monte Carlo method:
<span class="math display">\[
\hat{\mathbb{E}}[\sin(X)] = \frac{1}{n}\sum_{i=1}^n\sin(X^i)
\]</span>
where <span class="math inline">\(X^1, \ldots, X^n \overset{\text{iid}}{\sim} \text{Normal}(\mu, \sigma^2)\)</span> is a large collection of draws from the appropriate normal distribution. In real life, the theoretical expectation might not be tractable (either because the random variable has a complicated distribution, or maybe because the functional is very complicated) and Monte Carlo, or some other approximation algorithm, might be our only hope!</p>
<p>Here are two functions that calculate the above quantities for <span class="math inline">\(n=100\)</span>. <code>actualExpectSin</code> is a function that computes the theoretical expectation for any particular parameter pair. <code>monteCarloSin</code> is a function that implements the Monte Carlo approximate expectation.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="functional-programming.html#cb214-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span> <span class="co"># don&#39;t hardcode variables that aren&#39;t passed as arguments!</span></span>
<span id="cb214-2"><a href="functional-programming.html#cb214-2" aria-hidden="true" tabindex="-1"></a>actualExpectSin <span class="ot">&lt;-</span> <span class="cf">function</span>(params){</span>
<span id="cb214-3"><a href="functional-programming.html#cb214-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(params[<span class="dv">2</span>] <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="co"># second parameter is sigma</span></span>
<span id="cb214-4"><a href="functional-programming.html#cb214-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sin</span>(params[<span class="dv">1</span>])<span class="sc">*</span><span class="fu">exp</span>(<span class="sc">-</span>.<span class="dv">5</span><span class="sc">*</span>(params[<span class="dv">2</span>]<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb214-5"><a href="functional-programming.html#cb214-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb214-6"><a href="functional-programming.html#cb214-6" aria-hidden="true" tabindex="-1"></a>monteCarloSin <span class="ot">&lt;-</span> <span class="cf">function</span>(params){</span>
<span id="cb214-7"><a href="functional-programming.html#cb214-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(params[<span class="dv">2</span>] <span class="sc">&gt;</span> <span class="dv">0</span>) </span>
<span id="cb214-8"><a href="functional-programming.html#cb214-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="fu">sin</span>(<span class="fu">rnorm</span>(<span class="at">n =</span> n, <span class="at">mean =</span> params[<span class="dv">1</span>], <span class="at">sd =</span> params[<span class="dv">2</span>])))</span>
<span id="cb214-9"><a href="functional-programming.html#cb214-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb214-10"><a href="functional-programming.html#cb214-10" aria-hidden="true" tabindex="-1"></a><span class="co"># monteCarloSin(c(10,1))</span></span></code></pre></div>
<p>One-off approximations aren’t as interesting as visualizing many expectations for many parameter inputs. On the left, we have the true expectation function plotted with a contour plot. On the right,</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="functional-programming.html#cb215-1" aria-hidden="true" tabindex="-1"></a>muGrid <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">10</span>,<span class="dv">10</span>, <span class="at">length.out =</span> <span class="dv">100</span>)</span>
<span id="cb215-2"><a href="functional-programming.html#cb215-2" aria-hidden="true" tabindex="-1"></a>sigmaGrid <span class="ot">&lt;-</span> <span class="fu">seq</span>(.<span class="dv">001</span>, <span class="dv">5</span>, <span class="at">length.out =</span> <span class="dv">100</span>)</span>
<span id="cb215-3"><a href="functional-programming.html#cb215-3" aria-hidden="true" tabindex="-1"></a>muSigmaGrid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(muGrid, sigmaGrid)</span>
<span id="cb215-4"><a href="functional-programming.html#cb215-4" aria-hidden="true" tabindex="-1"></a>actuals <span class="ot">&lt;-</span>  <span class="fu">matrix</span>(<span class="fu">apply</span>(muSigmaGrid, <span class="dv">1</span>, actualExpectSin), <span class="at">ncol =</span> <span class="fu">length</span>(muGrid))</span>
<span id="cb215-5"><a href="functional-programming.html#cb215-5" aria-hidden="true" tabindex="-1"></a>mcApprox <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">apply</span>(muSigmaGrid, <span class="dv">1</span>, monteCarloSin), <span class="at">ncol =</span> <span class="fu">length</span>(muGrid))</span>
<span id="cb215-6"><a href="functional-programming.html#cb215-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-7"><a href="functional-programming.html#cb215-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb215-8"><a href="functional-programming.html#cb215-8" aria-hidden="true" tabindex="-1"></a><span class="fu">contour</span>(muGrid, sigmaGrid, actuals, <span class="at">xlab =</span> <span class="st">&quot;mu&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;sigma&quot;</span>, <span class="at">main =</span> <span class="st">&quot;actual expect.s&quot;</span>)</span>
<span id="cb215-9"><a href="functional-programming.html#cb215-9" aria-hidden="true" tabindex="-1"></a><span class="fu">contour</span>(muGrid, sigmaGrid, mcApprox, <span class="at">xlab =</span> <span class="st">&quot;mu&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;sigma&quot;</span>, <span class="at">main =</span> <span class="st">&quot;mc without crn&quot;</span>)</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-234-1.png" width="672" /></p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="functional-programming.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<p>If we wanted to use common random numbers, we could generate <span class="math inline">\(Z^1, \ldots, Z^n \overset{\text{iid}}{\sim} \text{Normal}(0, 1)\)</span>, and use the fact that
<span class="math display">\[
X^i = \mu + \sigma Z^i
\]</span>
This leads to the Monte Carlo estimate
<span class="math display">\[
\tilde{\mathbb{E}}[\sin(X)] = \frac{1}{n}\sum_{i=1}^n\sin(\mu + \sigma Z^i)
\]</span>
Here is one function that naively implements Monte Carlo with common random numbers. We generate the collection of standard normal random variates once, globally. Each time you call <code>monteCarloSinCRNv1(c(10,1))</code>, you get the same answer.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="functional-programming.html#cb217-1" aria-hidden="true" tabindex="-1"></a>commonZs <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n=</span>n)</span>
<span id="cb217-2"><a href="functional-programming.html#cb217-2" aria-hidden="true" tabindex="-1"></a>monteCarloSinCRNv1 <span class="ot">&lt;-</span> <span class="cf">function</span>(params){</span>
<span id="cb217-3"><a href="functional-programming.html#cb217-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(params[<span class="dv">2</span>] <span class="sc">&gt;</span> <span class="dv">0</span>) </span>
<span id="cb217-4"><a href="functional-programming.html#cb217-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="fu">sin</span>(params[<span class="dv">1</span>] <span class="sc">+</span> params[<span class="dv">2</span>]<span class="sc">*</span>commonZs))</span>
<span id="cb217-5"><a href="functional-programming.html#cb217-5" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb217-6"><a href="functional-programming.html#cb217-6" aria-hidden="true" tabindex="-1"></a><span class="co"># monteCarloSinCRNv1(c(10,1))</span></span></code></pre></div>
<p>Let’s compare using common random numbers to going without. As you can see, common random numbers make the plot look “smoother.”</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="functional-programming.html#cb218-1" aria-hidden="true" tabindex="-1"></a>mcApproxCRNv1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">apply</span>(muSigmaGrid, <span class="dv">1</span>, monteCarloSinCRNv1), <span class="at">ncol =</span> <span class="fu">length</span>(muGrid))</span>
<span id="cb218-2"><a href="functional-programming.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb218-3"><a href="functional-programming.html#cb218-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contour</span>(muGrid, sigmaGrid, mcApprox, <span class="at">xlab =</span> <span class="st">&quot;mu&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;sigma&quot;</span>, <span class="at">main =</span> <span class="st">&quot;mc without crn&quot;</span>)</span>
<span id="cb218-4"><a href="functional-programming.html#cb218-4" aria-hidden="true" tabindex="-1"></a><span class="fu">contour</span>(muGrid, sigmaGrid, mcApproxCRNv1, <span class="at">xlab =</span> <span class="st">&quot;mu&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;sigma&quot;</span>, <span class="at">main =</span> <span class="st">&quot;mc with crn&quot;</span>)</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-236-1.png" width="672" /></p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="functional-programming.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<p>The downside to this implementation is that we have a bunch of samples floating around in the global environment. We can implement this much more nicely with a function factory.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="functional-programming.html#cb220-1" aria-hidden="true" tabindex="-1"></a>makeMCFunc <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb220-2"><a href="functional-programming.html#cb220-2" aria-hidden="true" tabindex="-1"></a>  commonZs <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="at">n=</span>n)</span>
<span id="cb220-3"><a href="functional-programming.html#cb220-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(params){</span>
<span id="cb220-4"><a href="functional-programming.html#cb220-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stopifnot</span>(params[<span class="dv">2</span>] <span class="sc">&gt;</span> <span class="dv">0</span>) </span>
<span id="cb220-5"><a href="functional-programming.html#cb220-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(<span class="fu">sin</span>(params[<span class="dv">1</span>] <span class="sc">+</span> params[<span class="dv">2</span>]<span class="sc">*</span>commonZs))    </span>
<span id="cb220-6"><a href="functional-programming.html#cb220-6" aria-hidden="true" tabindex="-1"></a>  }  </span>
<span id="cb220-7"><a href="functional-programming.html#cb220-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb220-8"><a href="functional-programming.html#cb220-8" aria-hidden="true" tabindex="-1"></a>monteCarloSinCRNv2 <span class="ot">&lt;-</span> <span class="fu">makeMCFunc</span>()</span>
<span id="cb220-9"><a href="functional-programming.html#cb220-9" aria-hidden="true" tabindex="-1"></a><span class="co"># monteCarloSinCRNv2(c(10,1))</span></span></code></pre></div>
<p>Much better! Let’s just make sure this function works by comparing its output to the known true function.</p>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-238-1.png" width="672" /></p>
</div>
<div id="functions-as-function-outputs-in-python" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> Functions as Function Outputs in Python</h2>
<p>Returning functions from functions, explaining mechanics</p>
<p><a href="https://numpy.org/doc/stable/reference/generated/numpy.vectorize.html#numpy.vectorize"><code>np.vectorize</code></a> is something that I use quite often.</p>
<p>decorators!</p>
<p>TODO Both R and Python have reduce functions. R has <code>Reduce</code>, while Python has <code>reduce</code>.</p>
<p>In R</p>
<p>reduce,</p>
<div id="exercises-5" class="section level3" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>Let <span class="math inline">\(X_t\)</span> be the price of a stock at time <span class="math inline">\(t\)</span>. A <em>call (or put) option</em> is a type of derivative contract you can buy or sell. It’s called a derivative because its value derives from the value of a stock. A single call contract (or put) gives the owner the right to buy (or sell) stock (<span class="math inline">\(100\)</span> shares) at a certain price. This certain price written into an options contract (<span class="math inline">\(s\)</span>) is called the <em>strike price</em>. The day the option expires is called the <em>expiration date</em>. If a holder of the option uses his/her right to buy or sell the underlying stock, he/she is said to have <em>exercised</em> the option.</li>
</ol>
<p>The price and value of options floats around randomly through time just like a stock does. Part of the value of an option is its <em>intrinsic value</em>. It is not the same as the overall value of an option, or its “fair price”–rather, the intrinsic value represents how much money its possible to guarantee at the current moment, if you exercised the option, and then liquidated the resulting position in the underlying.</p>
<p>For example, call owners hope the stock rises above the strike price so that they can buy the stock for a low price, and immediately sell it for a high price. If <span class="math inline">\(X_t &gt; s\)</span>, they could buy at <span class="math inline">\(s\)</span>, and sell at <span class="math inline">\(X_t\)</span>. In other words, the intrinsic value of a call option is</p>
<p><span class="math display">\[
C^s_t = 100 \times \max(X_t - s, 0)
\]</span>
as long as <span class="math inline">\(t\)</span> is before the expiration date. If <span class="math inline">\(X_t &lt; s\)</span>, then the owner doesn’t have to buy the stock, so the call at that time is intrinsically worthless.</p>
<p>Put owners hope the stock price falls below the strike price, because a put’s intrinsic value is</p>
<p><span class="math display">\[
P^s_t = 100 \times \max(s - X_t, 0)
\]</span></p>
<p>Sometimes people buy and sell multiple contracts (with the same expiration date) at the same time. If they do, the intrinsic value of the entire position is additive. For example, if you bought two of the same put option as the one above, then you just double the above expression to get the intrinsic value.</p>
<p>As another example, if you buy (you can also sell) a <em>call spread</em>, you buy one call, and then sell another call with the same expiration and a higher strike price. Assuming <span class="math inline">\(s_1 &lt; s_2\)</span> the intrinsic value is of the call spread with strikes <span class="math inline">\(s_1\)</span> and <span class="math inline">\(s_2\)</span> is
<span class="math display">\[
100 \times \max(X_t - s_1, 0) - 100\times\max(X_t - s_2, 0)
\]</span></p>
<ol style="list-style-type: lower-alpha">
<li>In R, write a function called <code>getIntrinsicValueFunc</code> that takes three vectors as arguments, (<code>dirs</code>, <code>strikes</code>, <code>contractType</code>, <code>numContracts</code>), and returns a function. These arguments should all be the same length. The length of these inputs is the number of contracts in an options position. The function that <code>getIntrinsicValueFunc</code> returns should only take one argument: <code>prices</code>, a vector of prices of the underlying stock. The function that <code>getIntrinsicValueFunc</code> should return a vector of intrinsic values over time.</li>
</ol>
<p>Because the arguments may only take on certain values, and because the function to be returned has a certain signature, a template has been provided below.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="functional-programming.html#cb221-1" aria-hidden="true" tabindex="-1"></a>getIntrinsicValueFunc <span class="ot">&lt;-</span><span class="cf">function</span>(dirs, strikes, contractType, numContracts){</span>
<span id="cb221-2"><a href="functional-programming.html#cb221-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">all</span>(dirs <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;buy&quot;</span>, <span class="st">&quot;sell&quot;</span>)))</span>
<span id="cb221-3"><a href="functional-programming.html#cb221-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">all</span>(contractType <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;call&quot;</span>, <span class="st">&quot;put&quot;</span>)))</span>
<span id="cb221-4"><a href="functional-programming.html#cb221-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">all</span>(<span class="fu">is.integer</span>(strikes)))</span>
<span id="cb221-5"><a href="functional-programming.html#cb221-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(<span class="fu">all</span>(<span class="fu">is.integer</span>(numContracts)))</span>
<span id="cb221-6"><a href="functional-programming.html#cb221-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>( (<span class="fu">length</span>(dirs) <span class="sc">==</span> <span class="fu">length</span>(strikes)) <span class="sc">&amp;&amp;</span> (<span class="fu">length</span>(dirs) <span class="sc">==</span> <span class="fu">length</span>(contractType)))</span>
<span id="cb221-7"><a href="functional-programming.html#cb221-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb221-8"><a href="functional-programming.html#cb221-8" aria-hidden="true" tabindex="-1"></a>  usefulFunc <span class="ot">&lt;-</span> <span class="cf">function</span>(prices){</span>
<span id="cb221-9"><a href="functional-programming.html#cb221-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span><span class="al">TODO</span></span>
<span id="cb221-10"><a href="functional-programming.html#cb221-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb221-11"><a href="functional-programming.html#cb221-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(usefulFunc)</span>
<span id="cb221-12"><a href="functional-programming.html#cb221-12" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<ol start="2" style="list-style-type: lower-alpha">
<li><p>Create an intrinsic value plot. The x-axis should be a grid of values: let’s say from <span class="math inline">\(100\)</span> to <span class="math inline">\(200\)</span>. On the y-axis plot the intrinsic value of buying a call spread with strikes <span class="math inline">\(110\)</span> and <span class="math inline">\(120\)</span>.</p></li>
<li><p>Do the same thing as above but show what happens when you sell the same call spread.</p></li>
<li><p>Plot the intrinsic value of a bought put spread with strikes <span class="math inline">\(110\)</span> and <span class="math inline">\(120\)</span>.</p></li>
<li><p>Plot the intrinsic value of a sold put spread with strikes <span class="math inline">\(110\)</span> and <span class="math inline">\(120\)</span>. What is the difference between all four plots?</p></li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>Do the same thing, but in Python!</li>
</ol>
<p>creating row masks in a data frame</p>
<p>.apply with weird predicate function</p>
<p>Optimization example</p>
<p>Importance sampling example</p>
<p>bootstrap</p>
<p>numerical integration</p>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
Abelson, Harold, and Gerald J. Sussman. 1996. <em>Structure and Interpretation of Computer Programs</em>. 2nd ed. Cambridge, MA, USA: MIT Press.
</div>
<div class="csl-entry">
Brown, Taylor. 2021. <em>cPseudoMaRg: Constructs a Correlated Pseudo-Marginal Sampler</em>. <a href="https://CRAN.R-project.org/package=cPseudoMaRg">https://CRAN.R-project.org/package=cPseudoMaRg</a>.
</div>
<div class="csl-entry">
Harris, Charles R., K. Jarrod Millman, Stéfan J. van der Walt, Ralf Gommers, Pauli Virtanen, David Cournapeau, Eric Wieser, et al. 2020. <span>“Array Programming with <span>NumPy</span>.”</span> <em>Nature</em> 585 (7825): 357–62. <a href="https://doi.org/10.1038/s41586-020-2649-2">https://doi.org/10.1038/s41586-020-2649-2</a>.
</div>
<div class="csl-entry">
Hunter, J. D. 2007. <span>“Matplotlib: A 2d Graphics Environment.”</span> <em>Computing in Science &amp; Engineering</em> 9 (3): 90–95. <a href="https://doi.org/10.1109/MCSE.2007.55">https://doi.org/10.1109/MCSE.2007.55</a>.
</div>
<div class="csl-entry">
Matloff, Norman. 2011. <em>The Art of r Programming: A Tour of Statistical Software Design</em>. 1st ed. USA: No Starch Press.
</div>
<div class="csl-entry">
Robert, Christian P., and George Casella. 2005. <em>Monte Carlo Statistical Methods (Springer Texts in Statistics)</em>. Berlin, Heidelberg: Springer-Verlag.
</div>
<div class="csl-entry">
VanderPlas, Jake. 2016. <em>Python Data Science Handbook: Essential Tools for Working with Data</em>. 1st ed. O’Reilly Media, Inc.
</div>
<div class="csl-entry">
Wickham, Hadley. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div class="csl-entry">
Wilkinson, Leland. 2005. <em>The Grammar of Graphics (Statistics and Computing)</em>. Berlin, Heidelberg: Springer-Verlag.
</div>
</div>
</div>
</div>
</div>
























<div class="footnotes">
<hr />
<ol start="19">
<li id="fn19"><p>You should know that a lot of special-case functions that you typically apply to rows or columns come built-in as <code>DataFrame</code> methods. For instance, <code>.mean</code> would allow you to do something like <code>my_df.mean()</code>.<a href="functional-programming.html#fnref19" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="an-introduction-to-object-oriented-programming.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tbrown122387/r_and_python_book/edit/master/05-functional_programming.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["r_and_python_book.pdf", "r_and_python_book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
