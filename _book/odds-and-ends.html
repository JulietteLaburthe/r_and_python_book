<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Odds and Ends | An Introduction to R and Python For Data Analysis: A Side By Side Approach</title>
  <meta name="description" content="Chapter 3 Odds and Ends | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Odds and Ends | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="tbrown122387/r_and_python_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Odds and Ends | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  
  
  

<meta name="author" content="Taylor R. Brown" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-types.html"/>
<link rel="next" href="an-introduction-to-object-oriented-programming.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction to R and Python For Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-sample-course"><i class="fa fa-check"></i>A Sample Course</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#become-a-contributor"><i class="fa fa-check"></i>Become a Contributor</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licenses"><i class="fa fa-check"></i>License(s)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#about-this-book"><i class="fa fa-check"></i>About this book</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-the-required-software"><i class="fa fa-check"></i>Installing the Required Software</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-r-and-rstudio"><i class="fa fa-check"></i>Installing R (and RStudio)</a></li>
<li class="chapter" data-level="0.0.1" data-path="preface.html"><a href="preface.html#installing-python-by-installing-anaconda"><i class="fa fa-check"></i><b>0.0.1</b> Installing Python by Installing Anaconda {-}</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#hello-world-in-r"><i class="fa fa-check"></i><b>1.1</b> Hello World in R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#hello-world-in-python"><i class="fa fa-check"></i><b>1.2</b> Hello World in Python</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#getting-help"><i class="fa fa-check"></i><b>1.3</b> Getting Help</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#reading-documentation"><i class="fa fa-check"></i><b>1.3.1</b> Reading Documentation</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#understanding-file-paths"><i class="fa fa-check"></i><b>1.3.2</b> Understanding File Paths</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>2</b> Data Types</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-types.html"><a href="data-types.html#basic-types"><i class="fa fa-check"></i><b>2.1</b> Basic Types</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-types.html"><a href="data-types.html#in-python-1"><i class="fa fa-check"></i><b>2.1.1</b> In Python</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-types.html"><a href="data-types.html#in-r-1"><i class="fa fa-check"></i><b>2.1.2</b> In R</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-types.html"><a href="data-types.html#exercises"><i class="fa fa-check"></i><b>2.1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-types.html"><a href="data-types.html#r-vectors-versus-numpy-arrays-and-pandas-series"><i class="fa fa-check"></i><b>2.2</b> R vectors versus Numpy <code>array</code>s (and pandas’ <code>Series</code>)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-types.html"><a href="data-types.html#overview-of-r"><i class="fa fa-check"></i><b>2.2.1</b> Overview of R</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-types.html"><a href="data-types.html#overview-of-python"><i class="fa fa-check"></i><b>2.2.2</b> Overview of Python</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-types.html"><a href="data-types.html#vectorization-in-r"><i class="fa fa-check"></i><b>2.2.3</b> Vectorization in R</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-types.html"><a href="data-types.html#vectorization-in-python"><i class="fa fa-check"></i><b>2.2.4</b> Vectorization in Python</a></li>
<li class="chapter" data-level="2.2.5" data-path="data-types.html"><a href="data-types.html#indexing-vectors-in-r"><i class="fa fa-check"></i><b>2.2.5</b> Indexing <code>vector</code>s in R</a></li>
<li class="chapter" data-level="2.2.6" data-path="data-types.html"><a href="data-types.html#indexing-numpy-arrays"><i class="fa fa-check"></i><b>2.2.6</b> Indexing Numpy arrays</a></li>
<li class="chapter" data-level="2.2.7" data-path="data-types.html"><a href="data-types.html#indexing-pandas-series"><i class="fa fa-check"></i><b>2.2.7</b> Indexing pandas’ Series</a></li>
<li class="chapter" data-level="2.2.8" data-path="data-types.html"><a href="data-types.html#some-gotchas"><i class="fa fa-check"></i><b>2.2.8</b> Some Gotchas</a></li>
<li class="chapter" data-level="2.2.9" data-path="data-types.html"><a href="data-types.html#how-do-r-and-python-handle-missing-values"><i class="fa fa-check"></i><b>2.2.9</b> How do R and Python handle missing values?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-types.html"><a href="data-types.html#numpys-ndarrays-versus-rs-matrices-and-arrays"><i class="fa fa-check"></i><b>2.3</b> Numpy’s <code>ndarray</code>s versus R’s matrices and arrays</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-types.html"><a href="data-types.html#numpy-ndarrays-in-python"><i class="fa fa-check"></i><b>2.3.1</b> Numpy <code>ndarray</code>s In Python</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-types.html"><a href="data-types.html#the-matrix-and-array-classes-in-r"><i class="fa fa-check"></i><b>2.3.2</b> The <code>matrix</code> and <code>array</code> classes in R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-types.html"><a href="data-types.html#rs-lists-versus-pythons-lists-and-dictionaries"><i class="fa fa-check"></i><b>2.4</b> R’s lists versus Python’s lists and dictionaries</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-types.html"><a href="data-types.html#lists-in-r"><i class="fa fa-check"></i><b>2.4.1</b> Lists In R</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-types.html"><a href="data-types.html#lists-in-python"><i class="fa fa-check"></i><b>2.4.2</b> Lists In Python</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-types.html"><a href="data-types.html#dictionaries-in-python"><i class="fa fa-check"></i><b>2.4.3</b> Dictionaries In Python</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-types.html"><a href="data-types.html#user-defined-functions-in-r-and-python"><i class="fa fa-check"></i><b>2.5</b> User-defined functions in R and Python</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-types.html"><a href="data-types.html#defining-r-functions"><i class="fa fa-check"></i><b>2.5.1</b> Defining R Functions</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-types.html"><a href="data-types.html#defining-python-functions"><i class="fa fa-check"></i><b>2.5.2</b> Defining Python Functions</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-types.html"><a href="data-types.html#more-details-on-rs-user-defined-functions"><i class="fa fa-check"></i><b>2.5.3</b> More details on R’s user-defined functions</a></li>
<li class="chapter" data-level="2.5.4" data-path="data-types.html"><a href="data-types.html#more-details-on-pythons-user-defined-functions"><i class="fa fa-check"></i><b>2.5.4</b> More details on Python’s user-defined functions</a></li>
<li class="chapter" data-level="2.5.5" data-path="data-types.html"><a href="data-types.html#function-scope-in-r"><i class="fa fa-check"></i><b>2.5.5</b> Function Scope in R</a></li>
<li class="chapter" data-level="2.5.6" data-path="data-types.html"><a href="data-types.html#function-scope-in-python"><i class="fa fa-check"></i><b>2.5.6</b> Function Scope in Python</a></li>
<li class="chapter" data-level="2.5.7" data-path="data-types.html"><a href="data-types.html#modifying-a-functions-arguments"><i class="fa fa-check"></i><b>2.5.7</b> Modifying a Function’s Arguments</a></li>
<li class="chapter" data-level="2.5.8" data-path="data-types.html"><a href="data-types.html#accessing-and-modifying-non-local-variables"><i class="fa fa-check"></i><b>2.5.8</b> Accessing and Modifying Non-Local Variables</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data-types.html"><a href="data-types.html#categorical-data"><i class="fa fa-check"></i><b>2.6</b> Categorical Data</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data-types.html"><a href="data-types.html#categorical-data-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Categorical Data in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="data-types.html"><a href="data-types.html#categorical-data-in-python"><i class="fa fa-check"></i><b>2.6.2</b> Categorical Data in Python</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data-types.html"><a href="data-types.html#data-frames"><i class="fa fa-check"></i><b>2.7</b> Data Frames</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="data-types.html"><a href="data-types.html#data-frames-in-r"><i class="fa fa-check"></i><b>2.7.1</b> Data Frames in R</a></li>
<li class="chapter" data-level="2.7.2" data-path="data-types.html"><a href="data-types.html#data-frames-in-python"><i class="fa fa-check"></i><b>2.7.2</b> Data Frames in Python</a></li>
<li class="chapter" data-level="2.7.3" data-path="data-types.html"><a href="data-types.html#row-names-and-indexes"><i class="fa fa-check"></i><b>2.7.3</b> Row Names and Indexes</a></li>
<li class="chapter" data-level="2.7.4" data-path="data-types.html"><a href="data-types.html#getting-versus-setting"><i class="fa fa-check"></i><b>2.7.4</b> Getting Versus Setting</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="data-types.html"><a href="data-types.html#exercises-1"><i class="fa fa-check"></i><b>2.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="odds-and-ends.html"><a href="odds-and-ends.html"><i class="fa fa-check"></i><b>3</b> Odds and Ends</a>
<ul>
<li class="chapter" data-level="3.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#input-and-output"><i class="fa fa-check"></i><b>3.1</b> Input and Output</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#general-input-considerations"><i class="fa fa-check"></i><b>3.1.1</b> General Input Considerations</a></li>
<li class="chapter" data-level="3.1.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#reading-in-text-files-with-r"><i class="fa fa-check"></i><b>3.1.2</b> Reading in Text Files with R</a></li>
<li class="chapter" data-level="3.1.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#reading-in-text-files-with-python"><i class="fa fa-check"></i><b>3.1.3</b> Reading in Text Files with Python</a></li>
<li class="chapter" data-level="3.1.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#output"><i class="fa fa-check"></i><b>3.1.4</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#using-third-party-code"><i class="fa fa-check"></i><b>3.2</b> Using Third-Party Code</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#installing-packages-in-r"><i class="fa fa-check"></i><b>3.2.1</b> Installing Packages In R</a></li>
<li class="chapter" data-level="3.2.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#installing-packages-in-python"><i class="fa fa-check"></i><b>3.2.2</b> Installing Packages In Python</a></li>
<li class="chapter" data-level="3.2.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loading-packages-in-r"><i class="fa fa-check"></i><b>3.2.3</b> Loading Packages In R</a></li>
<li class="chapter" data-level="3.2.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loading-packages-in-python"><i class="fa fa-check"></i><b>3.2.4</b> Loading Packages In Python</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#control-flow"><i class="fa fa-check"></i><b>3.3</b> Control Flow</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#conditional-logic"><i class="fa fa-check"></i><b>3.3.1</b> Conditional Logic</a></li>
<li class="chapter" data-level="3.3.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loops"><i class="fa fa-check"></i><b>3.3.2</b> Loops</a></li>
<li class="chapter" data-level="3.3.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#a-longer-example"><i class="fa fa-check"></i><b>3.3.3</b> A Longer Example</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#reshaping-and-combining-data-sets"><i class="fa fa-check"></i><b>3.4</b> Reshaping and Combining Data Sets</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#ordering-and-sorting-data"><i class="fa fa-check"></i><b>3.4.1</b> Ordering and Sorting Data</a></li>
<li class="chapter" data-level="3.4.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#stacking-data-sets-and-placing-them-shoulder-to-shoulder"><i class="fa fa-check"></i><b>3.4.2</b> Stacking Data Sets and Placing them Shoulder to Shoulder</a></li>
<li class="chapter" data-level="3.4.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#merging-or-joining-data-sets"><i class="fa fa-check"></i><b>3.4.3</b> Merging or Joining Data Sets</a></li>
<li class="chapter" data-level="3.4.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#long-versus-wide-data"><i class="fa fa-check"></i><b>3.4.4</b> Long Versus Wide Data</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="odds-and-ends.html"><a href="odds-and-ends.html#visualization"><i class="fa fa-check"></i><b>3.5</b> Visualization</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#base-r-plotting"><i class="fa fa-check"></i><b>3.5.1</b> Base R Plotting</a></li>
<li class="chapter" data-level="3.5.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#plotting-with-ggplot2"><i class="fa fa-check"></i><b>3.5.2</b> Plotting with <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.5.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#plotting-with-matplotlib"><i class="fa fa-check"></i><b>3.5.3</b> Plotting with Matplotlib</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="odds-and-ends.html"><a href="odds-and-ends.html#working-with-text-data"><i class="fa fa-check"></i><b>3.6</b> Working With Text Data</a></li>
<li class="chapter" data-level="3.7" data-path="odds-and-ends.html"><a href="odds-and-ends.html#working-with-dates-and-times"><i class="fa fa-check"></i><b>3.7</b> Working With Dates and Times</a></li>
<li class="chapter" data-level="3.8" data-path="odds-and-ends.html"><a href="odds-and-ends.html#running-scripts-from-the-command-line"><i class="fa fa-check"></i><b>3.8</b> Running Scripts from the Command Line</a></li>
<li class="chapter" data-level="3.9" data-path="odds-and-ends.html"><a href="odds-and-ends.html#exercises-2"><i class="fa fa-check"></i><b>3.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html"><i class="fa fa-check"></i><b>4</b> An Introduction to Object-Oriented Programming</a>
<ul>
<li class="chapter" data-level="4.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#oop-in-python"><i class="fa fa-check"></i><b>4.1</b> OOP In Python</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#overview"><i class="fa fa-check"></i><b>4.1.1</b> Overview</a></li>
<li class="chapter" data-level="4.1.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#a-first-example"><i class="fa fa-check"></i><b>4.1.2</b> A First Example</a></li>
<li class="chapter" data-level="4.1.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#adding-inheritance"><i class="fa fa-check"></i><b>4.1.3</b> Adding Inheritance</a></li>
<li class="chapter" data-level="4.1.4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#adding-in-composition"><i class="fa fa-check"></i><b>4.1.4</b> Adding in Composition</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#oop-in-r"><i class="fa fa-check"></i><b>4.2</b> OOP In R</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#s3-objects-the-big-picture"><i class="fa fa-check"></i><b>4.2.1</b> S3 objects: The Big Picture</a></li>
<li class="chapter" data-level="4.2.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#using-s3-objects"><i class="fa fa-check"></i><b>4.2.2</b> Using S3 objects</a></li>
<li class="chapter" data-level="4.2.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-s3-objects"><i class="fa fa-check"></i><b>4.2.3</b> Creating S3 objects</a></li>
<li class="chapter" data-level="4.2.4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#s4-objects-the-big-picture"><i class="fa fa-check"></i><b>4.2.4</b> S4 objects: The Big Picture</a></li>
<li class="chapter" data-level="4.2.5" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#using-s4-objects"><i class="fa fa-check"></i><b>4.2.5</b> Using S4 objects</a></li>
<li class="chapter" data-level="4.2.6" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-s4-objects"><i class="fa fa-check"></i><b>4.2.6</b> Creating S4 objects</a></li>
<li class="chapter" data-level="4.2.7" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#reference-classes-the-big-picture"><i class="fa fa-check"></i><b>4.2.7</b> Reference Classes: The Big Picture</a></li>
<li class="chapter" data-level="4.2.8" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-reference-classes"><i class="fa fa-check"></i><b>4.2.8</b> Creating Reference Classes</a></li>
<li class="chapter" data-level="4.2.9" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-r6-classes"><i class="fa fa-check"></i><b>4.2.9</b> Creating R6 Classes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#exercises-3"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functional-programming.html"><a href="functional-programming.html"><i class="fa fa-check"></i><b>5</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-r"><i class="fa fa-check"></i><b>5.1</b> Functions as Function Inputs in R</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="functional-programming.html"><a href="functional-programming.html#sapply-and-vapply"><i class="fa fa-check"></i><b>5.1.1</b> <code>sapply</code> and <code>vapply</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="functional-programming.html"><a href="functional-programming.html#lapply"><i class="fa fa-check"></i><b>5.1.2</b> <code>lapply</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="functional-programming.html"><a href="functional-programming.html#apply"><i class="fa fa-check"></i><b>5.1.3</b> <code>apply</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="functional-programming.html"><a href="functional-programming.html#tapply"><i class="fa fa-check"></i><b>5.1.4</b> <code>tapply</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="functional-programming.html"><a href="functional-programming.html#mapply"><i class="fa fa-check"></i><b>5.1.5</b> <code>mapply</code></a></li>
<li class="chapter" data-level="5.1.6" data-path="functional-programming.html"><a href="functional-programming.html#reduce-and-do.call"><i class="fa fa-check"></i><b>5.1.6</b> <code>Reduce</code> and <code>do.call</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="functional-programming.html"><a href="functional-programming.html#another-example-in-r"><i class="fa fa-check"></i><b>5.2</b> Another Example in R</a></li>
<li class="chapter" data-level="5.3" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-base-python"><i class="fa fa-check"></i><b>5.3</b> Functions as Function Inputs in Base Python</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="functional-programming.html"><a href="functional-programming.html#map"><i class="fa fa-check"></i><b>5.3.1</b> <code>map</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="functional-programming.html"><a href="functional-programming.html#filter"><i class="fa fa-check"></i><b>5.3.2</b> <code>filter</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-numpy"><i class="fa fa-check"></i><b>5.4</b> Functions as Function Inputs in Numpy</a></li>
<li class="chapter" data-level="5.5" data-path="functional-programming.html"><a href="functional-programming.html#functional-methods-in-pandas"><i class="fa fa-check"></i><b>5.5</b> Functional Methods in pandas</a></li>
<li class="chapter" data-level="5.6" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-miscellany"><i class="fa fa-check"></i><b>5.6</b> Functions as Function Inputs (miscellany)</a></li>
<li class="chapter" data-level="5.7" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-outputs-in-r"><i class="fa fa-check"></i><b>5.7</b> Functions as Function Outputs in R</a></li>
<li class="chapter" data-level="5.8" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-outputs-in-python"><i class="fa fa-check"></i><b>5.8</b> Functions as Function Outputs in Python</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="functional-programming.html"><a href="functional-programming.html#exercises-4"><i class="fa fa-check"></i><b>5.8.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R and Python For Data Analysis: A Side By Side Approach</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="odds-and-ends" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Odds and Ends</h1>
<p>TODO, this part organizes its teaching by concepts patterns commonly-found in data science. The components are types, and sometimes involve new functions.</p>
<div id="input-and-output" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Input and Output</h2>
<div id="general-input-considerations" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> General Input Considerations</h3>
<p>So far we have been creating small pieces of data within our scripts. This is primarily for pedagogical purposes. In real life, we can have</p>
<ul>
<li>data read in from a data set saved on our machine’s hard drive (e.g. <code>my_data.csv</code> or <code>log_file.txt</code> ),</li>
<li>data read in from a database (e.g. MySQL, PostgreSQL, etc.), or</li>
<li>data created in a script (either deterministic or random).</li>
</ul>
<p>I focus mostly on the first category in this section. Here are my reasons for doing so:</p>
<ol style="list-style-type: decimal">
<li>text-files are more readily-available to students than databases,</li>
<li>teaching the second category requires teaching SQL, and that would introduce conceptual overlap,</li>
<li>the third category is programmatically self-explanatory.</li>
</ol>
<div class="rmd-details">
<p>
The third reason does not imply data created by code is unimportant. For example, it is the most common approach to create data used in <em>simulation studies.</em> Authors writing statistical papers need to demonstrate that their techniques work on “nice” data: data simulated from a known data-generating process. In a simulation study, unlike in the “real-world,” you have access to the parameters generating your data, and you can examine data that might otherwise be unobserved or hidden. Further, with data from the real-world, there is no guarantee your model correctly matches the true model.
</p>
<p>
Can your code/technique/algorithm, at the very least, obtain parameter estimates that are “in-line” with the parameters your code is using to simulate data? Are forecasts or predictions obtained by your method accurate? These kinds of questions can often only be answered by simulating fake data. Programmatically, simulating data like this largely involves calling functions that we have seen before (e.g. <code>rnorm()</code> in R or <code>np.random.choice()</code> in Python). This may or may not involve setting a pseudorandom number seed, first, for reproducibility.
</p>
<p>
Also, <em>benchmark data sets</em> are often readily available through specialized function calls.
</p>
</div>
<p>Even though this chapter is written to teach you how to read in files into R and Python, you should not expect that you will know how to read in <em>all</em> data sets after reading this section. For both R and Python, there are an enormous amount of functions, different functions have different return types, different functions are suited for different file types, many functions are spread across a plethora of third party libraries, and many of these functions have an enormous amount of arguments. You will probably not be able to memorize everything. In my very humble opinion, I doubt you should want to.</p>
<p>Instead, <strong>focus on developing your ability to identify and diagnose data input problems.</strong> Reading in a data set correctly is often a process of trial-and-error. After attempting to read in a data set, always check the following items. Many of these points were previously mentioned in section @(data-frames-in-r).</p>
<ol style="list-style-type: decimal">
<li><strong>The correct column <em>separator</em> was used, or the correct “fixed-width format” was expected.</strong> If mistakes are made, columns are going to be combined in weird ways, and often the wrong types are going to be used for pieces of data (e.g. <code>"2,3"</code> instead of <code>2</code> and <code>3</code>.) Also, watch out for when separators are found inside data elements or column names. For example, sometimes it’s unclear whether people’s names in the “last, first” format can be stored in one or two columns. Also, text data might surprise you with unexpected spaces or other whitespace is a common separator.</li>
<li><strong>The column names were parsed correctly.</strong> Column names should not be stored as data in R/Python. Functions should not expect column names when they don’t exist in the actual file.</li>
<li><strong>Empty space and metadata was ignored correctly.</strong> Empty space between column names and data shouldn’t be stored. Data descriptions are sometimes stored in the same file as the data itself, and that should be skipped over when it’s being read in. This can occur at the beginning of the file, and even at the end of the file.</li>
<li><strong>Type choice is performed correctly.</strong> Are letters stored as strings or as something else such as an R <code>factor</code>? Are dates and times stored as a special date/time type, or as strings? Is missing data correctly identified? Sometimes data providers use outrageous numbers like <span class="math inline">\(-9999\)</span> to represent missing data–don’t store that as a float or integer!</li>
</ol>
<p>I realize that this is no small task. To make matters worse:</p>
<ul>
<li><p>you can’t edit the raw data to suit your needs, to make it easier to read in. You have to work with what you’re given. If you were allowed to edit, say, a text file you downloaded onto your own machine, you shouldn’t–it will lead to code that doesn’t run anywhere else. If you abuse write privileges on your company’s database, say, well then that’s definitely going to be catastrophic.</p></li>
<li><p>Data sets are often quite large, so manually checking each element is often impossible. In this situation you will have to resign yourself to checking the top and bottom of a data set, or maybe anticipate a specific place where problems are likely to appear.</p></li>
</ul>
</div>
<div id="reading-in-text-files-with-r" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Reading in Text Files with R</h3>
<p>You’ve seen examples of <code>read.csv()</code> used earlier in the book, so it should not surprise you that this is one of the most common ways to read in data in R. Another important function is <code>read.table()</code>. Actually, if you look at the source code for <code>read.csv()</code> (type the name of the function without parentheses into the console and press <Enter>), you will see it calls <code>read.table()</code>. The primary difference between these functions is default arguments. <strong>Mind the default arguments.</strong> Do not be completely averse to writing a long-line of code to read in a data set correctly. Or do, and choose the function with the best default arguments.</p>
<p>Consider the <a href="https://archive.ics.uci.edu/ml/datasets/Challenger+USA+Space+Shuttle+O-Ring">“Challenger USA Space Shuttle O-Ring Data Set”</a> from <span class="citation">(<a href="#ref-uci_data" role="doc-biblioref">Dua and Graff 2017</a>)</span>. The first ten rows looks like this.</p>
<pre><code>6 0 66  50  1
6 1 70  50  2
6 0 69  50  3
6 0 68  50  4
6 0 67  50  5
6 0 72  50  6
6 0 73 100  7
6 0 70 100  8
6 1 57 200  9
6 1 63 200 10</code></pre>
<p>It does not use commas as separators, and there is no header information, so <code>read.csv()</code> used with its default arguments will produce an incorrect result. It will miss the first row by counting it as a column name, and store everything in one column with the wrong type.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="odds-and-ends.html#cb111-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/o-ring-erosion-only.data&quot;</span>)</span>
<span id="cb111-2"><a href="odds-and-ends.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb111-3"><a href="odds-and-ends.html#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   X6.0.66..50..1</span></span>
<span id="cb111-4"><a href="odds-and-ends.html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  6 1 70  50  2</span></span>
<span id="cb111-5"><a href="odds-and-ends.html#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  6 0 69  50  3</span></span>
<span id="cb111-6"><a href="odds-and-ends.html#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  6 0 68  50  4</span></span>
<span id="cb111-7"><a href="odds-and-ends.html#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  6 0 67  50  5</span></span>
<span id="cb111-8"><a href="odds-and-ends.html#cb111-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  6 0 72  50  6</span></span>
<span id="cb111-9"><a href="odds-and-ends.html#cb111-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6  6 0 73 100  7</span></span>
<span id="cb111-10"><a href="odds-and-ends.html#cb111-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(d)</span>
<span id="cb111-11"><a href="odds-and-ends.html#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 22  1</span></span>
<span id="cb111-12"><a href="odds-and-ends.html#cb111-12" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(d[,<span class="dv">1</span>])</span>
<span id="cb111-13"><a href="odds-and-ends.html#cb111-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;character&quot;</span></span></code></pre></div>
<p>Specifying <code>header=FALSE</code> fixes the column name issue, but <code>sep = " "</code> does not fix the separator issue.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="odds-and-ends.html#cb112-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/o-ring-erosion-only.data&quot;</span>, <span class="at">header=</span><span class="cn">FALSE</span>, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>)</span>
<span id="cb112-2"><a href="odds-and-ends.html#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb112-3"><a href="odds-and-ends.html#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   V1 V2 V3 V4 V5 V6 V7</span></span>
<span id="cb112-4"><a href="odds-and-ends.html#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  6  0 66 NA 50 NA  1</span></span>
<span id="cb112-5"><a href="odds-and-ends.html#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  6  1 70 NA 50 NA  2</span></span>
<span id="cb112-6"><a href="odds-and-ends.html#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  6  0 69 NA 50 NA  3</span></span>
<span id="cb112-7"><a href="odds-and-ends.html#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  6  0 68 NA 50 NA  4</span></span>
<span id="cb112-8"><a href="odds-and-ends.html#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  6  0 67 NA 50 NA  5</span></span>
<span id="cb112-9"><a href="odds-and-ends.html#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6  6  0 72 NA 50 NA  6</span></span>
<span id="cb112-10"><a href="odds-and-ends.html#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(d)</span>
<span id="cb112-11"><a href="odds-and-ends.html#cb112-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 23  7</span></span>
<span id="cb112-12"><a href="odds-and-ends.html#cb112-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb112-13"><a href="odds-and-ends.html#cb112-13" aria-hidden="true" tabindex="-1"></a><span class="do">## &#39;data.frame&#39;:    23 obs. of  7 variables:</span></span>
<span id="cb112-14"><a href="odds-and-ends.html#cb112-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V1: int  6 6 6 6 6 6 6 6 6 6 ...</span></span>
<span id="cb112-15"><a href="odds-and-ends.html#cb112-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V2: int  0 1 0 0 0 0 0 0 1 1 ...</span></span>
<span id="cb112-16"><a href="odds-and-ends.html#cb112-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V3: int  66 70 69 68 67 72 73 70 57 63 ...</span></span>
<span id="cb112-17"><a href="odds-and-ends.html#cb112-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V4: int  NA NA NA NA NA NA 100 100 200 200 ...</span></span>
<span id="cb112-18"><a href="odds-and-ends.html#cb112-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V5: int  50 50 50 50 50 50 NA NA NA 10 ...</span></span>
<span id="cb112-19"><a href="odds-and-ends.html#cb112-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V6: int  NA NA NA NA NA NA 7 8 9 NA ...</span></span>
<span id="cb112-20"><a href="odds-and-ends.html#cb112-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V7: int  1 2 3 4 5 6 NA NA NA NA ...</span></span></code></pre></div>
<p>One space is strictly one space. Some rows have two, though. After digging into the documentation a bit further, you will notice that <code>""</code> works for “one or more spaces, tabs, newlines or carriage returns.” This is why <code>read.table()</code>, with its default arguments, works well.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="odds-and-ends.html#cb113-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;data/o-ring-erosion-only.data&quot;</span>)</span>
<span id="cb113-2"><a href="odds-and-ends.html#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span>
<span id="cb113-3"><a href="odds-and-ends.html#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   V1 V2 V3 V4 V5</span></span>
<span id="cb113-4"><a href="odds-and-ends.html#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  6  0 66 50  1</span></span>
<span id="cb113-5"><a href="odds-and-ends.html#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  6  1 70 50  2</span></span>
<span id="cb113-6"><a href="odds-and-ends.html#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  6  0 69 50  3</span></span>
<span id="cb113-7"><a href="odds-and-ends.html#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4  6  0 68 50  4</span></span>
<span id="cb113-8"><a href="odds-and-ends.html#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  6  0 67 50  5</span></span>
<span id="cb113-9"><a href="odds-and-ends.html#cb113-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6  6  0 72 50  6</span></span>
<span id="cb113-10"><a href="odds-and-ends.html#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(d)</span>
<span id="cb113-11"><a href="odds-and-ends.html#cb113-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 23  5</span></span>
<span id="cb113-12"><a href="odds-and-ends.html#cb113-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb113-13"><a href="odds-and-ends.html#cb113-13" aria-hidden="true" tabindex="-1"></a><span class="do">## &#39;data.frame&#39;:    23 obs. of  5 variables:</span></span>
<span id="cb113-14"><a href="odds-and-ends.html#cb113-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V1: int  6 6 6 6 6 6 6 6 6 6 ...</span></span>
<span id="cb113-15"><a href="odds-and-ends.html#cb113-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V2: int  0 1 0 0 0 0 0 0 1 1 ...</span></span>
<span id="cb113-16"><a href="odds-and-ends.html#cb113-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V3: int  66 70 69 68 67 72 73 70 57 63 ...</span></span>
<span id="cb113-17"><a href="odds-and-ends.html#cb113-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V4: int  50 50 50 50 50 50 100 100 200 200 ...</span></span>
<span id="cb113-18"><a href="odds-and-ends.html#cb113-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V5: int  1 2 3 4 5 6 7 8 9 10 ...</span></span></code></pre></div>
<p>This data set has columns whose widths are “fixed,” too. It is in “fixed width format” because any given column has all its elements take up a constant amount of characters. The third column has integers with two or three digits, but no matter what, each row has the same number of characters. The annoying thing about this method, though, is you have to specify what those widths are. This can be quite tedious if your data set has many columns and/or many rows. The upside though, is that the files can be a little bit smaller, because the data provider does not have to waste characters on separators.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="odds-and-ends.html#cb114-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.fwf</span>(<span class="st">&quot;data/o-ring-erosion-only.data&quot;</span>, <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>), <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb114-2"><a href="odds-and-ends.html#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(d)</span>
<span id="cb114-3"><a href="odds-and-ends.html#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="do">## &#39;data.frame&#39;:    23 obs. of  4 variables:</span></span>
<span id="cb114-4"><a href="odds-and-ends.html#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V1: int  6 6 6 6 6 6 6 6 6 6 ...</span></span>
<span id="cb114-5"><a href="odds-and-ends.html#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V2: int  0 1 0 0 0 0 0 0 1 1 ...</span></span>
<span id="cb114-6"><a href="odds-and-ends.html#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V3: int  66 70 69 68 67 72 73 70 57 63 ...</span></span>
<span id="cb114-7"><a href="odds-and-ends.html#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ V4: int  5 5 5 5 5 5 10 10 20 20 ...</span></span></code></pre></div>
</div>
<div id="reading-in-text-files-with-python" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Reading in Text Files with Python</h3>
<p>TODO</p>
</div>
<div id="output" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Output</h3>
<p>After we have created something useful, we might be interested in storing our results. We can write out to a database, a text file, or we can save a digitized version of our work space.</p>
</div>
</div>
<div id="using-third-party-code" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Using Third-Party Code</h2>
<p>Before using third-party code, it must first be installed. After it is installed, it must be “loaded in” to your session. I will describe both of these steps in R and Python.</p>
<div id="installing-packages-in-r" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Installing Packages In R</h3>
<p>In R, there are thousands of user-created <strong>packages.</strong> You can download most of these from the <a href="https://cran.r-project.org/"><em>Comprehensive R Archive Network</em></a>. You can also download packages from other publishing platforms like <a href="https://www.bioconductor.org/">Bioconductor</a>, or <a href="https://github.com/">Github</a>. Installing from CRAN is more commonplace, and extremely easy to do. Just use the <code>install.packages()</code> function. This can be run inside your R console, so there is no need to type things into the command line.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="odds-and-ends.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;thePackage&quot;</span>)</span></code></pre></div>
</div>
<div id="installing-packages-in-python" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Installing Packages In Python</h3>
<p>In Python, installing packages is more complicated. Commands must be written in the command line, and there are multiple package managers. This isn’t surprising, because Python is used more extensively than R in fields other than data science.</p>
<p>If you followed the suggestions provided in <a href="preface.html#installing-python-by-installing-anaconda">0.0.1</a>, then you installed Anaconda. This means you will usually be using the <a href="https://docs.anaconda.com/anaconda/user-guide/tasks/install-packages/"><code>conda</code> command</a>. Point-and-click interfaces are made available as well.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb116-1"><a href="odds-and-ends.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install the_package</span></code></pre></div>
<p>There are some packages that will not be available using this method. For more information on that situation, see <a href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html#install-non-conda-packages">here.</a></p>
</div>
<div id="loading-packages-in-r" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Loading Packages In R</h3>
<p>After they are installed on your machine, third-party code will need to be “loaded” into your R or Python session.</p>
<p>Loading in a package is relatively simple in R, however complications can arise when different variables share the same name. This happens relatively often because</p>
<ul>
<li>it’s easy to create a variable in the global environment that has the same name as another object you don’t know about, and</li>
<li>different packages you load in sometimes share names accidentally.</li>
</ul>
<p>Starting off with the basics, here’s how to load in a package of third-party code. Just type the following into your R console.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="odds-and-ends.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(thePackage)</span></code></pre></div>
<p>You can also use the <code>require()</code> function, which has slightly different behavior when the requested package is not found.</p>
<p>To understand this more deeply, we need to talk about <strong>environments</strong> again. We discussed these before in <a href="data-types.html#more-details-on-rs-user-defined-functions">2.5.3</a>, but only in the context of user-defined functions. When we load in a package with <code>library()</code>, we make its contents available by putting it all in an environment for that package.</p>
<p>An <a href="https://cran.r-project.org/doc/manuals/R-lang.html#Environment-objects">environment</a> holds the names of objects. There are usually several environments, and each holds a different set of functions and variables. All the variables you define are in an environment, every package you load in gets its own environment, and all the functions that come in R pre-loaded have their own environment.</p>
<div class="rmd-details">
<p>
Formally, each environment is pair of two things: a <strong>frame</strong> and an <strong>enclosure</strong>. The frame is the set of symbol-value pairs, and the enclosure is a pointer to the parent environment. If you’ve heard of a <em>linked list</em> in a computer science class, it’s the same thing.
</p>
</div>
<p>Moreover, all of these environments are connected in a chain-like structure. To see what environments are loaded on your machine, and what order they were loaded in, use the <code>search()</code> function. This displays the <a href="https://cran.r-project.org/doc/manuals/R-lang.html#Search-path"><strong>search path</strong></a>, or the ordered sequence of all of your environments.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="odds-and-ends.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>()</span>
<span id="cb118-2"><a href="odds-and-ends.html#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] &quot;.GlobalEnv&quot;         &quot;package:R6&quot;         &quot;package:Matrix&quot;     &quot;package:Hmisc&quot;      &quot;package:ggplot2&quot;   </span></span>
<span id="cb118-3"><a href="odds-and-ends.html#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [6] &quot;package:Formula&quot;    &quot;package:survival&quot;   &quot;package:lattice&quot;    &quot;package:reticulate&quot; &quot;tools:rstudio&quot;     </span></span>
<span id="cb118-4"><a href="odds-and-ends.html#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] &quot;package:stats&quot;      &quot;package:graphics&quot;   &quot;package:grDevices&quot;  &quot;package:utils&quot;      &quot;package:datasets&quot;  </span></span>
<span id="cb118-5"><a href="odds-and-ends.html#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] &quot;package:methods&quot;    &quot;Autoloads&quot;          &quot;package:base&quot;</span></span></code></pre></div>
<p>Alternatively, if you’re using RStudio, the search path, and the contents of each of its environments, are displayed in the “Environment” window. You can choose which environment you’d like to look at by selecting it from the dropdown menu. This allows you to see all of the variables in that particular environment. The <strong>global environment</strong> (i.e. <code>".GlobalEnv"</code>) is displayed by default, because that is where you store all the objects you are creating in the console.</p>
<div class="figure" style="text-align: center">
<img src="pics/environments_display_rstudio.png" alt="The Environment Window in RStudio" width="80%" />
<p class="caption">
(#fig:rstudio_disp)The Environment Window in RStudio
</p>
</div>
<p>When you call <code>library(thePackage)</code>, the package has an environment created for it, and it is <em>inserted between the global environment, and the most recently loaded package.</em> When you want to access an object by name, R will first search the global environment, and then it will traverse the environments in the search path in order. These has a few important implications.</p>
<ul>
<li><p>First, <strong>don’t define variables in the global environment that are already named in another environment.</strong> There are many variables that come pre-loaded in the <code>base</code> package (to see them, type <code>ls("package:base")</code>), and if you like using a lot of packages, you’re increasing the number of names you should avoid using.</p></li>
<li><p>Second, <strong>don’t <code>library</code> in a package unless you need it, and if you do, be aware of all the names it will mask it packages you loaded in before</strong>. The good news is that <code>library</code> will often print warnings letting you know which names have been masked. The bad news is that it’s somewhat out of your control–if you need two packages, then they might have a shared name, and the only thing you can do about it is watch the ordering you load them in.</p></li>
<li><p>Third, don’t use <code>library()</code> inside code that is <code>source</code>’d in other files. For example, if you attach a package to the search path from within a function you defined, anybody that uses your function loses control over the order of packages that get attached.</p></li>
</ul>
<p>All is not lost if there is a name conflict. The variables haven’t disappeared. It’s just slightly more difficult to refer to them. For instance, if I load in <code>Hmisc</code> (TODO cite), I get the warning warning that <code>format.pval</code> and <code>units</code> are now masked because they were names that were in <code>"package:base"</code>. I can still refer to these masked variables with the double colon operator (<code>::</code>).</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="odds-and-ends.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb119-2"><a href="odds-and-ends.html#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="co"># format.pval refers to Hmisc&#39;s format.pval because it was loaded more recently</span></span>
<span id="cb119-3"><a href="odds-and-ends.html#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Hmisc::format.pval in this case is the same as above</span></span>
<span id="cb119-4"><a href="odds-and-ends.html#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co"># base::format.pval this is the only way you can get base&#39;s format.pval function</span></span></code></pre></div>
</div>
<div id="loading-packages-in-python" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Loading Packages In Python</h3>
<p>In Python, you use the <code>import</code> statement to access objects defined in another file. It is slightly more complicated than R’s <code>library()</code> function, but it is also more flexible. To make the contents of a package called, say, <code>the_package</code> available, type <em>one of the following</em> inside a Python session.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb120-1"><a href="odds-and-ends.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> the_package</span>
<span id="cb120-2"><a href="odds-and-ends.html#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> the_package <span class="im">as</span> tp </span>
<span id="cb120-3"><a href="odds-and-ends.html#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> the_package <span class="im">import</span> <span class="op">*</span></span></code></pre></div>
<p>To describe the difference between these three approaches, as well as to highlight the important takeaways and compare them with the important takeaways in the last section, we need to discuss what a Python module is, what a package is, and what a Python namespace is.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<ul>
<li><p>A Python <a href="https://docs.python.org/3/tutorial/modules.html"><strong><code>module</code></strong></a> is a separate (when I say separate, I mean separate from the script file you’re currently editing) <code>.py</code> file with function and/or object definitions in it.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p></li>
<li><p>A <a href="https://docs.python.org/3/tutorial/modules.html#packages">package</a> is a group of modules.<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></p></li>
<li><p>A <a href="https://docs.python.org/3/tutorial/classes.html#python-scopes-and-namespaces"><strong>namespace</strong></a> is “a mapping from names to objects.”</p></li>
</ul>
<p>With these definitions, we can define <code>import</code>ing. According to the <a href="https://docs.python.org/3/reference/import.html#the-import-system">Python documentation</a>, “[t]he import statement combines two operations; it searches for the named module, then it binds the results of that search to a name in the local scope.”</p>
<p>The sequence of places Python looks for a module is called the search path. This is not the same as R’s search path, though. In Python, the search path is a list of places to look for <em>modules</em>, not a list of places to look for variables. To see it, <code>import sys</code>, then type <code>sys.path</code>.</p>
<p>After a module is found, the variable names in the found module become available in the <code>import</code>ing module. These variables are available in the global scope, but the names you use to access them will depend on what kind of <code>import</code> statement you used. From there, you are using the same scoping rules that we described in <a href="data-types.html#function-scope-in-python">2.5.6</a>, which means the LEGB acronym still applies.</p>
<p>Here are a few important takeaways that might not be readily apparent:</p>
<ul>
<li><p>Python namespaces are unlike R environments in that they are not arranged into a sorted list.</p></li>
<li><p>Unlike in R, there is no <em>masking</em>, and you don’t have to worry about the <em>order</em> of <code>import</code>ing things.</p></li>
<li><p>However, you do have to worry about <em>how</em> you’re <code>import</code>ing things. If you use the <code>from the_package import thingone, thingtwo</code> format of <code>import</code>ing, you are at risk of re-assigning either <code>thingone</code> or <code>thingtwo</code>, if they already exist. As a rule of thumb, <strong>you should never use this form of <code>import</code>ing</strong>.</p></li>
<li><p>These differences might explain why Python packages tend to be larger than R packages.</p></li>
</ul>
<div id="importing-examples" class="section level4" number="3.2.4.1">
<h4><span class="header-section-number">3.2.4.1</span> <code>import</code>ing Examples</h4>
<p>In the example below, we import the entire <code>numpy</code> package in a way that lets us refer to it as <code>np</code>. This reduces the amount of typing that is required of us, but it also protects against variable name clashing. We then use the <code>normal()</code> function to simulate normal random variables. This function is in the <a href="https://numpy.org/doc/stable/reference/random/index.html?highlight=random#module-numpy.random"><code>random</code> sub-module</a>, which is a sub-module in <code>numpy</code> that collects all of the pseudorandom number generation functionality together.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb121-1"><a href="odds-and-ends.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np <span class="co"># import all of numpy</span></span>
<span id="cb121-2"><a href="odds-and-ends.html#cb121-2" aria-hidden="true" tabindex="-1"></a>np.random.normal(size<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb121-3"><a href="odds-and-ends.html#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="co">## array([-0.43470654,  0.76317493,  1.95841842,  0.23100683,  0.80322106,</span></span>
<span id="cb121-4"><a href="odds-and-ends.html#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="co">##         0.48999706, -0.13298039, -1.67763274, -1.21883617,  0.4768533 ])</span></span></code></pre></div>
<p>This is one use of the dot operator (<code>.</code>). It is also used to access attributes and methods of objects (more information on that will come later in chapter <a href="an-introduction-to-object-oriented-programming.html#an-introduction-to-object-oriented-programming">4</a>). <code>normal</code> is <em>inside of</em> <code>random</code>, which it itself inside of <code>np</code>.</p>
<p>As a second example, suppose we were interested in the <a href="https://docs.scipy.org/doc/scipy/reference/tutorial/stats.html"><code>stats</code> sub-module</a> found inside the <code>scipy</code> package. We could import all of <code>scipy</code>, but just like the above example, that would mean we would need to consistently refer to a variable’s module, the sub-module, and the variable name. For long programs, this can become tedious if we had to type <code>scipy.stats.norm</code> over and over again. Instead, let’s import the sub-module (or sub-package) and ignore the rest of <code>scipy</code>.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb122-1"><a href="odds-and-ends.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> stats</span>
<span id="cb122-2"><a href="odds-and-ends.html#cb122-2" aria-hidden="true" tabindex="-1"></a>stats.norm().rvs(size<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb122-3"><a href="odds-and-ends.html#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="co">## array([-0.64473797, -1.53878565, -0.27133171,  1.30101864,  0.65618805,</span></span>
<span id="cb122-4"><a href="odds-and-ends.html#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="co">##         2.83726236,  0.41085974,  0.74220464,  1.10136788,  1.3898626 ])</span></span></code></pre></div>
<p>So we don’t have to type <code>scipy</code> every time we use something in <code>scipy.stats</code>.</p>
<p>Finally, we can import the function directly, and refer to it with only one letter. This is highly discouraged, though. We are much more likely to accidentally use the name <code>n</code> twice. Further, <code>n</code> is not a very descriptive name, which means it could be difficult to understand what your program is doing later.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb123-1"><a href="odds-and-ends.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy.random <span class="im">import</span> normal <span class="im">as</span> n</span>
<span id="cb123-2"><a href="odds-and-ends.html#cb123-2" aria-hidden="true" tabindex="-1"></a>n(size<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb123-3"><a href="odds-and-ends.html#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="co">## array([-0.43970432,  0.31564009, -1.64666973, -1.35459129,  1.74220327,</span></span>
<span id="cb123-4"><a href="odds-and-ends.html#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="co">##        -1.49067142, -0.48975257, -0.20603022,  1.72179658, -0.75993415])</span></span></code></pre></div>
<p>Keep in mind, you’re always at risk of accidentally re-using names, even if you aren’t <code>import</code>ing anything. For example, consider the following code.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb124-1"><a href="odds-and-ends.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># don&#39;t do this!</span></span>
<span id="cb124-2"><a href="odds-and-ends.html#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span> <span class="op">=</span> <span class="dv">3</span></span></code></pre></div>
<p>This is very bad, because now you cannot use the <code>sum</code> function that was named in the built-in module. To see what is in your built in module, type the following into your Python interpreter: <code>dir(__builtins__)</code>.</p>
</div>
</div>
</div>
<div id="control-flow" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Control Flow</h2>
<div id="conditional-logic" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Conditional Logic</h3>
<p>We discussed Boolean objects in <a href="data-types.html#basic-types">2.1</a>. We used these for</p>
<ul>
<li>counting up number of times a condition appeared, and</li>
<li>subsetting.</li>
</ul>
<p>Another way to use them is to conditionally execute code, depending on whether or truth condition of a Boolean.</p>
<p>In R,</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="odds-and-ends.html#cb125-1" aria-hidden="true" tabindex="-1"></a>myName <span class="ot">&lt;-</span> <span class="st">&quot;Clare&quot;</span></span>
<span id="cb125-2"><a href="odds-and-ends.html#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(myName <span class="sc">!=</span> <span class="st">&quot;Taylor&quot;</span>){</span>
<span id="cb125-3"><a href="odds-and-ends.html#cb125-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;you are not Taylor&quot;</span>)</span>
<span id="cb125-4"><a href="odds-and-ends.html#cb125-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb125-5"><a href="odds-and-ends.html#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;you are not Taylor&quot;</span></span></code></pre></div>
<p><a href="https://docs.python.org/3/tutorial/controlflow.html#if-statements">In Python</a>, you don’t need curly braces, but the indentation needs to be just right, and you need a colon.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb126-1"><a href="odds-and-ends.html#cb126-1" aria-hidden="true" tabindex="-1"></a>my_name <span class="op">=</span> <span class="st">&quot;Taylor&quot;</span></span>
<span id="cb126-2"><a href="odds-and-ends.html#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> my_name <span class="op">==</span> <span class="st">&quot;Taylor&quot;</span>:</span>
<span id="cb126-3"><a href="odds-and-ends.html#cb126-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;hi Taylor&quot;</span>)</span>
<span id="cb126-4"><a href="odds-and-ends.html#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="co">## hi Taylor</span></span></code></pre></div>
<p>There can be more than one truth test. To test alternative Boolean conditions, you can add one or more <code>else if</code> (in R) or <code>elif</code> (in Python) blocks. The first block with a Boolean that is found to be true will execute, and none of the resulting conditions will be checked.</p>
<p>If no <code>if</code> block or <code>else if</code>/<code>elif</code> block executes, an <code>else</code> block will always execute. That’s why <code>else</code> blocks don’t need to look at a Boolean. Whether they execute only depends on the Booleans in the previous blocks.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="odds-and-ends.html#cb127-1" aria-hidden="true" tabindex="-1"></a>food <span class="ot">&lt;-</span> <span class="st">&quot;muffin&quot;</span></span>
<span id="cb127-2"><a href="odds-and-ends.html#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(food <span class="sc">==</span> <span class="st">&quot;apple&quot;</span>){</span>
<span id="cb127-3"><a href="odds-and-ends.html#cb127-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;an apple a day keeps the doctor away&quot;</span>)</span>
<span id="cb127-4"><a href="odds-and-ends.html#cb127-4" aria-hidden="true" tabindex="-1"></a>}<span class="cf">else</span> <span class="cf">if</span>(food <span class="sc">==</span> <span class="st">&quot;muffin&quot;</span>){</span>
<span id="cb127-5"><a href="odds-and-ends.html#cb127-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;muffins have a lot of sugar in them&quot;</span>)</span>
<span id="cb127-6"><a href="odds-and-ends.html#cb127-6" aria-hidden="true" tabindex="-1"></a>}<span class="cf">else</span>{</span>
<span id="cb127-7"><a href="odds-and-ends.html#cb127-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="st">&quot;neither an apple nor a muffin&quot;</span>)</span>
<span id="cb127-8"><a href="odds-and-ends.html#cb127-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb127-9"><a href="odds-and-ends.html#cb127-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;muffins have a lot of sugar in them&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb128"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb128-1"><a href="odds-and-ends.html#cb128-1" aria-hidden="true" tabindex="-1"></a>my_num <span class="op">=</span> <span class="fl">42.999</span></span>
<span id="cb128-2"><a href="odds-and-ends.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> my_num <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb128-3"><a href="odds-and-ends.html#cb128-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;my_num is even&quot;</span>)</span>
<span id="cb128-4"><a href="odds-and-ends.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> my_num <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">1</span>:</span>
<span id="cb128-5"><a href="odds-and-ends.html#cb128-5" aria-hidden="true" tabindex="-1"></a>    my_num <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb128-6"><a href="odds-and-ends.html#cb128-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;my_num was made even&quot;</span>)</span>
<span id="cb128-7"><a href="odds-and-ends.html#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb128-8"><a href="odds-and-ends.html#cb128-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;you&#39;re cheating by not using integers!&quot;</span>)</span>
<span id="cb128-9"><a href="odds-and-ends.html#cb128-9" aria-hidden="true" tabindex="-1"></a><span class="co">## you&#39;re cheating by not using integers!</span></span></code></pre></div>
</div>
<div id="loops" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Loops</h3>
<p>One line of code generally does one “thing,” unless you’re using loops. Code written inside a loop will execute many times.</p>
<p>The most common loop for us will be a <code>for</code> loop. A simple <code>for</code> loop in R might look like this</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="odds-and-ends.html#cb129-1" aria-hidden="true" tabindex="-1"></a>myLength <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb129-2"><a href="odds-and-ends.html#cb129-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">&quot;numeric&quot;</span>, <span class="at">length =</span> myLength)</span>
<span id="cb129-3"><a href="odds-and-ends.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_len</span>(myLength)){</span>
<span id="cb129-4"><a href="odds-and-ends.html#cb129-4" aria-hidden="true" tabindex="-1"></a>    r[i] <span class="ot">&lt;-</span> i</span>
<span id="cb129-5"><a href="odds-and-ends.html#cb129-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb129-6"><a href="odds-and-ends.html#cb129-6" aria-hidden="true" tabindex="-1"></a>r</span>
<span id="cb129-7"><a href="odds-and-ends.html#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4 5 6 7 8 9</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li><code>seq_len(myLength)</code> gives us a <code>vector</code></li>
<li><code>i</code> is a variable that takes on the values found in the <code>vector</code></li>
<li>Code inside the loop (inside the curly braces), is repeatedly executed, and it may or may not reference the dynamic variable <code>i</code></li>
</ol>
<p><a href="https://docs.python.org/3/tutorial/controlflow.html#for-statements">In Python</a></p>
<div class="sourceCode" id="cb130"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb130-1"><a href="odds-and-ends.html#cb130-1" aria-hidden="true" tabindex="-1"></a>my_length <span class="op">=</span> <span class="dv">9</span></span>
<span id="cb130-2"><a href="odds-and-ends.html#cb130-2" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> []</span>
<span id="cb130-3"><a href="odds-and-ends.html#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(my_length):</span>
<span id="cb130-4"><a href="odds-and-ends.html#cb130-4" aria-hidden="true" tabindex="-1"></a>    r.append(i)</span>
<span id="cb130-5"><a href="odds-and-ends.html#cb130-5" aria-hidden="true" tabindex="-1"></a>r</span>
<span id="cb130-6"><a href="odds-and-ends.html#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="co">## [0, 1, 2, 3, 4, 5, 6, 7, 8]</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Unsurprisingly, Python’s syntax opts for indentation and colons instead of curly braces and parentheses,</li>
<li>Code inside the loop (inside the curly braces), is repeatedly executed, and it may or may not reference the dynamic variable <code>i</code></li>
<li><code>for</code> loops in Python are more flexible because they iterate over many different types of data structures,</li>
<li>The <a href="https://docs.python.org/3/tutorial/controlflow.html#the-range-function"><code>range</code></a> doesn’t generate all the numbers in the sequence at once, so it saves on memory. This can be quite useful for certain applications. However, <code>r</code> is a list that <em>does</em> store all the consecutive integers.</li>
</ol>
<div class="rmd-caution">
<p>
Loop tips:
</p>
<ol style="list-style-type: decimal">
<li>
If you find yourself copy/paste-ing code, changing only a small portion of text on each line of code, you should consider using a loop,
</li>
<li>
If a <code>for</code> loop works for something you are trying to do, first try to find a replacement function that does what you want. The examples above just made a <code>vector</code>/<code>list</code> of consecutive integers. There are many built in functions that accomplish this. Avoiding loops in this case would make your program shorter, easier to read, and (potentially) much faster.
</li>
<li>
A third option between looping, and a built-in function, is to try the functional approach. This will be explained more in the last chapter.
</li>
<li>
Watch out for <a href="https://en.wikipedia.org/wiki/Off-by-one_error"><strong>off-by-one</strong> errors</a>. Iterating over the wrong sequence is a common mistake, considering
<ul>
<li>
Python starts counting from <span class="math inline"><span class="math inline">\(0\)</span></span>, while R starts counting from <span class="math inline"><span class="math inline">\(1\)</span></span>
</li>
<li>
sometimes iteration <code>i</code> references the <code>i-1</code>th element of a container
</li>
<li>
The behavior of loops is sometimes more difficult to understand if they’re using <code>break</code> or <code>continue</code>/<code>next</code> statements
</li>
</ul>
</li>
<li>
<em>Don’t hardcode variables.</em> Minimize the number of places you have to make changes to your code. You will change your code consistently, so save your future self some time.
</li>
</ol>
</div>
<div class="rmd-caution">
<p>
The last point bears repeating: <em>don’t hardcode variables</em>. In statistical programs, there are often “tuning parameters,” for instance that must be changed frequently to affect the overall behavior of the program. If these variables only need to be changed in one location, that saves you a lot of time and gives you more flexibility.
</p>
<p>
In the example above, the <code>myLength</code> or <code>my_length</code> variable could be referenced in many places throughout the entire program. If you wanted to change the number of iterations in your program (which happens all the time), and you <em>did</em> hardcode the length in a bunch of places throughout the program, you would need to hunt down all those changes!
</p>
</div>
<p>Python provides an alternative way to construct lists similar to the one we constructed in the above example. They are called <a href="https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions"><strong>list comprehensions</strong></a>. You can incorporate iteration and conditional logic in one line of code.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb131-1"><a href="odds-and-ends.html#cb131-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span><span class="op">*</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>) <span class="cf">if</span> i<span class="op">%</span><span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb131-2"><a href="odds-and-ends.html#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="co">## [0, 6, 12, 18, 24]</span></span></code></pre></div>
<p>You might also have a look at <a href="https://www.python.org/dev/peps/pep-0289/"><em>generator expressions</em></a> and <a href="https://www.python.org/dev/peps/pep-0274/"><em>dictionary comprehensions</em></a>.</p>
<p>R can come close to replicating the above behavior with vectorization, but the conditional part is hard to achieve without subsetting.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="odds-and-ends.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">*</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">9</span>)[<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">9</span>)<span class="sc">%%</span><span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>]</span>
<span id="cb132-2"><a href="odds-and-ends.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  0  6 12 18 24</span></span></code></pre></div>
</div>
<div id="a-longer-example" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> A Longer Example</h3>
<div id="description-of-accept-reject-sampling" class="section level4" number="3.3.3.1">
<h4><span class="header-section-number">3.3.3.1</span> Description of Accept-Reject Sampling</h4>
<p>An example of an algorithm that uses conditional logic is the <strong>accept-reject sampling method</strong> <span class="citation">(<a href="#ref-monte-carlo-stat-methods" role="doc-biblioref">Robert and Casella 2005</a>)</span>. This is useful for when we want to sample from a <em>target probability density</em> <span class="math inline">\(p(x)\)</span>, using another distribution called a <em>proposal ditribution</em> <span class="math inline">\(q(x)\)</span>.</p>
<p><span class="math inline">\(q(x)\)</span> is probably a distribution that is easy to sample from and is easy to evaluate pointwise. For example, a uniform distribution satisfies these criteria because both R and Python have functions that accomplish these two things (e.g. sampling can be done with <code>runif</code> in R and <code>np.random.uniform</code> in Python). <span class="math inline">\(p(x)\)</span> is generally more “complicated.” If it wasn’t, we would try to find some built-in function for it.</p>
<p>One common way a distribution can be complicated is that it can have an unknown <strong>normalizing constant</strong>–one that is difficult or impossible to solve using calculus. This happens a lot in <em>Bayesian Statistics</em>, for example.<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a>. We might write down
<span class="math display">\[
p(x) = \frac{f(x)}{\int f(x) dx},
\]</span>
and this is guaranteed to be a probability density function as long as <span class="math inline">\(f(x) \ge 0\)</span> and <span class="math inline">\(\int f(x) dx &lt; \infty\)</span>, but we might have no idea how to solve the denominator. In this case, <span class="math inline">\(f(x)\)</span> is easy to evaluate pointwise, but <span class="math inline">\(p(x)\)</span> is not.</p>
<p>This algorithm makes use of an auxiliary random variable that is sampled from a <span class="math inline">\(\text{Bernoulli}(p)\)</span> distribution. As long as <span class="math inline">\(0 &lt; p &lt; 1\)</span>, a Bernoulli random variable <span class="math inline">\(Y\)</span> is either <span class="math inline">\(0\)</span> or <span class="math inline">\(1\)</span>. The probability it takes the value <span class="math inline">\(1\)</span> is <span class="math inline">\(p\)</span>, while the probability that it takes the value <span class="math inline">\(0\)</span> is <span class="math inline">\(1-p\)</span>. A coin flip is a good example use-case for this distribution. Coin flips are commonly assumed to be distributed as<span class="math inline">\(\text{Bernoulli}(.5)\)</span>. At least for fair coins, there is an equal chance that the coin lands heads (i.e. <span class="math inline">\(0\)</span>) or tails (i.e. <span class="math inline">\(1\)</span>).</p>
<p>The most difficult part about using this algorithm is that one must calculate the probability parameter of this Bernoulli random variable. This involves calculating (by hand) an upper bound <span class="math inline">\(M\)</span> for the ratio <span class="math inline">\(f(x) / q(x)\)</span>. This bound has to hold uniformly, meaning that it is a constant number that is greater than the ratio no matter what <span class="math inline">\(x\)</span> we plug in.</p>
<p>Below is one step of the accept-reject algorithm.</p>
<hr />
<p><strong>Algorithm 1</strong>: Accept-Reject Sampling (One Step)</p>
<hr />
<ol style="list-style-type: decimal">
<li>Calculate <span class="math inline">\(M &gt; \frac{f(x)}{q(x)}\)</span> (the smaller the better)</li>
<li>Sample <span class="math inline">\(X\)</span> from <span class="math inline">\(q(x)\)</span></li>
<li>Sample <span class="math inline">\(Y \mid X\)</span> from <span class="math inline">\(\text{Bernoulli}\left(\frac{f(X)}{q(X)M}\right)\)</span></li>
<li>If <span class="math inline">\(Y = 1\)</span>, then return <span class="math inline">\(X\)</span></li>
<li>Otherwise, return nothing</li>
</ol>
<hr />
<p>Multiple samples will be required, so this process needs to be iterated many times. There are two ways to do this. If you want to iterate a fixed number of times, you can use a <code>for</code> loop. However, in that case, you will end up with a random number of samples. On the other hand, if you want a nonrandom number of samples, you will probably want a <code>while</code> loop. This is the approach the example below takes. The <code>while</code> loop will continue iterating until a condition is false. In our case, we want to loop until we receive the total number of samples we requested.</p>
</div>
<div id="a-specific-example" class="section level4" number="3.3.3.2">
<h4><span class="header-section-number">3.3.3.2</span> A Specific Example</h4>
<p>Here is a specific example. Let’s say our target<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a> is
<span class="math display">\[
p(x) = 
\begin{cases}
\frac{x^2(1-x)}{\int_0^1 x^2(1-x) dx} &amp; 0 &lt; x &lt; 1 \\
0 &amp; \text{otherwise}
\end{cases}.
\]</span>
The denominator, <span class="math inline">\(\int_0^1 x^2(1-x) dx\)</span>, is the target’s normalizing constant. You might know how to solve this integral, but let’s pretend for the sake of our example that it’s too difficult for us. We want to sample from <span class="math inline">\(p(x)\)</span> while only being able to evaluate (not sample) from its normalized version.</p>
<p>Next, let’s choose a uniform distribution for our proposal distribution:
<span class="math display">\[
q(x) = 
\begin{cases}
1 &amp; 0 &lt; x &lt; 1 \\
0 &amp; \text{otherwise}
\end{cases}
\]</span>
We can plot all three functions.</p>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-149-1.png" width="80%" /></p>
<p>Here’s some Python code that attempts to sample once from <span class="math inline">\(p(x)\)</span>. Sometimes proposals are not accepted. When that happens, the function returns <code>None</code>.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb133-1"><a href="odds-and-ends.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb133-2"><a href="odds-and-ends.html#cb133-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-3"><a href="odds-and-ends.html#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(samp):</span>
<span id="cb133-4"><a href="odds-and-ends.html#cb133-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;the unnormalized density&quot;&quot;&quot;</span></span>
<span id="cb133-5"><a href="odds-and-ends.html#cb133-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="dv">1</span><span class="op">-</span>samp)<span class="op">*</span>(samp<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb133-6"><a href="odds-and-ends.html#cb133-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-7"><a href="odds-and-ends.html#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> attempt_one_samp():</span>
<span id="cb133-8"><a href="odds-and-ends.html#cb133-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;attempts to sample from target distribution, using uniform as a proposal&quot;&quot;&quot;</span></span>
<span id="cb133-9"><a href="odds-and-ends.html#cb133-9" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> np.random.uniform()</span>
<span id="cb133-10"><a href="odds-and-ends.html#cb133-10" aria-hidden="true" tabindex="-1"></a>    M <span class="op">=</span> <span class="dv">4</span><span class="op">/</span><span class="dv">27</span></span>
<span id="cb133-11"><a href="odds-and-ends.html#cb133-11" aria-hidden="true" tabindex="-1"></a>    bern_prob_param <span class="op">=</span> f(x)<span class="op">/</span>M</span>
<span id="cb133-12"><a href="odds-and-ends.html#cb133-12" aria-hidden="true" tabindex="-1"></a>    accept <span class="op">=</span> np.random.binomial(<span class="dv">1</span>, bern_prob_param) <span class="op">==</span> <span class="dv">1</span></span>
<span id="cb133-13"><a href="odds-and-ends.html#cb133-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> accept:</span>
<span id="cb133-14"><a href="odds-and-ends.html#cb133-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x</span></code></pre></div>
<div class="sourceCode" id="cb134"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb134-1"><a href="odds-and-ends.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sample_from_target(num_times):</span>
<span id="cb134-2"><a href="odds-and-ends.html#cb134-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;sample num_times from the target distribution&quot;&quot;&quot;</span></span>
<span id="cb134-3"><a href="odds-and-ends.html#cb134-3" aria-hidden="true" tabindex="-1"></a>    samps <span class="op">=</span> []</span>
<span id="cb134-4"><a href="odds-and-ends.html#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="bu">len</span>(samps) <span class="op">&lt;</span> num_times:</span>
<span id="cb134-5"><a href="odds-and-ends.html#cb134-5" aria-hidden="true" tabindex="-1"></a>        potential_samp <span class="op">=</span> attempt_one_samp()</span>
<span id="cb134-6"><a href="odds-and-ends.html#cb134-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> potential_samp <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb134-7"><a href="odds-and-ends.html#cb134-7" aria-hidden="true" tabindex="-1"></a>            samps.append(potential_samp)</span>
<span id="cb134-8"><a href="odds-and-ends.html#cb134-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> samps</span></code></pre></div>
<ol style="list-style-type: decimal">
<li>we used a <code>while</code> loop instead of a <code>for</code> loop because we did not know how many iterations it would take to get <code>num_times</code> samples</li>
<li>We are following the <a href="https://www.python.org/dev/peps/pep-0008/#other-recommendations">Python style guide</a> and using the <code>is not</code> keyword to check if something is <code>None</code></li>
</ol>
<p>In chapter <a href="odds-and-ends.html#visualization">3.5</a>, we’ll show you the code that you can use to generate the plot below.
<img src="r_and_python_book_files/figure-html/unnamed-chunk-152-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="reshaping-and-combining-data-sets" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Reshaping and Combining Data Sets</h2>
<div id="ordering-and-sorting-data" class="section level3" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Ordering and Sorting Data</h3>
<p>Sorting a data set, in ascending order, say, is a common task. You might need to do it because</p>
<ol style="list-style-type: decimal">
<li>ordering and ranking is commonly done in <em>nonparametric statistics</em>,</li>
<li>you want to inspect the most “extreme” observations in a data set,</li>
<li>it’s a pre-processing step before generating visualizations.</li>
</ol>
<p>In R, it all starts with <code>vector</code>s. There are two common functions you should know: <code>sort</code> and <code>order</code>. <code>sort</code> returns the sorted <em>data</em>, while <code>order</code> returns the <em>order indexes</em>.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="odds-and-ends.html#cb135-1" aria-hidden="true" tabindex="-1"></a>sillyData <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb135-2"><a href="odds-and-ends.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(sillyData)</span>
<span id="cb135-3"><a href="odds-and-ends.html#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] -0.07391173 -2.18115672 -1.09934716 -0.58404057  1.72783437</span></span>
<span id="cb135-4"><a href="odds-and-ends.html#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(sillyData)</span>
<span id="cb135-5"><a href="odds-and-ends.html#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] -2.18115672 -1.09934716 -0.58404057 -0.07391173  1.72783437</span></span>
<span id="cb135-6"><a href="odds-and-ends.html#cb135-6" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(sillyData)</span>
<span id="cb135-7"><a href="odds-and-ends.html#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2 3 4 1 5</span></span></code></pre></div>
<p><code>order</code> is useful if you’re sorting a data frame by a particularly column. Below, we inspect the top 5 most expensive cars. Notice that we need to clean up the <code>MSRP</code> (a <code>character</code> vector) a little first. We use the function <code>gsub</code> to find patterns in the text, and replace them with the empty string.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="odds-and-ends.html#cb136-1" aria-hidden="true" tabindex="-1"></a>carData <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/cars.csv&quot;</span>)</span>
<span id="cb136-2"><a href="odds-and-ends.html#cb136-2" aria-hidden="true" tabindex="-1"></a>noDollarSignMSRP <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;$&quot;</span>, <span class="st">&quot;&quot;</span>, carData<span class="sc">$</span>MSRP, <span class="at">fixed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-3"><a href="odds-and-ends.html#cb136-3" aria-hidden="true" tabindex="-1"></a>carData<span class="sc">$</span>cleanMSRP <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">&quot;,&quot;</span>, <span class="st">&quot;&quot;</span>, noDollarSignMSRP, <span class="at">fixed =</span> <span class="cn">TRUE</span>))</span>
<span id="cb136-4"><a href="odds-and-ends.html#cb136-4" aria-hidden="true" tabindex="-1"></a>rowIndices <span class="ot">&lt;-</span> <span class="fu">order</span>(carData<span class="sc">$</span>cleanMSRP, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb136-5"><a href="odds-and-ends.html#cb136-5" aria-hidden="true" tabindex="-1"></a>carData[rowIndices,<span class="fu">c</span>(<span class="st">&quot;Make&quot;</span>, <span class="st">&quot;Model&quot;</span>, <span class="st">&quot;MSRP&quot;</span>, <span class="st">&quot;cleanMSRP&quot;</span>)]</span></code></pre></div>
<pre><code>##              Make                 Model     MSRP cleanMSRP
## 335       Porsche           911 GT2 2dr $192,465    192465
## 263 Mercedes-Benz             CL600 2dr $128,420    128420
## 272 Mercedes-Benz SL600 convertible 2dr $126,670    126670
## 271 Mercedes-Benz          SL55 AMG 2dr $121,770    121770
## 262 Mercedes-Benz             CL500 2dr  $94,820     94820</code></pre>
<p>In Python, Numpy has <a href="https://numpy.org/doc/stable/reference/generated/numpy.argsort.html"><code>np.argsort</code></a> and <a href="https://numpy.org/doc/stable/reference/generated/numpy.sort.html"><code>np.sort</code></a>.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb138-1"><a href="odds-and-ends.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb138-2"><a href="odds-and-ends.html#cb138-2" aria-hidden="true" tabindex="-1"></a>silly_data <span class="op">=</span> np.random.normal(size<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb138-3"><a href="odds-and-ends.html#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(silly_data)</span>
<span id="cb138-4"><a href="odds-and-ends.html#cb138-4" aria-hidden="true" tabindex="-1"></a><span class="co">## [ 0.03803622 -0.88508168  0.64271529  0.68147948 -0.01781817]</span></span>
<span id="cb138-5"><a href="odds-and-ends.html#cb138-5" aria-hidden="true" tabindex="-1"></a>np.sort(silly_data)</span>
<span id="cb138-6"><a href="odds-and-ends.html#cb138-6" aria-hidden="true" tabindex="-1"></a><span class="co">## array([-0.88508168, -0.01781817,  0.03803622,  0.64271529,  0.68147948])</span></span>
<span id="cb138-7"><a href="odds-and-ends.html#cb138-7" aria-hidden="true" tabindex="-1"></a>np.argsort(silly_data)</span>
<span id="cb138-8"><a href="odds-and-ends.html#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="co">## array([1, 4, 0, 2, 3])</span></span></code></pre></div>
<p>For pandas’ <code>DataFrame</code>s, most of the functions I find useful are methods attached to the <code>DataFrame</code> class. That means that, as long as something is inside a <code>DataFrame</code>, you can use dot notation.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb139-1"><a href="odds-and-ends.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb139-2"><a href="odds-and-ends.html#cb139-2" aria-hidden="true" tabindex="-1"></a>car_data <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/cars.csv&quot;</span>)</span>
<span id="cb139-3"><a href="odds-and-ends.html#cb139-3" aria-hidden="true" tabindex="-1"></a>car_data[<span class="st">&#39;no_dlr_msrp&#39;</span>] <span class="op">=</span> car_data[<span class="st">&#39;MSRP&#39;</span>].<span class="bu">str</span>.replace(<span class="st">&quot;$&quot;</span>, <span class="st">&quot;&quot;</span>, regex <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb139-4"><a href="odds-and-ends.html#cb139-4" aria-hidden="true" tabindex="-1"></a>car_data[<span class="st">&#39;clean_MSRP&#39;</span>] <span class="op">=</span> car_data[<span class="st">&#39;no_dlr_msrp&#39;</span>].<span class="bu">str</span>.replace(<span class="st">&quot;,&quot;</span>,<span class="st">&quot;&quot;</span>).astype(<span class="bu">float</span>)</span>
<span id="cb139-5"><a href="odds-and-ends.html#cb139-5" aria-hidden="true" tabindex="-1"></a>car_data <span class="op">=</span> car_data.sort_values(by<span class="op">=</span><span class="st">&#39;clean_MSRP&#39;</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb139-6"><a href="odds-and-ends.html#cb139-6" aria-hidden="true" tabindex="-1"></a>car_data[[<span class="st">&quot;Make&quot;</span>, <span class="st">&quot;Model&quot;</span>, <span class="st">&quot;MSRP&quot;</span>, <span class="st">&quot;clean_MSRP&quot;</span>]].head(<span class="dv">5</span>)</span>
<span id="cb139-7"><a href="odds-and-ends.html#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="co">##               Make                  Model      MSRP  clean_MSRP</span></span>
<span id="cb139-8"><a href="odds-and-ends.html#cb139-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 334        Porsche            911 GT2 2dr  $192,465    192465.0</span></span>
<span id="cb139-9"><a href="odds-and-ends.html#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 262  Mercedes-Benz              CL600 2dr  $128,420    128420.0</span></span>
<span id="cb139-10"><a href="odds-and-ends.html#cb139-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 271  Mercedes-Benz  SL600 convertible 2dr  $126,670    126670.0</span></span>
<span id="cb139-11"><a href="odds-and-ends.html#cb139-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 270  Mercedes-Benz           SL55 AMG 2dr  $121,770    121770.0</span></span>
<span id="cb139-12"><a href="odds-and-ends.html#cb139-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 261  Mercedes-Benz              CL500 2dr   $94,820     94820.0</span></span></code></pre></div>
<p>pandas’ <code>DataFrame</code>s and <code>Series</code> have a <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.replace.html"><code>replace</code></a> method. We use this to remove dollar signs and commas from the MSRP column. Note that we had to access the <code>.str</code> attribute of the <code>Series</code> column before we used it. After the string was processed, we converted it to a <code>Series</code> of <code>float</code>s with the <code>astype</code> method.</p>
<p>Finally, sorting the overall data frame could have been done with the same approach as the code we used in R (i.e. raw subsetting by row indexes), but there is a built in method called <code>sort_values</code> that will do it for us.</p>
</div>
<div id="stacking-data-sets-and-placing-them-shoulder-to-shoulder" class="section level3" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Stacking Data Sets and Placing them Shoulder to Shoulder</h3>
<p>Stacking data sets on top of each other is a common task. You might need to do it if</p>
<ol style="list-style-type: decimal">
<li>you need to add new a new row (or many rows) to a data frame,</li>
<li>you need to recombine data sets (e.g. recombine a train/test split), or</li>
<li>you’re creating a matrix in a step-by-step way.</li>
</ol>
<p>In R, this can be done with <code>rbind</code> (short for “row bind”)</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="odds-and-ends.html#cb140-1" aria-hidden="true" tabindex="-1"></a>realEstate <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/albemarle_real_estate.csv&quot;</span>)</span>
<span id="cb140-2"><a href="odds-and-ends.html#cb140-2" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> realEstate[<span class="sc">-</span><span class="dv">1</span>,]</span>
<span id="cb140-3"><a href="odds-and-ends.html#cb140-3" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> realEstate[<span class="dv">1</span>,]</span>
<span id="cb140-4"><a href="odds-and-ends.html#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">rbind</span>(test, train))</span>
<span id="cb140-5"><a href="odds-and-ends.html#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   YearBuilt YearRemodeled Condition NumStories FinSqFt Bedroom FullBath HalfBath TotalRooms LotSize TotalValue</span></span>
<span id="cb140-6"><a href="odds-and-ends.html#cb140-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      2006             0   Average       1.00    1922       3        3        0         10   5.000     409900</span></span>
<span id="cb140-7"><a href="odds-and-ends.html#cb140-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      2003             0   Average       1.00    1848       3        2        0          7  61.189     523100</span></span>
<span id="cb140-8"><a href="odds-and-ends.html#cb140-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      1972             0   Average       1.00    1248       2        1        0          4   1.760     180900</span></span>
<span id="cb140-9"><a href="odds-and-ends.html#cb140-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      1998             0      Good       1.00    1244       1        1        0          3  50.648     620700</span></span>
<span id="cb140-10"><a href="odds-and-ends.html#cb140-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 5      1886             0   Average       1.86    1861       4        1        0          6   3.880     162500</span></span>
<span id="cb140-11"><a href="odds-and-ends.html#cb140-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 6      1910             0      Fair       1.53    1108       3        1        0          6   8.838     167200</span></span>
<span id="cb140-12"><a href="odds-and-ends.html#cb140-12" aria-hidden="true" tabindex="-1"></a><span class="do">##          City</span></span>
<span id="cb140-13"><a href="odds-and-ends.html#cb140-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      CROZET</span></span>
<span id="cb140-14"><a href="odds-and-ends.html#cb140-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      CROZET</span></span>
<span id="cb140-15"><a href="odds-and-ends.html#cb140-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 EARLYSVILLE</span></span>
<span id="cb140-16"><a href="odds-and-ends.html#cb140-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      CROZET</span></span>
<span id="cb140-17"><a href="odds-and-ends.html#cb140-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 5      CROZET</span></span>
<span id="cb140-18"><a href="odds-and-ends.html#cb140-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 6      CROZET</span></span>
<span id="cb140-19"><a href="odds-and-ends.html#cb140-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">rbind</span>(test, train) <span class="sc">!=</span> realEstate)</span>
<span id="cb140-20"><a href="odds-and-ends.html#cb140-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0</span></span></code></pre></div>
<p>The above example was with <code>data.frame</code>s. This example of <code>rbind</code> is with <code>matrix</code> objects.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="odds-and-ends.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(<span class="fu">matrix</span>(<span class="dv">1</span>,<span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>), </span>
<span id="cb141-2"><a href="odds-and-ends.html#cb141-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">matrix</span>(<span class="dv">2</span>,<span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>))</span>
<span id="cb141-3"><a href="odds-and-ends.html#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb141-4"><a href="odds-and-ends.html#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    1    1</span></span>
<span id="cb141-5"><a href="odds-and-ends.html#cb141-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    1    1    1</span></span>
<span id="cb141-6"><a href="odds-and-ends.html#cb141-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [3,]    2    2    2</span></span>
<span id="cb141-7"><a href="odds-and-ends.html#cb141-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [4,]    2    2    2</span></span></code></pre></div>
<p>In Python, you can stack data frames with <a href="https://www.google.com/search?client=safari&amp;rls=en&amp;q=pandas+concat&amp;ie=UTF-8&amp;oe=UTF-8"><code>pd.concat</code></a>. It has a lot of options, so feel free to peruse those. You can also replace the call to <code>pd.concat</code> below with <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.append.html"><code>test.append(train)</code></a>.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb142-1"><a href="odds-and-ends.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb142-2"><a href="odds-and-ends.html#cb142-2" aria-hidden="true" tabindex="-1"></a>real_estate <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/albemarle_real_estate.csv&quot;</span>)</span>
<span id="cb142-3"><a href="odds-and-ends.html#cb142-3" aria-hidden="true" tabindex="-1"></a>train <span class="op">=</span> real_estate.iloc[<span class="dv">1</span>:,]</span>
<span id="cb142-4"><a href="odds-and-ends.html#cb142-4" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> real_estate.iloc[[<span class="dv">0</span>],] <span class="co"># need the extra brackets!</span></span>
<span id="cb142-5"><a href="odds-and-ends.html#cb142-5" aria-hidden="true" tabindex="-1"></a>pd.concat([test,train], axis<span class="op">=</span><span class="dv">0</span>).head() <span class="co"># also </span></span>
<span id="cb142-6"><a href="odds-and-ends.html#cb142-6" aria-hidden="true" tabindex="-1"></a><span class="co">##    YearBuilt  YearRemodeled Condition  ...  LotSize  TotalValue         City</span></span>
<span id="cb142-7"><a href="odds-and-ends.html#cb142-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 0       2006              0   Average  ...    5.000      409900       CROZET</span></span>
<span id="cb142-8"><a href="odds-and-ends.html#cb142-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 1       2003              0   Average  ...   61.189      523100       CROZET</span></span>
<span id="cb142-9"><a href="odds-and-ends.html#cb142-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 2       1972              0   Average  ...    1.760      180900  EARLYSVILLE</span></span>
<span id="cb142-10"><a href="odds-and-ends.html#cb142-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 3       1998              0      Good  ...   50.648      620700       CROZET</span></span>
<span id="cb142-11"><a href="odds-and-ends.html#cb142-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 4       1886              0   Average  ...    3.880      162500       CROZET</span></span>
<span id="cb142-12"><a href="odds-and-ends.html#cb142-12" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb142-13"><a href="odds-and-ends.html#cb142-13" aria-hidden="true" tabindex="-1"></a><span class="co">## [5 rows x 12 columns]</span></span>
<span id="cb142-14"><a href="odds-and-ends.html#cb142-14" aria-hidden="true" tabindex="-1"></a>(pd.concat([test,train], axis<span class="op">=</span><span class="dv">0</span>) <span class="op">!=</span> real_estate).<span class="bu">sum</span>().<span class="bu">sum</span>()</span>
<span id="cb142-15"><a href="odds-and-ends.html#cb142-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 0</span></span></code></pre></div>
<p>Take note of the extra square brackets when we create <code>test</code>. If you use <code>real_estate.iloc[0,]</code> instead, it will return a <code>Series</code> with all the elements coerced to the same type, and this won’t <code>pd.concat</code> properly with the rest of the data!</p>
</div>
<div id="merging-or-joining-data-sets" class="section level3" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> Merging or Joining Data Sets</h3>
<p>If you have two different data sets that provide different information about the same things, you put them together using a <strong><code>merge</code></strong> (aka <strong><code>join</code></strong>) statement. The resulting data set is wider, and possibly with fewer rows. In R, you can use the <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/merge"><code>merge</code> function</a>. In Python, you can use the <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.merge.html#pandas-dataframe-merge"><code>merge</code> method</a>.</p>
<p>Suppose you have to sets of supposedly anonymized data about individual accounts on some online platforms.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="odds-and-ends.html#cb143-1" aria-hidden="true" tabindex="-1"></a>baby1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/baby1.csv&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb143-2"><a href="odds-and-ends.html#cb143-2" aria-hidden="true" tabindex="-1"></a>baby2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/baby2.csv&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb143-3"><a href="odds-and-ends.html#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baby1)</span>
<span id="cb143-4"><a href="odds-and-ends.html#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   idnum height.inches.          email_address</span></span>
<span id="cb143-5"><a href="odds-and-ends.html#cb143-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     1             74 fakeemail123@gmail.com</span></span>
<span id="cb143-6"><a href="odds-and-ends.html#cb143-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 2     3             66  anotherfake@gmail.com</span></span>
<span id="cb143-7"><a href="odds-and-ends.html#cb143-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 3     4             62      notreal@gmail.com</span></span>
<span id="cb143-8"><a href="odds-and-ends.html#cb143-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 4    23             62      notreal@gmail.com</span></span>
<span id="cb143-9"><a href="odds-and-ends.html#cb143-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(baby2)</span>
<span id="cb143-10"><a href="odds-and-ends.html#cb143-10" aria-hidden="true" tabindex="-1"></a><span class="do">##     idnum      phone                   email</span></span>
<span id="cb143-11"><a href="odds-and-ends.html#cb143-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 3901283 5051234567       notreal@gmail.com</span></span>
<span id="cb143-12"><a href="odds-and-ends.html#cb143-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2   41823 5051234568 notrealeither@gmail.com</span></span>
<span id="cb143-13"><a href="odds-and-ends.html#cb143-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 7198273 5051234568   anotherfake@gmail.com</span></span></code></pre></div>
<p>The first thing you need to ask yourself is “which column is the unique identifier that is shared between these two data sets?” In our case, they both have an “identification number” column, could that be it? Let’s suppose for the sake of argument that these two data sets are coming from different online platforms, and these two places use different schemes to number their users.</p>
<p>In this case, they both share a column with (possibly) the same information about email addresses. They are named differently in each data set, so we must specify both column names.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="odds-and-ends.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in R</span></span>
<span id="cb144-2"><a href="odds-and-ends.html#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(baby1, baby2, <span class="at">by.x =</span> <span class="st">&quot;email_address&quot;</span>, <span class="at">by.y =</span> <span class="st">&quot;email&quot;</span>)</span>
<span id="cb144-3"><a href="odds-and-ends.html#cb144-3" aria-hidden="true" tabindex="-1"></a><span class="do">##           email_address idnum.x height.inches. idnum.y      phone</span></span>
<span id="cb144-4"><a href="odds-and-ends.html#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 anotherfake@gmail.com       3             66 7198273 5051234568</span></span>
<span id="cb144-5"><a href="odds-and-ends.html#cb144-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2     notreal@gmail.com       4             62 3901283 5051234567</span></span>
<span id="cb144-6"><a href="odds-and-ends.html#cb144-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3     notreal@gmail.com      23             62 3901283 5051234567</span></span></code></pre></div>
<p>In Python, <code>merge</code> is a method attached to each <code>DataFrame</code> instance.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb145-1"><a href="odds-and-ends.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in Python</span></span>
<span id="cb145-2"><a href="odds-and-ends.html#cb145-2" aria-hidden="true" tabindex="-1"></a>baby1.merge(baby2, left_on <span class="op">=</span> <span class="st">&quot;email_address&quot;</span>, right_on <span class="op">=</span> <span class="st">&quot;email&quot;</span>)</span>
<span id="cb145-3"><a href="odds-and-ends.html#cb145-3" aria-hidden="true" tabindex="-1"></a><span class="co">##    idnum_x  height(inches)  ...       phone                  email</span></span>
<span id="cb145-4"><a href="odds-and-ends.html#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 0        3              66  ...  5051234568  anotherfake@gmail.com</span></span>
<span id="cb145-5"><a href="odds-and-ends.html#cb145-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 1        4              62  ...  5051234567      notreal@gmail.com</span></span>
<span id="cb145-6"><a href="odds-and-ends.html#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 2       23              62  ...  5051234567      notreal@gmail.com</span></span>
<span id="cb145-7"><a href="odds-and-ends.html#cb145-7" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb145-8"><a href="odds-and-ends.html#cb145-8" aria-hidden="true" tabindex="-1"></a><span class="co">## [3 rows x 6 columns]</span></span></code></pre></div>
<p>The email addresses <code>anotherfake@gmail.com</code> and <code>notreal@gmail.com</code> exist in both data sets, so each of these email addresses will end up in the result data frame. The rows in the result data set are wider and have more attributes for each individual.</p>
<p>Notice the duplicate email address, too. In this case, either the user signed up for two accounts using the same email, or one person signed up for an account with another person’s email address. In the case of duplicates, both rows will match with the same rows in the other data frame.</p>
<p>Also, in this case, all email addresses that weren’t found in both data sets were thrown away. This does not necessarily need to be the intended behavior. For instance, if we wanted to make sure no rows were thrown away, that would be possible. In this case, though, for email addresses that weren’t found in both data sets, some information will be missing. Recall that Python and R handle missing data differently (see <a href="data-types.html#how-do-r-and-python-handle-missing-values">2.2.9</a>).</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="odds-and-ends.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in R</span></span>
<span id="cb146-2"><a href="odds-and-ends.html#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="fu">merge</span>(baby1, baby2, </span>
<span id="cb146-3"><a href="odds-and-ends.html#cb146-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">by.x =</span> <span class="st">&quot;email_address&quot;</span>, <span class="at">by.y =</span> <span class="st">&quot;email&quot;</span>, </span>
<span id="cb146-4"><a href="odds-and-ends.html#cb146-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">all.x =</span> <span class="cn">TRUE</span>, <span class="at">all.y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb146-5"><a href="odds-and-ends.html#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="do">##             email_address idnum.x height.inches. idnum.y      phone</span></span>
<span id="cb146-6"><a href="odds-and-ends.html#cb146-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1   anotherfake@gmail.com       3             66 7198273 5051234568</span></span>
<span id="cb146-7"><a href="odds-and-ends.html#cb146-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  fakeemail123@gmail.com       1             74      NA         NA</span></span>
<span id="cb146-8"><a href="odds-and-ends.html#cb146-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3       notreal@gmail.com       4             62 3901283 5051234567</span></span>
<span id="cb146-9"><a href="odds-and-ends.html#cb146-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4       notreal@gmail.com      23             62 3901283 5051234567</span></span>
<span id="cb146-10"><a href="odds-and-ends.html#cb146-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 notrealeither@gmail.com      NA             NA   41823 5051234568</span></span></code></pre></div>
<div class="sourceCode" id="cb147"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb147-1"><a href="odds-and-ends.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in Python</span></span>
<span id="cb147-2"><a href="odds-and-ends.html#cb147-2" aria-hidden="true" tabindex="-1"></a>baby1.merge(baby2, </span>
<span id="cb147-3"><a href="odds-and-ends.html#cb147-3" aria-hidden="true" tabindex="-1"></a>            left_on <span class="op">=</span> <span class="st">&quot;email_address&quot;</span>, right_on <span class="op">=</span> <span class="st">&quot;email&quot;</span>, </span>
<span id="cb147-4"><a href="odds-and-ends.html#cb147-4" aria-hidden="true" tabindex="-1"></a>            how <span class="op">=</span> <span class="st">&quot;outer&quot;</span>)</span>
<span id="cb147-5"><a href="odds-and-ends.html#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="co">##    idnum_x  height(inches)  ...         phone                    email</span></span>
<span id="cb147-6"><a href="odds-and-ends.html#cb147-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 0      1.0            74.0  ...           NaN                      NaN</span></span>
<span id="cb147-7"><a href="odds-and-ends.html#cb147-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 1      3.0            66.0  ...  5.051235e+09    anotherfake@gmail.com</span></span>
<span id="cb147-8"><a href="odds-and-ends.html#cb147-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 2      4.0            62.0  ...  5.051235e+09        notreal@gmail.com</span></span>
<span id="cb147-9"><a href="odds-and-ends.html#cb147-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 3     23.0            62.0  ...  5.051235e+09        notreal@gmail.com</span></span>
<span id="cb147-10"><a href="odds-and-ends.html#cb147-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 4      NaN             NaN  ...  5.051235e+09  notrealeither@gmail.com</span></span>
<span id="cb147-11"><a href="odds-and-ends.html#cb147-11" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb147-12"><a href="odds-and-ends.html#cb147-12" aria-hidden="true" tabindex="-1"></a><span class="co">## [5 rows x 6 columns]</span></span></code></pre></div>
<p>You can see it’s slightly more concise in Python. If you are familiar with SQL, you might have heard of inner and outer joins. This is where pandas <a href="https://pandas.pydata.org/pandas-docs/version/0.15/merging.html#database-style-dataframe-joining-merging">takes some of its argument names from</a>.</p>
</div>
<div id="long-versus-wide-data" class="section level3" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> Long Versus Wide Data</h3>
<div id="long-versus-wide-in-r" class="section level4" number="3.4.4.1">
<h4><span class="header-section-number">3.4.4.1</span> Long Versus Wide in R</h4>
<p>Many types of data can be stored in either a <strong>wide</strong> or <strong>long</strong> format.</p>
<p>The classical example is data from a <em>longitudinal study.</em> If an experimental unit (in the example below a person) is repeatedly measured over time, each row would correspond to an experimental unit <em>and</em> an observation time in a data set in a long form.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="odds-and-ends.html#cb148-1" aria-hidden="true" tabindex="-1"></a>fake_long_data1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">person =</span> <span class="fu">c</span>(<span class="st">&quot;Taylor&quot;</span>,<span class="st">&quot;Taylor&quot;</span>,<span class="st">&quot;Charlie&quot;</span>,<span class="st">&quot;Charlie&quot;</span>), </span>
<span id="cb148-2"><a href="odds-and-ends.html#cb148-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">timeObserved =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb148-3"><a href="odds-and-ends.html#cb148-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nums =</span> <span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">101</span>,<span class="dv">300</span>,<span class="dv">301</span>))</span>
<span id="cb148-4"><a href="odds-and-ends.html#cb148-4" aria-hidden="true" tabindex="-1"></a>fake_long_data1</span>
<span id="cb148-5"><a href="odds-and-ends.html#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    person timeObserved nums</span></span>
<span id="cb148-6"><a href="odds-and-ends.html#cb148-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Taylor            1  100</span></span>
<span id="cb148-7"><a href="odds-and-ends.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  Taylor            2  101</span></span>
<span id="cb148-8"><a href="odds-and-ends.html#cb148-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Charlie            1  300</span></span>
<span id="cb148-9"><a href="odds-and-ends.html#cb148-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Charlie            2  301</span></span></code></pre></div>
<p>A long format can also be used if you have multiple observations (at a single time point) on an experimental unit. Here is another example.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="odds-and-ends.html#cb149-1" aria-hidden="true" tabindex="-1"></a>fake_long_data2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">person =</span> <span class="fu">c</span>(<span class="st">&quot;Taylor&quot;</span>, <span class="st">&quot;Taylor&quot;</span>, <span class="st">&quot;Charlie&quot;</span>,<span class="st">&quot;Charlie&quot;</span>), </span>
<span id="cb149-2"><a href="odds-and-ends.html#cb149-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">attributeName =</span> <span class="fu">c</span>(<span class="st">&quot;attrA&quot;</span>,<span class="st">&quot;attrB&quot;</span>,<span class="st">&quot;attrA&quot;</span>,<span class="st">&quot;attrB&quot;</span>),</span>
<span id="cb149-3"><a href="odds-and-ends.html#cb149-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nums =</span> <span class="fu">c</span>(<span class="dv">100</span>,<span class="dv">101</span>,<span class="dv">300</span>,<span class="dv">301</span>))</span>
<span id="cb149-4"><a href="odds-and-ends.html#cb149-4" aria-hidden="true" tabindex="-1"></a>fake_long_data2</span>
<span id="cb149-5"><a href="odds-and-ends.html#cb149-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    person attributeName nums</span></span>
<span id="cb149-6"><a href="odds-and-ends.html#cb149-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Taylor         attrA  100</span></span>
<span id="cb149-7"><a href="odds-and-ends.html#cb149-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  Taylor         attrB  101</span></span>
<span id="cb149-8"><a href="odds-and-ends.html#cb149-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Charlie         attrA  300</span></span>
<span id="cb149-9"><a href="odds-and-ends.html#cb149-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Charlie         attrB  301</span></span></code></pre></div>
<p>If you would like to reshape the long data sets into a wide format, you can use the <code>reshape</code> function. You will need to specify which columns correspond with the experimental unit, and which column is the “factor” variable.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="odds-and-ends.html#cb150-1" aria-hidden="true" tabindex="-1"></a>fake_wide_data1 <span class="ot">&lt;-</span> <span class="fu">reshape</span>(fake_long_data1, </span>
<span id="cb150-2"><a href="odds-and-ends.html#cb150-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">direction =</span> <span class="st">&quot;wide&quot;</span>, </span>
<span id="cb150-3"><a href="odds-and-ends.html#cb150-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">timevar =</span> <span class="st">&quot;timeObserved&quot;</span>, </span>
<span id="cb150-4"><a href="odds-and-ends.html#cb150-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">idvar =</span> <span class="st">&quot;person&quot;</span>, </span>
<span id="cb150-5"><a href="odds-and-ends.html#cb150-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">varying =</span> <span class="fu">c</span>(<span class="st">&quot;before&quot;</span>,<span class="st">&quot;after&quot;</span>)) <span class="co"># col names in new data set</span></span>
<span id="cb150-6"><a href="odds-and-ends.html#cb150-6" aria-hidden="true" tabindex="-1"></a>fake_long_data1</span>
<span id="cb150-7"><a href="odds-and-ends.html#cb150-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    person timeObserved nums</span></span>
<span id="cb150-8"><a href="odds-and-ends.html#cb150-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Taylor            1  100</span></span>
<span id="cb150-9"><a href="odds-and-ends.html#cb150-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  Taylor            2  101</span></span>
<span id="cb150-10"><a href="odds-and-ends.html#cb150-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Charlie            1  300</span></span>
<span id="cb150-11"><a href="odds-and-ends.html#cb150-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Charlie            2  301</span></span>
<span id="cb150-12"><a href="odds-and-ends.html#cb150-12" aria-hidden="true" tabindex="-1"></a>fake_wide_data1</span>
<span id="cb150-13"><a href="odds-and-ends.html#cb150-13" aria-hidden="true" tabindex="-1"></a><span class="do">##    person before after</span></span>
<span id="cb150-14"><a href="odds-and-ends.html#cb150-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Taylor    100   101</span></span>
<span id="cb150-15"><a href="odds-and-ends.html#cb150-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Charlie    300   301</span></span></code></pre></div>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="odds-and-ends.html#cb151-1" aria-hidden="true" tabindex="-1"></a>fake_wide_data2 <span class="ot">&lt;-</span> <span class="fu">reshape</span>(fake_long_data2, </span>
<span id="cb151-2"><a href="odds-and-ends.html#cb151-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">direction =</span> <span class="st">&quot;wide&quot;</span>, </span>
<span id="cb151-3"><a href="odds-and-ends.html#cb151-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">timevar =</span> <span class="st">&quot;attributeName&quot;</span>, <span class="co"># timevar is kind of a misnomer here</span></span>
<span id="cb151-4"><a href="odds-and-ends.html#cb151-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">idvar =</span> <span class="st">&quot;person&quot;</span>, </span>
<span id="cb151-5"><a href="odds-and-ends.html#cb151-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">varying =</span> <span class="fu">c</span>(<span class="st">&quot;attribute A&quot;</span>,<span class="st">&quot;attribute B&quot;</span>)) </span>
<span id="cb151-6"><a href="odds-and-ends.html#cb151-6" aria-hidden="true" tabindex="-1"></a>fake_long_data2</span>
<span id="cb151-7"><a href="odds-and-ends.html#cb151-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    person attributeName nums</span></span>
<span id="cb151-8"><a href="odds-and-ends.html#cb151-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Taylor         attrA  100</span></span>
<span id="cb151-9"><a href="odds-and-ends.html#cb151-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  Taylor         attrB  101</span></span>
<span id="cb151-10"><a href="odds-and-ends.html#cb151-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Charlie         attrA  300</span></span>
<span id="cb151-11"><a href="odds-and-ends.html#cb151-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Charlie         attrB  301</span></span>
<span id="cb151-12"><a href="odds-and-ends.html#cb151-12" aria-hidden="true" tabindex="-1"></a>fake_wide_data2</span>
<span id="cb151-13"><a href="odds-and-ends.html#cb151-13" aria-hidden="true" tabindex="-1"></a><span class="do">##    person attribute A attribute B</span></span>
<span id="cb151-14"><a href="odds-and-ends.html#cb151-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Taylor         100         101</span></span>
<span id="cb151-15"><a href="odds-and-ends.html#cb151-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Charlie         300         301</span></span></code></pre></div>
<p><code>reshape</code> will also go in the other direction: it can take wide data and convert it into long data</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="odds-and-ends.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reshape</span>(fake_wide_data1, </span>
<span id="cb152-2"><a href="odds-and-ends.html#cb152-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">direction =</span> <span class="st">&quot;long&quot;</span>,</span>
<span id="cb152-3"><a href="odds-and-ends.html#cb152-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">idvar =</span> <span class="st">&quot;person&quot;</span>, </span>
<span id="cb152-4"><a href="odds-and-ends.html#cb152-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">varying =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;before&quot;</span>,<span class="st">&quot;after&quot;</span>)),</span>
<span id="cb152-5"><a href="odds-and-ends.html#cb152-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">v.names =</span> <span class="st">&quot;nums&quot;</span>)</span>
<span id="cb152-6"><a href="odds-and-ends.html#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="do">##            person time nums</span></span>
<span id="cb152-7"><a href="odds-and-ends.html#cb152-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Taylor.1   Taylor    1  100</span></span>
<span id="cb152-8"><a href="odds-and-ends.html#cb152-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Charlie.1 Charlie    1  300</span></span>
<span id="cb152-9"><a href="odds-and-ends.html#cb152-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Taylor.2   Taylor    2  101</span></span>
<span id="cb152-10"><a href="odds-and-ends.html#cb152-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Charlie.2 Charlie    2  301</span></span>
<span id="cb152-11"><a href="odds-and-ends.html#cb152-11" aria-hidden="true" tabindex="-1"></a>fake_long_data1</span>
<span id="cb152-12"><a href="odds-and-ends.html#cb152-12" aria-hidden="true" tabindex="-1"></a><span class="do">##    person timeObserved nums</span></span>
<span id="cb152-13"><a href="odds-and-ends.html#cb152-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Taylor            1  100</span></span>
<span id="cb152-14"><a href="odds-and-ends.html#cb152-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  Taylor            2  101</span></span>
<span id="cb152-15"><a href="odds-and-ends.html#cb152-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Charlie            1  300</span></span>
<span id="cb152-16"><a href="odds-and-ends.html#cb152-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Charlie            2  301</span></span>
<span id="cb152-17"><a href="odds-and-ends.html#cb152-17" aria-hidden="true" tabindex="-1"></a><span class="fu">reshape</span>(fake_wide_data2, </span>
<span id="cb152-18"><a href="odds-and-ends.html#cb152-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">direction =</span> <span class="st">&quot;long&quot;</span>,</span>
<span id="cb152-19"><a href="odds-and-ends.html#cb152-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">idvar =</span> <span class="st">&quot;person&quot;</span>, </span>
<span id="cb152-20"><a href="odds-and-ends.html#cb152-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">varying =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;attribute A&quot;</span>,<span class="st">&quot;attribute B&quot;</span>)),</span>
<span id="cb152-21"><a href="odds-and-ends.html#cb152-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">v.names =</span> <span class="st">&quot;nums&quot;</span>)</span>
<span id="cb152-22"><a href="odds-and-ends.html#cb152-22" aria-hidden="true" tabindex="-1"></a><span class="do">##            person time nums</span></span>
<span id="cb152-23"><a href="odds-and-ends.html#cb152-23" aria-hidden="true" tabindex="-1"></a><span class="do">## Taylor.1   Taylor    1  100</span></span>
<span id="cb152-24"><a href="odds-and-ends.html#cb152-24" aria-hidden="true" tabindex="-1"></a><span class="do">## Charlie.1 Charlie    1  300</span></span>
<span id="cb152-25"><a href="odds-and-ends.html#cb152-25" aria-hidden="true" tabindex="-1"></a><span class="do">## Taylor.2   Taylor    2  101</span></span>
<span id="cb152-26"><a href="odds-and-ends.html#cb152-26" aria-hidden="true" tabindex="-1"></a><span class="do">## Charlie.2 Charlie    2  301</span></span>
<span id="cb152-27"><a href="odds-and-ends.html#cb152-27" aria-hidden="true" tabindex="-1"></a>fake_long_data2</span>
<span id="cb152-28"><a href="odds-and-ends.html#cb152-28" aria-hidden="true" tabindex="-1"></a><span class="do">##    person attributeName nums</span></span>
<span id="cb152-29"><a href="odds-and-ends.html#cb152-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 1  Taylor         attrA  100</span></span>
<span id="cb152-30"><a href="odds-and-ends.html#cb152-30" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  Taylor         attrB  101</span></span>
<span id="cb152-31"><a href="odds-and-ends.html#cb152-31" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Charlie         attrA  300</span></span>
<span id="cb152-32"><a href="odds-and-ends.html#cb152-32" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Charlie         attrB  301</span></span></code></pre></div>
</div>
<div id="long-versus-wide-in-python" class="section level4" number="3.4.4.2">
<h4><span class="header-section-number">3.4.4.2</span> Long Versus Wide in Python</h4>
<p>With pandas, we can take make wide data long with <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot.html#"><code>pd.DataFrame.pivot</code></a>, and we can go in the other direction with <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.melt.html?highlight=melt"><code>pd.DataFrame.melt</code></a>.</p>
<p>When going from wide to long, make sure to use the <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reset_index.html#"><code>pd.DataFrame.reset_index()</code></a> method afterwards to reshape the data and remove the index. Here is an example similar to the one above.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb153-1"><a href="odds-and-ends.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb153-2"><a href="odds-and-ends.html#cb153-2" aria-hidden="true" tabindex="-1"></a>fake_long_data1 <span class="op">=</span> pd.DataFrame({<span class="st">&#39;person&#39;</span> : [<span class="st">&quot;Taylor&quot;</span>,<span class="st">&quot;Taylor&quot;</span>,<span class="st">&quot;Charlie&quot;</span>,<span class="st">&quot;Charlie&quot;</span>], </span>
<span id="cb153-3"><a href="odds-and-ends.html#cb153-3" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&#39;time_observed&#39;</span> : [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb153-4"><a href="odds-and-ends.html#cb153-4" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&#39;nums&#39;</span> : [<span class="dv">100</span>,<span class="dv">101</span>,<span class="dv">300</span>,<span class="dv">301</span>]})</span>
<span id="cb153-5"><a href="odds-and-ends.html#cb153-5" aria-hidden="true" tabindex="-1"></a>fake_long_data1</span>
<span id="cb153-6"><a href="odds-and-ends.html#cb153-6" aria-hidden="true" tabindex="-1"></a><span class="co">##     person  time_observed  nums</span></span>
<span id="cb153-7"><a href="odds-and-ends.html#cb153-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 0   Taylor              1   100</span></span>
<span id="cb153-8"><a href="odds-and-ends.html#cb153-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 1   Taylor              2   101</span></span>
<span id="cb153-9"><a href="odds-and-ends.html#cb153-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 2  Charlie              1   300</span></span>
<span id="cb153-10"><a href="odds-and-ends.html#cb153-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 3  Charlie              2   301</span></span>
<span id="cb153-11"><a href="odds-and-ends.html#cb153-11" aria-hidden="true" tabindex="-1"></a>pivot_data1 <span class="op">=</span> fake_long_data1.pivot(index<span class="op">=</span><span class="st">&#39;person&#39;</span>, columns<span class="op">=</span><span class="st">&#39;time_observed&#39;</span>, values<span class="op">=</span><span class="st">&#39;nums&#39;</span>)</span>
<span id="cb153-12"><a href="odds-and-ends.html#cb153-12" aria-hidden="true" tabindex="-1"></a>pivot_data1</span>
<span id="cb153-13"><a href="odds-and-ends.html#cb153-13" aria-hidden="true" tabindex="-1"></a><span class="co">## time_observed    1    2</span></span>
<span id="cb153-14"><a href="odds-and-ends.html#cb153-14" aria-hidden="true" tabindex="-1"></a><span class="co">## person                 </span></span>
<span id="cb153-15"><a href="odds-and-ends.html#cb153-15" aria-hidden="true" tabindex="-1"></a><span class="co">## Charlie        300  301</span></span>
<span id="cb153-16"><a href="odds-and-ends.html#cb153-16" aria-hidden="true" tabindex="-1"></a><span class="co">## Taylor         100  101</span></span>
<span id="cb153-17"><a href="odds-and-ends.html#cb153-17" aria-hidden="true" tabindex="-1"></a>fake_wide_data1 <span class="op">=</span> pivot_data1.reset_index()</span>
<span id="cb153-18"><a href="odds-and-ends.html#cb153-18" aria-hidden="true" tabindex="-1"></a>fake_wide_data1</span>
<span id="cb153-19"><a href="odds-and-ends.html#cb153-19" aria-hidden="true" tabindex="-1"></a><span class="co">## time_observed   person    1    2</span></span>
<span id="cb153-20"><a href="odds-and-ends.html#cb153-20" aria-hidden="true" tabindex="-1"></a><span class="co">## 0              Charlie  300  301</span></span>
<span id="cb153-21"><a href="odds-and-ends.html#cb153-21" aria-hidden="true" tabindex="-1"></a><span class="co">## 1               Taylor  100  101</span></span></code></pre></div>
<p>Here’s one more example showing the same functionality–going fom wide to long format.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb154-1"><a href="odds-and-ends.html#cb154-1" aria-hidden="true" tabindex="-1"></a>fake_long_data2 <span class="op">=</span> pd.DataFrame({<span class="st">&#39;person&#39;</span> : [<span class="st">&quot;Taylor&quot;</span>,<span class="st">&quot;Taylor&quot;</span>,<span class="st">&quot;Charlie&quot;</span>,<span class="st">&quot;Charlie&quot;</span>], </span>
<span id="cb154-2"><a href="odds-and-ends.html#cb154-2" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&#39;attribute_name&#39;</span> : [<span class="st">&#39;attrA&#39;</span>, <span class="st">&#39;attrB&#39;</span>, <span class="st">&#39;attrA&#39;</span>, <span class="st">&#39;attrB&#39;</span>],</span>
<span id="cb154-3"><a href="odds-and-ends.html#cb154-3" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&#39;nums&#39;</span> : [<span class="dv">100</span>,<span class="dv">101</span>,<span class="dv">300</span>,<span class="dv">301</span>]})</span>
<span id="cb154-4"><a href="odds-and-ends.html#cb154-4" aria-hidden="true" tabindex="-1"></a>fake_wide_data2 <span class="op">=</span> fake_long_data2.pivot(index<span class="op">=</span><span class="st">&#39;person&#39;</span>, </span>
<span id="cb154-5"><a href="odds-and-ends.html#cb154-5" aria-hidden="true" tabindex="-1"></a>                                        columns<span class="op">=</span><span class="st">&#39;attribute_name&#39;</span>, </span>
<span id="cb154-6"><a href="odds-and-ends.html#cb154-6" aria-hidden="true" tabindex="-1"></a>                                        values<span class="op">=</span><span class="st">&#39;nums&#39;</span>).reset_index()</span>
<span id="cb154-7"><a href="odds-and-ends.html#cb154-7" aria-hidden="true" tabindex="-1"></a>fake_wide_data2</span>
<span id="cb154-8"><a href="odds-and-ends.html#cb154-8" aria-hidden="true" tabindex="-1"></a><span class="co">## attribute_name   person  attrA  attrB</span></span>
<span id="cb154-9"><a href="odds-and-ends.html#cb154-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 0               Charlie    300    301</span></span>
<span id="cb154-10"><a href="odds-and-ends.html#cb154-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 1                Taylor    100    101</span></span></code></pre></div>
<p>Here are some examples of going in the other direction: from wide to long with <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.melt.html?highlight=melt"><code>pd.DataFrame.melt</code></a>. The first example specifies value columns by integers.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb155-1"><a href="odds-and-ends.html#cb155-1" aria-hidden="true" tabindex="-1"></a>fake_wide_data1</span>
<span id="cb155-2"><a href="odds-and-ends.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co">## time_observed   person    1    2</span></span>
<span id="cb155-3"><a href="odds-and-ends.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="co">## 0              Charlie  300  301</span></span>
<span id="cb155-4"><a href="odds-and-ends.html#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 1               Taylor  100  101</span></span>
<span id="cb155-5"><a href="odds-and-ends.html#cb155-5" aria-hidden="true" tabindex="-1"></a>fake_wide_data1.melt(id_vars <span class="op">=</span> <span class="st">&quot;person&quot;</span>, value_vars <span class="op">=</span> [<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb155-6"><a href="odds-and-ends.html#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="co">##     person time_observed  value</span></span>
<span id="cb155-7"><a href="odds-and-ends.html#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 0  Charlie             1    300</span></span>
<span id="cb155-8"><a href="odds-and-ends.html#cb155-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 1   Taylor             1    100</span></span>
<span id="cb155-9"><a href="odds-and-ends.html#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 2  Charlie             2    301</span></span>
<span id="cb155-10"><a href="odds-and-ends.html#cb155-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 3   Taylor             2    101</span></span></code></pre></div>
<p>The second example uses strings to specify value columns.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb156-1"><a href="odds-and-ends.html#cb156-1" aria-hidden="true" tabindex="-1"></a>fake_wide_data2</span>
<span id="cb156-2"><a href="odds-and-ends.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="co">## attribute_name   person  attrA  attrB</span></span>
<span id="cb156-3"><a href="odds-and-ends.html#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="co">## 0               Charlie    300    301</span></span>
<span id="cb156-4"><a href="odds-and-ends.html#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 1                Taylor    100    101</span></span>
<span id="cb156-5"><a href="odds-and-ends.html#cb156-5" aria-hidden="true" tabindex="-1"></a>fake_wide_data2.melt(id_vars <span class="op">=</span> <span class="st">&quot;person&quot;</span>, value_vars <span class="op">=</span> [<span class="st">&#39;attrA&#39;</span>,<span class="st">&#39;attrB&#39;</span>])</span>
<span id="cb156-6"><a href="odds-and-ends.html#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="co">##     person attribute_name  value</span></span>
<span id="cb156-7"><a href="odds-and-ends.html#cb156-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 0  Charlie          attrA    300</span></span>
<span id="cb156-8"><a href="odds-and-ends.html#cb156-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 1   Taylor          attrA    100</span></span>
<span id="cb156-9"><a href="odds-and-ends.html#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 2  Charlie          attrB    301</span></span>
<span id="cb156-10"><a href="odds-and-ends.html#cb156-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 3   Taylor          attrB    101</span></span></code></pre></div>
</div>
</div>
</div>
<div id="visualization" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Visualization</h2>
<p>I describe a few plotting paradigms in R and Python below. Note that these descriptions are extremely thin. More depth could easily turn any of these subsections into an entire textbook!</p>
<div id="base-r-plotting" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Base R Plotting</h3>
<p>R comes with some built-in functions <code>plot</code>, <code>hist</code>, <code>boxplot</code>, etc. Many of these reside in <code>package:graphics</code>, which comes pre-loaded into the search path. <code>plot</code> on the other hand, is higher up the search path in <code>package:base</code>–it is a generic method whose methods might be in <code>package:graphics</code> or some place else.</p>
<p>Base plotting covers most needs, so that’s what we spend most time with. However, there are a large number of third-party libraries for plotting that you might consider looking into if you want to follow a certain aesthetic, or if you want plotting specialized for certain cases (e.g. geospatial plots).</p>
<p>Recall our Albemarle Real Estate data set.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="odds-and-ends.html#cb157-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/albemarle_real_estate.csv&quot;</span>)</span>
<span id="cb157-2"><a href="odds-and-ends.html#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span>
<span id="cb157-3"><a href="odds-and-ends.html#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   YearBuilt YearRemodeled Condition NumStories FinSqFt Bedroom FullBath HalfBath TotalRooms LotSize TotalValue</span></span>
<span id="cb157-4"><a href="odds-and-ends.html#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      2006             0   Average       1.00    1922       3        3        0         10   5.000     409900</span></span>
<span id="cb157-5"><a href="odds-and-ends.html#cb157-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      2003             0   Average       1.00    1848       3        2        0          7  61.189     523100</span></span>
<span id="cb157-6"><a href="odds-and-ends.html#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      1972             0   Average       1.00    1248       2        1        0          4   1.760     180900</span></span>
<span id="cb157-7"><a href="odds-and-ends.html#cb157-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      1998             0      Good       1.00    1244       1        1        0          3  50.648     620700</span></span>
<span id="cb157-8"><a href="odds-and-ends.html#cb157-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5      1886             0   Average       1.86    1861       4        1        0          6   3.880     162500</span></span>
<span id="cb157-9"><a href="odds-and-ends.html#cb157-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6      1910             0      Fair       1.53    1108       3        1        0          6   8.838     167200</span></span>
<span id="cb157-10"><a href="odds-and-ends.html#cb157-10" aria-hidden="true" tabindex="-1"></a><span class="do">##          City</span></span>
<span id="cb157-11"><a href="odds-and-ends.html#cb157-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 1      CROZET</span></span>
<span id="cb157-12"><a href="odds-and-ends.html#cb157-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 2      CROZET</span></span>
<span id="cb157-13"><a href="odds-and-ends.html#cb157-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 EARLYSVILLE</span></span>
<span id="cb157-14"><a href="odds-and-ends.html#cb157-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 4      CROZET</span></span>
<span id="cb157-15"><a href="odds-and-ends.html#cb157-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 5      CROZET</span></span>
<span id="cb157-16"><a href="odds-and-ends.html#cb157-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 6      CROZET</span></span></code></pre></div>
<p>If we wanted to get a general idea of how expensive homes were in Albemarle County, we could use a histogram. This helps us visualize a univariate numerical variable/column. Below I plot the (natural) logarithm of home prices.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="odds-and-ends.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">log</span>(df<span class="sc">$</span>TotalValue), </span>
<span id="cb158-2"><a href="odds-and-ends.html#cb158-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;natural logarithm of home price&quot;</span>, <span class="at">main =</span> <span class="st">&quot;Super-Duper Plot!&quot;</span>)</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-176-1.png" width="672" /></p>
<p>I specified the <code>xlab=</code> and <code>main=</code> arguments, but there are many more that could be tweaked. Make sure to skim the options in the documentation (<code>?hist</code>).</p>
<p><code>plot</code> is useful for plotting two univariate numerical variables. This can be done in time series plots (variable versus time) and scatter plots (one variable versus another).</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="odds-and-ends.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb159-2"><a href="odds-and-ends.html#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>TotalValue, df<span class="sc">$</span>LotSize, </span>
<span id="cb159-3"><a href="odds-and-ends.html#cb159-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;total value ($)&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;lot size (sq. ft.)&quot;</span>,</span>
<span id="cb159-4"><a href="odds-and-ends.html#cb159-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">3</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">type =</span> <span class="st">&quot;b&quot;</span>)</span>
<span id="cb159-5"><a href="odds-and-ends.html#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">log</span>(df<span class="sc">$</span>TotalValue), <span class="fu">log</span>(df<span class="sc">$</span>LotSize), </span>
<span id="cb159-6"><a href="odds-and-ends.html#cb159-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;log. total value&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;log. lot size&quot;</span>, </span>
<span id="cb159-7"><a href="odds-and-ends.html#cb159-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">2</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">type =</span> <span class="st">&quot;p&quot;</span>)</span>
<span id="cb159-8"><a href="odds-and-ends.html#cb159-8" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fu">log</span>(<span class="fu">mean</span>(df<span class="sc">$</span>LotSize)), <span class="at">col =</span> <span class="st">&quot;green&quot;</span>)</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-177-1.png" width="672" /></p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="odds-and-ends.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code></pre></div>
<p>I use some of the many arguments available (type <code>?plot</code>). <code>xlab=</code> and <code>ylab=</code> specify the x- and y-axis labels, respectively. <code>col=</code> is short for “color.” <code>pch=</code> is short for “point character.” Changing this will change the symbol shapes used for each point. <code>type=</code> is more general than that, but it is related. I typically use it to specify whether or not I want the points connected with lines.</p>
<p>I also use a couple other functions. <code>abline</code> is used to superimpose lines over the top of a plot. They can be <code>h</code>orizontal, <code>v</code>ertical, or you can specify them in slope-intercept form, or by providing a linear model object. I also used <code>par</code> to set a graphical parameter. The graphical parameter <code>par()$mfrow</code> sets the layout of a multiple plot visualization. I then set it back to the standard <span class="math inline">\(1 \times 1\)</span> layout afterwards.</p>
</div>
<div id="plotting-with-ggplot2" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Plotting with <code>ggplot2</code></h3>
<p><a href="https://ggplot2.tidyverse.org/index.html"><code>ggplot2</code></a> is a popular third-party visualization package for R. There are also libraries in Python (e.g. <a href="https://plotnine.readthedocs.io/en/stable/#"><code>plotnine</code></a>) that look and feel quite similar. This subsection provides a short tutorial on how to use <code>ggplot2</code> in R, and it is primarily based off of the material provided in <span class="citation">(<a href="#ref-ggplot2" role="doc-biblioref">Wickham 2016</a>)</span>. An online version of this text is provided <a href="https://ggplot2-book.org">here</a>.</p>
<p><code>ggplot2</code> code looks a lot different than the code in the above section<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a>. There, we would write a series of function calls, and each would change some state in the current figure. Here, we call different <code>ggplot2</code> functions that create S3 objects with special behavior (more information about S3 objects in subsection <a href="an-introduction-to-object-oriented-programming.html#using-s3-objects">4.2.2</a>), and then we “add” (i.e. we use the <code>+</code> operator) them together.</p>
<p>This new design is not to encourage you to think about S3 object-oriented systems. Rather, it is to get you thinking about making visualizations using the “grammar of graphics” <span class="citation">(<a href="#ref-gog" role="doc-biblioref">Wilkinson 2005</a>)</span>. <code>ggplot2</code> makes use of its own specialized vocabulary that is taken from this book. As we get started, I will try to introduce some of this vocabulary slowly.</p>
<p>The core function is the <a href="https://www.rdocumentation.org/packages/ggplot2/versions/3.3.5/topics/ggplot"><code>ggplot</code> function</a>. This is the function that figures are initialized with; it is the function that will take in information about <em>which</em> data set you want to plot, and <em>how</em> you want to plot it. The raw data is provided in the first argument. The second argument, <code>mapping=</code>, is more confusing. The argument should be constructed with the <code>aes</code> function. In the parlance of <code>ggplot2</code>, <code>aes</code> constructs an <strong>aesthetic mapping</strong>. Think of the “aesthetic mapping” as stored information that can be used later on–it “maps” data to visual properties of a figure.</p>
<p>Consider this first example.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="odds-and-ends.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb161-2"><a href="odds-and-ends.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy))</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-178-1.png" width="80%" /></p>
<p>You’ll notice a few things about the code and the result produced:</p>
<ol style="list-style-type: decimal">
<li><p>No geometric shapes show up!</p></li>
<li><p>A Cartesian coordinate system is displayed, and the x-axis and y-axis were created based on aesthetic mapping provided (confirm this by typing <code>summary(mpg$displ)</code> and <code>summary(mpg$hwy)</code>).</p></li>
<li><p>The axis labels are taken from the column names provided to <code>aes</code>.</p></li>
</ol>
<p>To plot geometric shapes (<em>geoms</em> in the parlance of <code>ggplot2</code>), we need to add <a href="https://ggplot2-book.org/toolbox.html#toolbox"><strong>layers</strong></a> to it. “Layers” is quite a broad term–it does not only apply to geometric objects. In fact, in <code>ggplot2</code>, a layer can be pretty much anything: raw data, summarized data, transformed data, annotations, etc. However, the functions that add geometric object layers usually start with the prefix <code>geom_</code>. In RStudio, after loading <code>ggplot2</code>, type <code>geom_</code>, and then press <code>&lt;Tab&gt;</code> (autocomplete) to see some of the options.</p>
<p>Consider the function <a href="https://www.rdocumentation.org/packages/ggplot2/versions/3.3.5/topics/geom_point"><code>geom_point</code></a>. It too returns an S3 instance that has specialized behavior. In the parlance of <code>ggplot2</code>, it adds a <a href="https://ggplot2-book.org/getting-started.html#basic-use">scatterplot</a> layer to the figure.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="odds-and-ends.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb162-2"><a href="odds-and-ends.html#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy))  <span class="sc">+</span></span>
<span id="cb162-3"><a href="odds-and-ends.html#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
<p>Notice that we did not need to provide any arguments to <code>geom_point</code>. The aesthetic mappings were used by the new layer.</p>
<p>There are <em>many</em> types of layers that you can add to a plot, and you’re not limited to any number of them in a given plot. For example, if we wanted to add a title, we could use the <code>ggtitle</code> function to add a title layer. Unlike <code>geom_point</code>, this function will need to take an argument because the desired title is not stored as an aesthetic mapping.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="odds-and-ends.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy))  <span class="sc">+</span></span>
<span id="cb163-2"><a href="odds-and-ends.html#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb163-3"><a href="odds-and-ends.html#cb163-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;my favorite scatterplot&quot;</span>)</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
<p>Additionally, notice that the same layer will behave much differently if we change the aesthetic mapping.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="odds-and-ends.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> manufacturer))  <span class="sc">+</span></span>
<span id="cb164-2"><a href="odds-and-ends.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb164-3"><a href="odds-and-ends.html#cb164-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;my favorite scatterplot&quot;</span>)</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-181-1.png" width="672" /></p>
<p>If we want tighter control on the aesthetic mapping, we can use <a href="https://ggplot2-book.org/scales.html#scales"><strong>scales</strong></a>. Syntactically, these are things we “add” (<code>+</code>) to the figure, just like layers. However, these scales are constructed with a different set of functions, many of which start with the prefix <code>scale_</code>.</p>
<p>We can change attributes of the axes like this.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="odds-and-ends.html#cb165-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> manufacturer))  <span class="sc">+</span></span>
<span id="cb165-2"><a href="odds-and-ends.html#cb165-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb165-3"><a href="odds-and-ends.html#cb165-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">ggtitle</span>(<span class="st">&quot;my favorite scatterplot&quot;</span>)</span>
<span id="cb165-4"><a href="odds-and-ends.html#cb165-4" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span> <span class="fu">scale_x_log10</span>() <span class="sc">+</span> <span class="fu">scale_y_reverse</span>()</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-182-1.png" width="672" /></p>
<p>We can also change plot colors with scale layers. Let’s add an aesthetic called fill so we can use colors to denote the value of a numerical (not categorical) column. This data set doesn’t have any more unused numerical columns, so let’s create a new one called <code>score</code>. We also use a new geom layer from a function called <code>geom_tile()</code>.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="odds-and-ends.html#cb166-1" aria-hidden="true" tabindex="-1"></a>mpg<span class="sc">$</span>score <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(mpg<span class="sc">$</span>displ<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> mpg<span class="sc">$</span>hwy<span class="sc">^</span><span class="dv">2</span>) </span>
<span id="cb166-2"><a href="odds-and-ends.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">fill =</span> score ))  <span class="sc">+</span></span>
<span id="cb166-3"><a href="odds-and-ends.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() </span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-183-1.png" width="672" /></p>
<p>If we didn’t like these colors, we could change them with a scale layer. Personally, I like this one.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="odds-and-ends.html#cb167-1" aria-hidden="true" tabindex="-1"></a>mpg<span class="sc">$</span>score <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(mpg<span class="sc">$</span>displ<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> mpg<span class="sc">$</span>hwy<span class="sc">^</span><span class="dv">2</span>) </span>
<span id="cb167-2"><a href="odds-and-ends.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">fill =</span> score ))  <span class="sc">+</span></span>
<span id="cb167-3"><a href="odds-and-ends.html#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span> </span>
<span id="cb167-4"><a href="odds-and-ends.html#cb167-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_b</span>()</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-184-1.png" width="672" /></p>
<p>There are many to choose from, though. Here’s another one.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="odds-and-ends.html#cb168-1" aria-hidden="true" tabindex="-1"></a>mpg<span class="sc">$</span>score <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>(mpg<span class="sc">$</span>displ<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> mpg<span class="sc">$</span>hwy<span class="sc">^</span><span class="dv">2</span>) </span>
<span id="cb168-2"><a href="odds-and-ends.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">fill =</span> score ))  <span class="sc">+</span></span>
<span id="cb168-3"><a href="odds-and-ends.html#cb168-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>() <span class="sc">+</span> </span>
<span id="cb168-4"><a href="odds-and-ends.html#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>()</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-185-1.png" width="672" /></p>
</div>
<div id="plotting-with-matplotlib" class="section level3" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> Plotting with Matplotlib</h3>
<p>Matplotlib <span class="citation">(<a href="#ref-Hunter:2007" role="doc-biblioref">Hunter 2007</a>)</span> is a third-party visualization library in Python. It’s the oldest and most heavily-used, so it’s the best way to start making graphics in Python, in my humble opinion. It also comes installed with Anaconda. This short introduction borrows heavily from the myriad of <a href="https://matplotlib.org/stable/tutorials/index.html">tutorials</a> on Matplotlib’s website. I will start off making a simple plot, and commenting on each line of code.</p>
<div class="rmd-details">
<p>
You can use either “pyplot-style” (e.g. <code>plt.plot()</code>) or “object-oriented-style” to make figures in Matplotlib. Even though using the first type is faster to make simple plots, I will only describe the second one. It is the recommended approach because it is more extensible. However, the first one resembles the syntax of MATLAB. If you’re familiar with MATLAB, you might consider learning a little about the first style, as well.
</p>
</div>
<div class="sourceCode" id="cb169"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb169-1"><a href="odds-and-ends.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt       <span class="co"># 1</span></span>
<span id="cb169-2"><a href="odds-and-ends.html#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np                    <span class="co"># 2</span></span>
<span id="cb169-3"><a href="odds-and-ends.html#cb169-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()              <span class="co"># 3</span></span>
<span id="cb169-4"><a href="odds-and-ends.html#cb169-4" aria-hidden="true" tabindex="-1"></a>ax.hist(np.random.normal(size<span class="op">=</span><span class="dv">1000</span>))  <span class="co"># 4</span></span>
<span id="cb169-5"><a href="odds-and-ends.html#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="co">## (array([  5.,  18.,  56., 131., 243., 259., 176.,  82.,  25.,   5.]), array([-3.35326286, -2.69592628, -2.0385897 , -1.38125312, -0.72391653,</span></span>
<span id="cb169-6"><a href="odds-and-ends.html#cb169-6" aria-hidden="true" tabindex="-1"></a><span class="co">##        -0.06657995,  0.59075663,  1.24809321,  1.9054298 ,  2.56276638,</span></span>
<span id="cb169-7"><a href="odds-and-ends.html#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="co">##         3.22010296]), &lt;a list of 10 Patch objects&gt;)</span></span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-1-1.png" width="80%" /></p>
<p>In the first line, we import the <code>pyplot</code> submodule of <code>matplotlib</code>. We rename it to <code>plt</code>, which is short, and will save us some typing. It also follows the most commonly-used convention.</p>
<p>Second, we import Numpy in the same way we always have. Matplotlib is written to work with Numpy arrays. If you want to plot some data, and it isn’t in a Numpy array, you should convert it first.</p>
<p>Third, we call the <code>subplots</code> function, and use <em>sequence unpacking</em> to unpack the returned container into individual objects without storing the overall container. “Subplots” sounds like it will make many different plots all on one figure, but if you look at the <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib-pyplot-subplots">documentation</a> the number of rows and columns defaults to one and one, respectively.</p>
<p><code>plt.subplots</code> returns a <a href="https://docs.python.org/3.3/library/stdtypes.html?highlight=tuple#tuple"><code>tuple</code></a><a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a> of two things: a <code>Figure</code> object, and one or more <code>Axes</code> object(s). These two classes will require some explanation.</p>
<ol style="list-style-type: decimal">
<li><p>A <a href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure"><code>Figure</code> object</a> is the overall visualization object you’re making. It holds onto all of the plot elements. If you want to save all of your progress (e.g. with <code>fig.savefig('my_picture.png')</code>), you’re saving the overall <code>Figure</code> object.</p></li>
<li><p>One or more <a href="https://matplotlib.org/stable/api/axes_api.html#the-axes-class"><code>Axes</code> objects</a> are contained in a <code>Figure</code> object. Each is <a href="https://matplotlib.org/stable/tutorials/introductory/usage.html#axes">"what you think of as ‘a plot’</a>." They hold onto two <code>Axis</code> objects (in the case of 2-dimensional plots) or three (in the case of 3-dimensional arguments). We are usually calling the methods of these objects to effect changes on a plot.</p></li>
</ol>
<p>In line four, we call the <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.hist.html#matplotlib.axes.Axes.hist"><code>hist()</code> method</a> of the <code>Axes</code> object called <code>ax</code>. There are many more plots available than plain histograms. Each one has its own method, and you can peruse the options in <a href="https://matplotlib.org/stable/api/axes_api.html#plotting">the documentation</a>.</p>
<p>If you want to make figures more elaborate, just keep calling different methods of <code>ax</code>. If you want to fit more subplots to the same figure, add more <code>Axes</code> objects. Here is an example using some code from <a href="https://matplotlib.org/stable/tutorials/introductory/usage.html#the-object-oriented-interface-and-the-pyplot-interface">one of the official Matplotlib tutorials</a>.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb170-1"><a href="odds-and-ends.html#cb170-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">2</span><span class="op">*</span>np.pi, <span class="dv">100</span>) <span class="co"># x values grid shared by both subplots</span></span>
<span id="cb170-2"><a href="odds-and-ends.html#cb170-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-3"><a href="odds-and-ends.html#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create two subplots...one row two columns</span></span>
<span id="cb170-4"><a href="odds-and-ends.html#cb170-4" aria-hidden="true" tabindex="-1"></a>fig, myAxes <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>) <span class="co"># kind of like par(mfrow=c(1,2)) in R</span></span>
<span id="cb170-5"><a href="odds-and-ends.html#cb170-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-6"><a href="odds-and-ends.html#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="co"># first subplot</span></span>
<span id="cb170-7"><a href="odds-and-ends.html#cb170-7" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">0</span>].plot(x, x, label<span class="op">=</span><span class="st">&#39;linear&#39;</span>)  <span class="co"># Plot some data on the axes.</span></span>
<span id="cb170-8"><a href="odds-and-ends.html#cb170-8" aria-hidden="true" tabindex="-1"></a><span class="co">## [&lt;matplotlib.lines.Line2D object at 0x7f6cd7a64e80&gt;]</span></span>
<span id="cb170-9"><a href="odds-and-ends.html#cb170-9" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">0</span>].plot(x, x<span class="op">**</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">&#39;quadratic&#39;</span>)  <span class="co"># Plot more data on the axes...</span></span>
<span id="cb170-10"><a href="odds-and-ends.html#cb170-10" aria-hidden="true" tabindex="-1"></a><span class="co">## [&lt;matplotlib.lines.Line2D object at 0x7f6cd7a60240&gt;]</span></span>
<span id="cb170-11"><a href="odds-and-ends.html#cb170-11" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">0</span>].plot(x, x<span class="op">**</span><span class="dv">3</span>, label<span class="op">=</span><span class="st">&#39;cubic&#39;</span>)  <span class="co"># ... and some more.</span></span>
<span id="cb170-12"><a href="odds-and-ends.html#cb170-12" aria-hidden="true" tabindex="-1"></a><span class="co">## [&lt;matplotlib.lines.Line2D object at 0x7f6cd7a605c0&gt;]</span></span>
<span id="cb170-13"><a href="odds-and-ends.html#cb170-13" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">0</span>].set_xlabel(<span class="st">&#39;x label&#39;</span>)  <span class="co"># Add an x-label to the axes.</span></span>
<span id="cb170-14"><a href="odds-and-ends.html#cb170-14" aria-hidden="true" tabindex="-1"></a><span class="co">## Text(0.5, 0, &#39;x label&#39;)</span></span>
<span id="cb170-15"><a href="odds-and-ends.html#cb170-15" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">0</span>].set_ylabel(<span class="st">&#39;y label&#39;</span>)  <span class="co"># Add a y-label to the axes.</span></span>
<span id="cb170-16"><a href="odds-and-ends.html#cb170-16" aria-hidden="true" tabindex="-1"></a><span class="co">## Text(0, 0.5, &#39;y label&#39;)</span></span>
<span id="cb170-17"><a href="odds-and-ends.html#cb170-17" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">0</span>].set_title(<span class="st">&quot;Simple Plot&quot;</span>)  <span class="co"># Add a title to the axes.</span></span>
<span id="cb170-18"><a href="odds-and-ends.html#cb170-18" aria-hidden="true" tabindex="-1"></a><span class="co">## Text(0.5, 1.0, &#39;Simple Plot&#39;)</span></span>
<span id="cb170-19"><a href="odds-and-ends.html#cb170-19" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">0</span>].legend()  <span class="co"># Add a legend.</span></span>
<span id="cb170-20"><a href="odds-and-ends.html#cb170-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-21"><a href="odds-and-ends.html#cb170-21" aria-hidden="true" tabindex="-1"></a><span class="co"># second subplot</span></span>
<span id="cb170-22"><a href="odds-and-ends.html#cb170-22" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;matplotlib.legend.Legend object at 0x7f6cd7731eb8&gt;</span></span>
<span id="cb170-23"><a href="odds-and-ends.html#cb170-23" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">1</span>].plot(x,np.sin(x), label<span class="op">=</span><span class="st">&#39;sine wave&#39;</span>)</span>
<span id="cb170-24"><a href="odds-and-ends.html#cb170-24" aria-hidden="true" tabindex="-1"></a><span class="co">## [&lt;matplotlib.lines.Line2D object at 0x7f6cd7a60ba8&gt;]</span></span>
<span id="cb170-25"><a href="odds-and-ends.html#cb170-25" aria-hidden="true" tabindex="-1"></a>myAxes[<span class="dv">1</span>].legend()</span></code></pre></div>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-1-3.png" width="672" /></p>
<p><img src="r_and_python_book_files/figure-html/unnamed-chunk-1-5.png" width="80%" /></p>
<p>import numpy as np
my_inputs = np.linspace(start = 0, stop = 2*np.pi)
outputs = np.sin(my_inputs)</p>
<p>import matplotlib.pyplot as plt
plt.plot(my_inputs, outputs)</p>
<p>very good! <a href="https://jakevdp.github.io/PythonDataScienceHandbook/04.12-three-dimensional-plotting.html" class="uri">https://jakevdp.github.io/PythonDataScienceHandbook/04.12-three-dimensional-plotting.html</a></p>
</div>
</div>
<div id="working-with-text-data" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Working With Text Data</h2>
<p>TODO</p>
<ul>
<li>regular expressions</li>
</ul>
</div>
<div id="working-with-dates-and-times" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Working With Dates and Times</h2>
<p>TODO</p>
</div>
<div id="running-scripts-from-the-command-line" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Running Scripts from the Command Line</h2>
<p>TODO</p>
</div>
<div id="exercises-2" class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Write a Metropolis-Hastings algorithm.</p></li>
<li><p>Make a gif</p></li>
<li><p>What kind of situation would a left- or right-join be used?</p></li>
<li><p>Make a “phase plot”</p></li>
</ol>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-uci_data" class="csl-entry">
Dua, Dheeru, and Casey Graff. 2017. <span>“<span>UCI</span> Machine Learning Repository.”</span> University of California, Irvine, School of Information; Computer Sciences. <a href="http://archive.ics.uci.edu/ml">http://archive.ics.uci.edu/ml</a>.
</div>
<div id="ref-Hunter:2007" class="csl-entry">
Hunter, J. D. 2007. <span>“Matplotlib: A 2d Graphics Environment.”</span> <em>Computing in Science &amp; Engineering</em> 9 (3): 90–95. <a href="https://doi.org/10.1109/MCSE.2007.55">https://doi.org/10.1109/MCSE.2007.55</a>.
</div>
<div id="ref-monte-carlo-stat-methods" class="csl-entry">
Robert, Christian P., and George Casella. 2005. <em>Monte Carlo Statistical Methods (Springer Texts in Statistics)</em>. Berlin, Heidelberg: Springer-Verlag.
</div>
<div id="ref-ggplot2" class="csl-entry">
Wickham, Hadley. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-gog" class="csl-entry">
Wilkinson, Leland. 2005. <em>The Grammar of Graphics (Statistics and Computing)</em>. Berlin, Heidelberg: Springer-Verlag.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="8">
<li id="fn8"><p>I am avoiding any mention of <em>R’s</em> namespaces and modules. These are things that exist, but they are different from Python’s namespaces and modules, and are not within the scope of this text.<a href="odds-and-ends.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p>The scripts you write are modules. They come with the intention of being run from start to finish. Other non-script modules are just a bag of definitions to be used in other places.<a href="odds-and-ends.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>Sometimes a package is called a <em>library</em> but I will avoid this terminology.<a href="odds-and-ends.html#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>The posterior distribution is usually the object of interest in Bayesian statistics. According to Bayes’ Rule, the unnormalized posterior is usually the product of two “easy” functions. However, integrating the product is not always possible!<a href="odds-and-ends.html#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p>This is the density of a <span class="math inline">\(\text{Beta}(3,2)\)</span> random variable, if you’re curious.<a href="odds-and-ends.html#fnref12" class="footnote-back">↩︎</a></p></li>
<li id="fn13"><p>Personally, I find its syntax more confusing, and so I tend to prefer base graphics. However, it is popular at the moment, and so I do believe that it is important to mention here in this text.<a href="odds-and-ends.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p>We didn’t talk about <code>tuple</code>s in chapter 2, but you can think of them as being similar to <code>list</code>s. They are containers that can hold elements of different types. There are a few key differences, though: they are made with parentheses (e.g. <code>('a')</code> ) instead of square brackets, and they are immutable instead of mutable.<a href="odds-and-ends.html#fnref14" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-types.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="an-introduction-to-object-oriented-programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tbrown122387/r_and_python_book/edit/master/03-odds_and_ends.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
