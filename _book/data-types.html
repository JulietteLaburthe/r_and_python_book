<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data Types | An Introduction to R and Python For Data Analysis: A Side By Side Approach</title>
  <meta name="description" content="Chapter 2 Data Types | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data Types | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="tbrown122387/r_and_python_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data Types | An Introduction to R and Python For Data Analysis: A Side By Side Approach" />
  
  
  

<meta name="author" content="Taylor R. Brown" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html"/>
<link rel="next" href="odds-and-ends.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An Introduction to R and Python For Data Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-sample-course"><i class="fa fa-check"></i>A Sample Course</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#become-a-contributor"><i class="fa fa-check"></i>Become a Contributor</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#licenses"><i class="fa fa-check"></i>License(s)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#about-this-book"><i class="fa fa-check"></i>About this book</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-the-required-software"><i class="fa fa-check"></i>Installing the Required Software</a>
<ul>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html#installing-r-and-rstudio"><i class="fa fa-check"></i>Installing R (and RStudio)</a></li>
<li class="chapter" data-level="0.0.1" data-path="preface.html"><a href="preface.html#installing-python-by-installing-anaconda"><i class="fa fa-check"></i><b>0.0.1</b> Installing Python by Installing Anaconda {-}</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#hello-world-in-r"><i class="fa fa-check"></i><b>1.1</b> Hello World in R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#hello-world-in-python"><i class="fa fa-check"></i><b>1.2</b> Hello World in Python</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#getting-help"><i class="fa fa-check"></i><b>1.3</b> Getting Help</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="intro.html"><a href="intro.html#reading-documentation"><i class="fa fa-check"></i><b>1.3.1</b> Reading Documentation</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro.html"><a href="intro.html#understanding-file-paths"><i class="fa fa-check"></i><b>1.3.2</b> Understanding File Paths</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>2</b> Data Types</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-types.html"><a href="data-types.html#basic-types"><i class="fa fa-check"></i><b>2.1</b> Basic Types</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-types.html"><a href="data-types.html#in-python-1"><i class="fa fa-check"></i><b>2.1.1</b> In Python</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-types.html"><a href="data-types.html#in-r-1"><i class="fa fa-check"></i><b>2.1.2</b> In R</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-types.html"><a href="data-types.html#exercises"><i class="fa fa-check"></i><b>2.1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-types.html"><a href="data-types.html#r-vectors-versus-numpy-arrays-and-pandas-series"><i class="fa fa-check"></i><b>2.2</b> R vectors versus Numpy <code>array</code>s (and pandas’ <code>Series</code>)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-types.html"><a href="data-types.html#overview-of-r"><i class="fa fa-check"></i><b>2.2.1</b> Overview of R</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-types.html"><a href="data-types.html#overview-of-python"><i class="fa fa-check"></i><b>2.2.2</b> Overview of Python</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-types.html"><a href="data-types.html#vectorization-in-r"><i class="fa fa-check"></i><b>2.2.3</b> Vectorization in R</a></li>
<li class="chapter" data-level="2.2.4" data-path="data-types.html"><a href="data-types.html#vectorization-in-python"><i class="fa fa-check"></i><b>2.2.4</b> Vectorization in Python</a></li>
<li class="chapter" data-level="2.2.5" data-path="data-types.html"><a href="data-types.html#indexing-vectors-in-r"><i class="fa fa-check"></i><b>2.2.5</b> Indexing <code>vector</code>s in R</a></li>
<li class="chapter" data-level="2.2.6" data-path="data-types.html"><a href="data-types.html#indexing-numpy-arrays"><i class="fa fa-check"></i><b>2.2.6</b> Indexing Numpy arrays</a></li>
<li class="chapter" data-level="2.2.7" data-path="data-types.html"><a href="data-types.html#indexing-pandas-series"><i class="fa fa-check"></i><b>2.2.7</b> Indexing pandas’ Series</a></li>
<li class="chapter" data-level="2.2.8" data-path="data-types.html"><a href="data-types.html#some-gotchas"><i class="fa fa-check"></i><b>2.2.8</b> Some Gotchas</a></li>
<li class="chapter" data-level="2.2.9" data-path="data-types.html"><a href="data-types.html#how-do-r-and-python-handle-missing-values"><i class="fa fa-check"></i><b>2.2.9</b> How do R and Python handle missing values?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-types.html"><a href="data-types.html#numpys-ndarrays-versus-rs-matrices-and-arrays"><i class="fa fa-check"></i><b>2.3</b> Numpy’s <code>ndarray</code>s versus R’s matrices and arrays</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-types.html"><a href="data-types.html#numpy-ndarrays-in-python"><i class="fa fa-check"></i><b>2.3.1</b> Numpy <code>ndarray</code>s In Python</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-types.html"><a href="data-types.html#the-matrix-and-array-classes-in-r"><i class="fa fa-check"></i><b>2.3.2</b> The <code>matrix</code> and <code>array</code> classes in R</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data-types.html"><a href="data-types.html#rs-lists-versus-pythons-lists-and-dictionaries"><i class="fa fa-check"></i><b>2.4</b> R’s lists versus Python’s lists and dictionaries</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-types.html"><a href="data-types.html#lists-in-r"><i class="fa fa-check"></i><b>2.4.1</b> Lists In R</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-types.html"><a href="data-types.html#lists-in-python"><i class="fa fa-check"></i><b>2.4.2</b> Lists In Python</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-types.html"><a href="data-types.html#dictionaries-in-python"><i class="fa fa-check"></i><b>2.4.3</b> Dictionaries In Python</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-types.html"><a href="data-types.html#user-defined-functions-in-r-and-python"><i class="fa fa-check"></i><b>2.5</b> User-defined functions in R and Python</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-types.html"><a href="data-types.html#defining-r-functions"><i class="fa fa-check"></i><b>2.5.1</b> Defining R Functions</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-types.html"><a href="data-types.html#defining-python-functions"><i class="fa fa-check"></i><b>2.5.2</b> Defining Python Functions</a></li>
<li class="chapter" data-level="2.5.3" data-path="data-types.html"><a href="data-types.html#more-details-on-rs-user-defined-functions"><i class="fa fa-check"></i><b>2.5.3</b> More details on R’s user-defined functions</a></li>
<li class="chapter" data-level="2.5.4" data-path="data-types.html"><a href="data-types.html#more-details-on-pythons-user-defined-functions"><i class="fa fa-check"></i><b>2.5.4</b> More details on Python’s user-defined functions</a></li>
<li class="chapter" data-level="2.5.5" data-path="data-types.html"><a href="data-types.html#function-scope-in-r"><i class="fa fa-check"></i><b>2.5.5</b> Function Scope in R</a></li>
<li class="chapter" data-level="2.5.6" data-path="data-types.html"><a href="data-types.html#function-scope-in-python"><i class="fa fa-check"></i><b>2.5.6</b> Function Scope in Python</a></li>
<li class="chapter" data-level="2.5.7" data-path="data-types.html"><a href="data-types.html#modifying-a-functions-arguments"><i class="fa fa-check"></i><b>2.5.7</b> Modifying a Function’s Arguments</a></li>
<li class="chapter" data-level="2.5.8" data-path="data-types.html"><a href="data-types.html#accessing-and-modifying-non-local-variables"><i class="fa fa-check"></i><b>2.5.8</b> Accessing and Modifying Non-Local Variables</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data-types.html"><a href="data-types.html#categorical-data"><i class="fa fa-check"></i><b>2.6</b> Categorical Data</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="data-types.html"><a href="data-types.html#categorical-data-in-r"><i class="fa fa-check"></i><b>2.6.1</b> Categorical Data in R</a></li>
<li class="chapter" data-level="2.6.2" data-path="data-types.html"><a href="data-types.html#categorical-data-in-python"><i class="fa fa-check"></i><b>2.6.2</b> Categorical Data in Python</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="data-types.html"><a href="data-types.html#data-frames"><i class="fa fa-check"></i><b>2.7</b> Data Frames</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="data-types.html"><a href="data-types.html#data-frames-in-r"><i class="fa fa-check"></i><b>2.7.1</b> Data Frames in R</a></li>
<li class="chapter" data-level="2.7.2" data-path="data-types.html"><a href="data-types.html#data-frames-in-python"><i class="fa fa-check"></i><b>2.7.2</b> Data Frames in Python</a></li>
<li class="chapter" data-level="2.7.3" data-path="data-types.html"><a href="data-types.html#row-names-and-indexes"><i class="fa fa-check"></i><b>2.7.3</b> Row Names and Indexes</a></li>
<li class="chapter" data-level="2.7.4" data-path="data-types.html"><a href="data-types.html#getting-versus-setting"><i class="fa fa-check"></i><b>2.7.4</b> Getting Versus Setting</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="data-types.html"><a href="data-types.html#exercises-1"><i class="fa fa-check"></i><b>2.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="odds-and-ends.html"><a href="odds-and-ends.html"><i class="fa fa-check"></i><b>3</b> Odds and Ends</a>
<ul>
<li class="chapter" data-level="3.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#input-and-output"><i class="fa fa-check"></i><b>3.1</b> Input and Output</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#general-input-considerations"><i class="fa fa-check"></i><b>3.1.1</b> General Input Considerations</a></li>
<li class="chapter" data-level="3.1.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#reading-in-text-files-with-r"><i class="fa fa-check"></i><b>3.1.2</b> Reading in Text Files with R</a></li>
<li class="chapter" data-level="3.1.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#reading-in-text-files-with-python"><i class="fa fa-check"></i><b>3.1.3</b> Reading in Text Files with Python</a></li>
<li class="chapter" data-level="3.1.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#output"><i class="fa fa-check"></i><b>3.1.4</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#using-third-party-code"><i class="fa fa-check"></i><b>3.2</b> Using Third-Party Code</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#installing-packages-in-r"><i class="fa fa-check"></i><b>3.2.1</b> Installing Packages In R</a></li>
<li class="chapter" data-level="3.2.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#installing-packages-in-python"><i class="fa fa-check"></i><b>3.2.2</b> Installing Packages In Python</a></li>
<li class="chapter" data-level="3.2.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loading-packages-in-r"><i class="fa fa-check"></i><b>3.2.3</b> Loading Packages In R</a></li>
<li class="chapter" data-level="3.2.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loading-packages-in-python"><i class="fa fa-check"></i><b>3.2.4</b> Loading Packages In Python</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#control-flow"><i class="fa fa-check"></i><b>3.3</b> Control Flow</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#conditional-logic"><i class="fa fa-check"></i><b>3.3.1</b> Conditional Logic</a></li>
<li class="chapter" data-level="3.3.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#loops"><i class="fa fa-check"></i><b>3.3.2</b> Loops</a></li>
<li class="chapter" data-level="3.3.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#a-longer-example"><i class="fa fa-check"></i><b>3.3.3</b> A Longer Example</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#reshaping-and-combining-data-sets"><i class="fa fa-check"></i><b>3.4</b> Reshaping and Combining Data Sets</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#ordering-and-sorting-data"><i class="fa fa-check"></i><b>3.4.1</b> Ordering and Sorting Data</a></li>
<li class="chapter" data-level="3.4.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#stacking-data-sets-and-placing-them-shoulder-to-shoulder"><i class="fa fa-check"></i><b>3.4.2</b> Stacking Data Sets and Placing them Shoulder to Shoulder</a></li>
<li class="chapter" data-level="3.4.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#merging-or-joining-data-sets"><i class="fa fa-check"></i><b>3.4.3</b> Merging or Joining Data Sets</a></li>
<li class="chapter" data-level="3.4.4" data-path="odds-and-ends.html"><a href="odds-and-ends.html#long-versus-wide-data"><i class="fa fa-check"></i><b>3.4.4</b> Long Versus Wide Data</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="odds-and-ends.html"><a href="odds-and-ends.html#visualization"><i class="fa fa-check"></i><b>3.5</b> Visualization</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="odds-and-ends.html"><a href="odds-and-ends.html#base-r-plotting"><i class="fa fa-check"></i><b>3.5.1</b> Base R Plotting</a></li>
<li class="chapter" data-level="3.5.2" data-path="odds-and-ends.html"><a href="odds-and-ends.html#plotting-with-ggplot2"><i class="fa fa-check"></i><b>3.5.2</b> Plotting with <code>ggplot2</code></a></li>
<li class="chapter" data-level="3.5.3" data-path="odds-and-ends.html"><a href="odds-and-ends.html#plotting-with-matplotlib"><i class="fa fa-check"></i><b>3.5.3</b> Plotting with Matplotlib</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="odds-and-ends.html"><a href="odds-and-ends.html#working-with-text-data"><i class="fa fa-check"></i><b>3.6</b> Working With Text Data</a></li>
<li class="chapter" data-level="3.7" data-path="odds-and-ends.html"><a href="odds-and-ends.html#working-with-dates-and-times"><i class="fa fa-check"></i><b>3.7</b> Working With Dates and Times</a></li>
<li class="chapter" data-level="3.8" data-path="odds-and-ends.html"><a href="odds-and-ends.html#running-scripts-from-the-command-line"><i class="fa fa-check"></i><b>3.8</b> Running Scripts from the Command Line</a></li>
<li class="chapter" data-level="3.9" data-path="odds-and-ends.html"><a href="odds-and-ends.html#exercises-2"><i class="fa fa-check"></i><b>3.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html"><i class="fa fa-check"></i><b>4</b> An Introduction to Object-Oriented Programming</a>
<ul>
<li class="chapter" data-level="4.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#oop-in-python"><i class="fa fa-check"></i><b>4.1</b> OOP In Python</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#overview"><i class="fa fa-check"></i><b>4.1.1</b> Overview</a></li>
<li class="chapter" data-level="4.1.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#a-first-example"><i class="fa fa-check"></i><b>4.1.2</b> A First Example</a></li>
<li class="chapter" data-level="4.1.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#adding-inheritance"><i class="fa fa-check"></i><b>4.1.3</b> Adding Inheritance</a></li>
<li class="chapter" data-level="4.1.4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#adding-in-composition"><i class="fa fa-check"></i><b>4.1.4</b> Adding in Composition</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#oop-in-r"><i class="fa fa-check"></i><b>4.2</b> OOP In R</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#s3-objects-the-big-picture"><i class="fa fa-check"></i><b>4.2.1</b> S3 objects: The Big Picture</a></li>
<li class="chapter" data-level="4.2.2" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#using-s3-objects"><i class="fa fa-check"></i><b>4.2.2</b> Using S3 objects</a></li>
<li class="chapter" data-level="4.2.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-s3-objects"><i class="fa fa-check"></i><b>4.2.3</b> Creating S3 objects</a></li>
<li class="chapter" data-level="4.2.4" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#s4-objects-the-big-picture"><i class="fa fa-check"></i><b>4.2.4</b> S4 objects: The Big Picture</a></li>
<li class="chapter" data-level="4.2.5" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#using-s4-objects"><i class="fa fa-check"></i><b>4.2.5</b> Using S4 objects</a></li>
<li class="chapter" data-level="4.2.6" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-s4-objects"><i class="fa fa-check"></i><b>4.2.6</b> Creating S4 objects</a></li>
<li class="chapter" data-level="4.2.7" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#reference-classes-the-big-picture"><i class="fa fa-check"></i><b>4.2.7</b> Reference Classes: The Big Picture</a></li>
<li class="chapter" data-level="4.2.8" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-reference-classes"><i class="fa fa-check"></i><b>4.2.8</b> Creating Reference Classes</a></li>
<li class="chapter" data-level="4.2.9" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#creating-r6-classes"><i class="fa fa-check"></i><b>4.2.9</b> Creating R6 Classes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="an-introduction-to-object-oriented-programming.html"><a href="an-introduction-to-object-oriented-programming.html#exercises-3"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functional-programming.html"><a href="functional-programming.html"><i class="fa fa-check"></i><b>5</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-r"><i class="fa fa-check"></i><b>5.1</b> Functions as Function Inputs in R</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="functional-programming.html"><a href="functional-programming.html#sapply-and-vapply"><i class="fa fa-check"></i><b>5.1.1</b> <code>sapply</code> and <code>vapply</code></a></li>
<li class="chapter" data-level="5.1.2" data-path="functional-programming.html"><a href="functional-programming.html#lapply"><i class="fa fa-check"></i><b>5.1.2</b> <code>lapply</code></a></li>
<li class="chapter" data-level="5.1.3" data-path="functional-programming.html"><a href="functional-programming.html#apply"><i class="fa fa-check"></i><b>5.1.3</b> <code>apply</code></a></li>
<li class="chapter" data-level="5.1.4" data-path="functional-programming.html"><a href="functional-programming.html#tapply"><i class="fa fa-check"></i><b>5.1.4</b> <code>tapply</code></a></li>
<li class="chapter" data-level="5.1.5" data-path="functional-programming.html"><a href="functional-programming.html#mapply"><i class="fa fa-check"></i><b>5.1.5</b> <code>mapply</code></a></li>
<li class="chapter" data-level="5.1.6" data-path="functional-programming.html"><a href="functional-programming.html#reduce-and-do.call"><i class="fa fa-check"></i><b>5.1.6</b> <code>Reduce</code> and <code>do.call</code></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="functional-programming.html"><a href="functional-programming.html#another-example-in-r"><i class="fa fa-check"></i><b>5.2</b> Another Example in R</a></li>
<li class="chapter" data-level="5.3" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-base-python"><i class="fa fa-check"></i><b>5.3</b> Functions as Function Inputs in Base Python</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="functional-programming.html"><a href="functional-programming.html#map"><i class="fa fa-check"></i><b>5.3.1</b> <code>map</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="functional-programming.html"><a href="functional-programming.html#filter"><i class="fa fa-check"></i><b>5.3.2</b> <code>filter</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-in-numpy"><i class="fa fa-check"></i><b>5.4</b> Functions as Function Inputs in Numpy</a></li>
<li class="chapter" data-level="5.5" data-path="functional-programming.html"><a href="functional-programming.html#functional-methods-in-pandas"><i class="fa fa-check"></i><b>5.5</b> Functional Methods in pandas</a></li>
<li class="chapter" data-level="5.6" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-inputs-miscellany"><i class="fa fa-check"></i><b>5.6</b> Functions as Function Inputs (miscellany)</a></li>
<li class="chapter" data-level="5.7" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-outputs-in-r"><i class="fa fa-check"></i><b>5.7</b> Functions as Function Outputs in R</a></li>
<li class="chapter" data-level="5.8" data-path="functional-programming.html"><a href="functional-programming.html#functions-as-function-outputs-in-python"><i class="fa fa-check"></i><b>5.8</b> Functions as Function Outputs in Python</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="functional-programming.html"><a href="functional-programming.html#exercises-4"><i class="fa fa-check"></i><b>5.8.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R and Python For Data Analysis: A Side By Side Approach</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-types" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Data Types</h1>
<p>In every programming language, data is stored in different ways. Writing a program that manipulates data requires understanding all of the choices. That is why we must be concerned with the different <strong>types</strong> of data in our R and Python programs. Different types are suitable for different purposes.</p>
<p>There are similarities between Python’s and R’s type systems. However, there are may differences as well. Be prepared for these differences. There are many more of them in this chapter than there were in the previous chapter!</p>
<p>If you’re ever unsure what type a variable has, use <code>type()</code> (in Python) or <code>typeof()</code> (in R) to query it.</p>
<!---
---------------------------------------------------------------------------
-->
<div id="basic-types" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Basic Types</h2>
<p>Storing an individual piece of information is simple in both languages. However, while Python has scalar types, R’s situation is a little more complicated.</p>
<div id="in-python-1" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> In Python</h3>
<p>In Python, the simplest types we frequently use are <code>str</code> (short for string), <code>int</code> (short for integer), <code>float</code> (short for floating point) and <code>bool</code> (short for Boolean). This list is not exhaustive, but these are a good collection to start thinking about. For a complete list of built-in types in Python, click <a href="https://docs.python.org/3/library/stdtypes.html">here</a>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="data-types.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(<span class="st">&#39;a&#39;</span>), <span class="bu">type</span>(<span class="dv">1</span>), <span class="bu">type</span>(<span class="fl">1.3</span>))</span>
<span id="cb9-2"><a href="data-types.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;class &#39;str&#39;&gt; &lt;class &#39;int&#39;&gt; &lt;class &#39;float&#39;&gt;</span></span></code></pre></div>
<p>Strings are useful for processing text data such as names of people/places/things and messages (e.g. texts, tweets and emails). If you are dealing with numbers, you need floating points if you have a number that might have a fractional part after its decimal; otherwise you’ll need an integer. Booleans are useful for situations where you need to record whether something is true or false. They are also important to understand for control-flow in section <a href="odds-and-ends.html#control-flow">3.3</a>.</p>
<p>In the next section we will discuss the Numpy library. This library has a <a href="https://numpy.org/doc/stable/user/basics.types.html">broader collection</a> of basic types.</p>
<div id="type-conversions-in-python" class="section level4" number="2.1.1.1">
<h4><span class="header-section-number">2.1.1.1</span> Type Conversions in Python</h4>
<p>We will often have to convert between types in a Python program. This is called <strong>type conversion</strong>, and it can be either implicitly or explicitly done.
For example, <code>int</code>s are often implicitly converted to <code>float</code>s, so that arithmetic operations work.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="data-types.html#cb10-1" aria-hidden="true" tabindex="-1"></a>my_int <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb10-2"><a href="data-types.html#cb10-2" aria-hidden="true" tabindex="-1"></a>my_float <span class="op">=</span> <span class="fl">3.2</span></span>
<span id="cb10-3"><a href="data-types.html#cb10-3" aria-hidden="true" tabindex="-1"></a>my_sum <span class="op">=</span> my_int <span class="op">+</span> my_float</span>
<span id="cb10-4"><a href="data-types.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;my_int&#39;s type&quot;</span>, <span class="bu">type</span>(my_int))</span>
<span id="cb10-5"><a href="data-types.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">## my_int&#39;s type &lt;class &#39;int&#39;&gt;</span></span>
<span id="cb10-6"><a href="data-types.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;my_float&#39;s type&quot;</span>, <span class="bu">type</span>(my_float))</span>
<span id="cb10-7"><a href="data-types.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">## my_float&#39;s type &lt;class &#39;float&#39;&gt;</span></span>
<span id="cb10-8"><a href="data-types.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_sum)</span>
<span id="cb10-9"><a href="data-types.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 4.2</span></span>
<span id="cb10-10"><a href="data-types.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;my_sum&#39;s type&quot;</span>, <span class="bu">type</span>(my_sum))</span>
<span id="cb10-11"><a href="data-types.html#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="co">## my_sum&#39;s type &lt;class &#39;float&#39;&gt;</span></span></code></pre></div>
<p>You might be disappointed if you always count on this behavior, though.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="data-types.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fl">3.2</span> <span class="op">+</span> <span class="st">&quot;3.2&quot;</span></span>
<span id="cb11-2"><a href="data-types.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">## Error in py_call_impl(callable, dots$args, dots$keywords): TypeError: unsupported operand type(s) for +: &#39;float&#39; and &#39;str&#39;</span></span></code></pre></div>
<p>Explicit conversions occur when we as programmers are explicitly asking Python to perform the conversion. You will do this with the functions <code>int()</code>, <code>str()</code>, <code>float()</code>, <code>bool()</code>, and the like.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb12-1"><a href="data-types.html#cb12-1" aria-hidden="true" tabindex="-1"></a>my_date <span class="op">=</span> <span class="st">&quot;5/2/2021&quot;</span></span>
<span id="cb12-2"><a href="data-types.html#cb12-2" aria-hidden="true" tabindex="-1"></a>month_day_year <span class="op">=</span> my_date.split(<span class="st">&#39;/&#39;</span>)</span>
<span id="cb12-3"><a href="data-types.html#cb12-3" aria-hidden="true" tabindex="-1"></a>my_year <span class="op">=</span> <span class="bu">int</span>(month_day_year[<span class="op">-</span><span class="dv">1</span>]) </span>
<span id="cb12-4"><a href="data-types.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&#39;my_year is equal to &#39;</span>, my_year, <span class="st">&#39;and its type is &#39;</span>, <span class="bu">type</span>(my_year))</span>
<span id="cb12-5"><a href="data-types.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">## my_year is equal to  2021 and its type is  &lt;class &#39;int&#39;&gt;</span></span></code></pre></div>
</div>
</div>
<div id="in-r-1" class="section level3" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> In R</h3>
<p>In R, the names of these basic types are only slightly different. They are <code>logical</code> (instead of <code>bool</code>), <code>integer</code> (instead of <code>int</code>), <code>double</code> (instead of <code>float</code>)<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>, and <code>character</code> (instead of <code>str</code>). There is also <code>complex</code> and <code>raw</code>, but we will use these less often in this textbook.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-types.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cat() is kind of like print()</span></span>
<span id="cb13-2"><a href="data-types.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">typeof</span>(<span class="st">&#39;a&#39;</span>), <span class="fu">typeof</span>(<span class="dv">1</span>), <span class="fu">typeof</span>(<span class="fl">1.3</span>))</span>
<span id="cb13-3"><a href="data-types.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="do">## character double double</span></span></code></pre></div>
<p>In this case R automatically upgraded <code>1</code> to a double. If you wanted to force it to be an integer, you can add a capital “L” to the end of the number.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-types.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cat() is kind of like print()</span></span>
<span id="cb14-2"><a href="data-types.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">typeof</span>(<span class="st">&#39;a&#39;</span>), <span class="fu">typeof</span>(1L), <span class="fu">typeof</span>(<span class="fl">1.3</span>))</span>
<span id="cb14-3"><a href="data-types.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="do">## character integer double</span></span></code></pre></div>
<div id="type-conversions-in-r" class="section level4" number="2.1.2.1">
<h4><span class="header-section-number">2.1.2.1</span> Type Conversions in R</h4>
<p>You can explicitly and implicitly convert types in R just as you did in Python. Implicit conversion looks like this.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-types.html#cb15-1" aria-hidden="true" tabindex="-1"></a>myInt <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb15-2"><a href="data-types.html#cb15-2" aria-hidden="true" tabindex="-1"></a>myDouble <span class="ot">=</span> <span class="fl">3.2</span></span>
<span id="cb15-3"><a href="data-types.html#cb15-3" aria-hidden="true" tabindex="-1"></a>mySum <span class="ot">=</span> myInt <span class="sc">+</span> myDouble</span>
<span id="cb15-4"><a href="data-types.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;my_int&#39;s type is &quot;</span>, <span class="fu">typeof</span>(myInt)))</span>
<span id="cb15-5"><a href="data-types.html#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;my_int&#39;s type is double&quot;</span></span>
<span id="cb15-6"><a href="data-types.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;my_float&#39;s type is &quot;</span>, <span class="fu">typeof</span>(myDouble)))</span>
<span id="cb15-7"><a href="data-types.html#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;my_float&#39;s type is double&quot;</span></span>
<span id="cb15-8"><a href="data-types.html#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mySum)</span>
<span id="cb15-9"><a href="data-types.html#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4.2</span></span>
<span id="cb15-10"><a href="data-types.html#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;my_sum&#39;s type is &quot;</span>, <span class="fu">typeof</span>(mySum)))</span>
<span id="cb15-11"><a href="data-types.html#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;my_sum&#39;s type is double&quot;</span></span></code></pre></div>
<p>Explicit conversion can be achieved with functions such as <code>as.integer</code>, <code>as.logical</code>, <code>as.double</code>, etc.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-types.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">typeof</span>(<span class="dv">1</span>))</span>
<span id="cb16-2"><a href="data-types.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;double&quot;</span></span>
<span id="cb16-3"><a href="data-types.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">typeof</span>(<span class="fu">as.logical</span>(<span class="dv">1</span>)))</span>
<span id="cb16-4"><a href="data-types.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;logical&quot;</span></span></code></pre></div>
</div>
<div id="what-was-the-weird-thing-about-r-you-mentioned" class="section level4" number="2.1.2.2">
<h4><span class="header-section-number">2.1.2.2</span> What was the weird thing about R you mentioned?</h4>
<p>The basic types of R are a little different than the basic types of Python. R uses the same type to store many elements. It does not have any scalar type. On the other hand, Python has base types for individual elements, and it uses separate types as containers for storing many elements. In R, if you are looking at single number or character string, it’s actually a length <span class="math inline">\(1\)</span> <code>vector</code>. More information about <code>vector</code>s can be found in section <a href="data-types.html#r-vectors-versus-numpy-arrays-and-pandas-series">2.2</a>.</p>
<p>TODO constants versus literals?</p>
</div>
</div>
<div id="exercises" class="section level3" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Exercises</h3>
<div id="easy" class="section level4" number="2.1.3.1">
<h4><span class="header-section-number">2.1.3.1</span> Easy</h4>
<p>All answers to questions related to R should be written in a file named <code>easy_data_types_exercises.R</code>. All answers to questions related to Python should be written in a file named <code>easy_data_types_exercises.py</code>.</p>
<ol style="list-style-type: decimal">
<li><p>Which Python type is ideal for each piece of data? Assign your answers to a <code>list</code> of <code>str</code>ings called <code>question_one</code>.</p>
<ul>
<li>An individual’s IP address</li>
<li>whether or not an individual attended a study</li>
<li>the number of seeds found in a plant</li>
<li>the amount of time it takes for a car to race around a track</li>
</ul></li>
<li><p>Answer the same question above, but use R types? Assign your answers to a <code>character vector</code> of length four called <code>questionOne</code>.</p>
<ul>
<li>An individual’s IP address</li>
<li>whether or not an individual attended a study</li>
<li>the number of seeds found in a plant</li>
<li>the amount of time it takes for a car to race around a track</li>
</ul></li>
<li><p><a href="https://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f">“The only numbers that can be represented exactly in R’s numeric type are integers and fractions whose denominator is a power of 2.”</a> Provide ten examples of numbers that have nonzero decimal components and are not exactly equal represented by R’s <code>numeric</code> type. Store them all in a vector called <code>notExactFloats</code>.</p></li>
</ol>
<!---
---------------------------------------------------------------------------
-->
</div>
</div>
</div>
<div id="r-vectors-versus-numpy-arrays-and-pandas-series" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> R vectors versus Numpy <code>array</code>s (and pandas’ <code>Series</code>)</h2>
<p>This section is for describing the data types that let us store collections of elements that all <strong>share the same type</strong>. Data is very commonly stored in this fashion, so this section is quite important. Once we have one of these objects in a program, we will be interested in learning how to extract different subsets of elements, and how vectorization works.</p>
<div id="overview-of-r" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Overview of R</h3>
<p>I mentioned earlier that R does not have scalar types–it just has <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Vector-objects"><strong>vectors</strong></a>. So, whether you want to store one number (or <code>logical</code>, or <code>character</code>, or …), or many numbers, you will need a <code>vector</code>.</p>
<div class="rmd-caution">
<p>
For many, the word “vector” evokes an impression that these objects are designed to be used for performing matrix arithmetic (e.g. inner products, transposes, etc.). You can perform these operations on <code>vector</code>s, but in my opinion, this preconception can be misleading, and I recommend avoiding it. Most of the things you can do with <code>vector</code>s in R have little to do with linear algebra!
</p>
</div>
<p>How do we create one of these? There are many ways. One common is to read in elements from an external data set, perhaps extracting them from a column of a <code>data.frame</code>, but we will describe those in section <a href="data-types.html#data-frames">2.7</a>. Here are some examples of generating <code>vector</code>s from code instead of grabbing them from an external data set after it is read in.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-types.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb17-2"><a href="data-types.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  1  2  3  4  5  6  7  8  9 10</span></span>
<span id="cb17-3"><a href="data-types.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">2</span>)</span>
<span id="cb17-4"><a href="data-types.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 3 5 7 9</span></span>
<span id="cb17-5"><a href="data-types.html#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">2</span>,<span class="dv">5</span>)</span>
<span id="cb17-6"><a href="data-types.html#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2 2 2 2 2</span></span>
<span id="cb17-7"><a href="data-types.html#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;5/2/2021&quot;</span>, <span class="st">&quot;5/3/2021&quot;</span>, <span class="st">&quot;5/4/2021&quot;</span>)</span>
<span id="cb17-8"><a href="data-types.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;5/2/2021&quot; &quot;5/3/2021&quot; &quot;5/4/2021&quot;</span></span>
<span id="cb17-9"><a href="data-types.html#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb17-10"><a href="data-types.html#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1]  1.3969769  0.3192133  0.9890868 -0.3583795 -1.6846170  0.7704178  0.3184148  0.1489315  0.4519129 -0.8507511</span></span></code></pre></div>
<p><code>c()</code> is short for “combine.” <code>seq()</code> and <code>rep()</code> are short for “sequence” and “replicate,” respectively. <code>rnorm()</code> samples normal (or Gaussian) random variables. There is plenty more to learn about these functions, so I encourage you to take a look at their documentation.</p>
<div class="rmd-details">
<p>
I should mention that functions such as <code>rnorm()</code> don’t create truly random numbers, just <em>pseudorandom</em> ones. Pseudorandom numbers are pretty much indecipherable from truly random ones, but the way the computer generates them is actually deterministic.
</p>
<p>
First, a <em>seed</em>, or starting number is chosen. Then, the <em>pseudorandom number generator (PRNG)</em> maps that number to another number. The sequence of all the numbers appears to be random, but is actually deterministic.
</p>
<p>
Sometimes you will be interested in setting the seed on your own because it is a cheap way of sharing and communicating data with others. If two people use the same starting seed, and the same PRNG, then they should simulate the same data. This can be important if you want to help other people reproduce the results of code you share. Most of the time, though, I don’t set the seed, and I don’t think about the distinction between random and pseudorandom numbers.
</p>
</div>
</div>
<div id="overview-of-python" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Overview of Python</h3>
<p>If you want to store many elements of the same type (and size) in Python, you will need a Numpy <code>array</code>. Numpy is a highly-regarded third party library <span class="citation">(<a href="#ref-harris2020array" role="doc-biblioref">Harris et al. 2020</a>)</span> for Python.</p>
<p>There are five ways to create numpy arrays (<a href="https://numpy.org/doc/stable/user/basics.creation.html">source</a>). Here are some examples that complement the examples from above.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="data-types.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb18-2"><a href="data-types.html#cb18-2" aria-hidden="true" tabindex="-1"></a>np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb18-3"><a href="data-types.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">## array([1, 2, 3])</span></span>
<span id="cb18-4"><a href="data-types.html#cb18-4" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">1</span>,<span class="dv">12</span>,<span class="dv">2</span>)</span>
<span id="cb18-5"><a href="data-types.html#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">## array([ 1,  3,  5,  7,  9, 11])</span></span>
<span id="cb18-6"><a href="data-types.html#cb18-6" aria-hidden="true" tabindex="-1"></a>np.random.normal(size<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb18-7"><a href="data-types.html#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">## array([-1.35882406, -1.34518375,  0.4361838 ])</span></span></code></pre></div>
<p>Another choice in Python is to use a <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas-series"><code>Series</code> object</a> from the <code>pandas</code> library. The benefit of these is that they play nicely with pandas’ data frames (more information about pandas’ data frames can be found in <a href="data-types.html#data-frames-in-python">2.7.2</a>), and that they have more flexibility with accessing elements by name ( see <a href="https://jakevdp.github.io/PythonDataScienceHandbook/03.01-introducing-pandas-objects.html#Series-as-generalized-NumPy-array">here</a> for more information ).</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="data-types.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb19-2"><a href="data-types.html#cb19-2" aria-hidden="true" tabindex="-1"></a>first <span class="op">=</span> pd.Series([<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>])</span>
<span id="cb19-3"><a href="data-types.html#cb19-3" aria-hidden="true" tabindex="-1"></a>second <span class="op">=</span> pd.Series([<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>], index <span class="op">=</span> [<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>])</span>
<span id="cb19-4"><a href="data-types.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(first[<span class="dv">0</span>])</span>
<span id="cb19-5"><a href="data-types.html#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 2</span></span>
<span id="cb19-6"><a href="data-types.html#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(second[<span class="st">&#39;c&#39;</span>])</span>
<span id="cb19-7"><a href="data-types.html#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 6</span></span></code></pre></div>
</div>
<div id="vectorization-in-r" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Vectorization in R</h3>
<p>An operation is <strong>vectorized</strong> if it applies to all of the elements of a <code>vector</code> at once. An operator that is not vectorized can only be applied to individual elements. In that case, the programmer would need to write more code to instruct the function to be applied to all of the elements of a vector. You should prefer writing vectorized code because it is easier to read, and quite often it runs much faster.</p>
<p>Arithmetic (e.g. <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code>, <code>%%</code>, <code>%/%</code>, etc.) and logical (e.g. <code>!</code>, <code>|</code>, <code>&amp;</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>==</code>, etc.) operators are commonly applied on single vectors or between two vectors. Numeric vectors are converted to logical vectors if they need to be. Many functions work on vectors <strong>element-wise</strong> as well (except functions like <code>sum</code> or <code>length</code>, etc.). Operator precedence is important to understand if you seek to minimize your use of parentheses. Here are some examples.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-types.html#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">*</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb20-2"><a href="data-types.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 4 9</span></span>
<span id="cb20-3"><a href="data-types.html#cb20-3" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">==</span> <span class="fu">rev</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb20-4"><a href="data-types.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE  TRUE FALSE</span></span>
<span id="cb20-5"><a href="data-types.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sin</span>( (<span class="dv">2</span><span class="sc">*</span>pi<span class="sc">/</span><span class="dv">3</span>)<span class="sc">*</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb20-6"><a href="data-types.html#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]  8.660254e-01 -8.660254e-01 -2.449294e-16  8.660254e-01 -8.660254e-01</span></span></code></pre></div>
<p>In the last example, there is <strong>recycling</strong> happening. <code>(2*pi/3)</code> is taking three length-one vectors and producing another length-one vector. That gets multiplied by length five vector <code>1:5</code>. The single element in the length one vector gets recycled so that its value is multiplied by every element of <code>1:5</code>.
This makes sense most of the time, but sometimes it can be tricky. Notice that this does not produce an error–just a warning.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-types.html#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">*</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb21-2"><a href="data-types.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning in (1:3) * (1:4): longer object length is not a multiple of shorter object length</span></span>
<span id="cb21-3"><a href="data-types.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 4 9 4</span></span></code></pre></div>
</div>
<div id="vectorization-in-python" class="section level3" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Vectorization in Python</h3>
<p>The Python’s Numpy library makes extensive use of vectorization as well. Vectorization in Numpy is accomplished with <a href="https://numpy.org/doc/stable/reference/ufuncs.html"><strong>universal functions</strong></a>, or <code>ufunc</code> for short. Some <code>ufunc</code>s can be invoked using the same syntax as in R (e.g. <code>+</code>). You can also refer to function by name (e.g. <code>np.sum</code>). Mixing and matching is allowed, too.</p>
<p><code>ufunc</code>s are called <em>unary</em> if they take in one array, and <em>binary</em> if they take in two. I reproduce a portion of the very nice table found in <span class="citation">(<a href="#ref-py_ds_handbook" role="doc-biblioref">VanderPlas 2016</a>)</span></p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Equivalent <code>ufunc</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>+</code></td>
<td><code>np.add</code></td>
</tr>
<tr class="even">
<td><code>-</code></td>
<td><code>np.subtract</code></td>
</tr>
<tr class="odd">
<td><code>-</code></td>
<td><code>np.negative</code></td>
</tr>
<tr class="even">
<td><code>*</code></td>
<td><code>np.multiply</code></td>
</tr>
<tr class="odd">
<td><code>/</code></td>
<td><code>np.divide</code></td>
</tr>
<tr class="even">
<td><code>//</code></td>
<td><code>np.floor_divide</code></td>
</tr>
<tr class="odd">
<td><code>**</code></td>
<td><code>np.power</code></td>
</tr>
<tr class="even">
<td><code>%</code></td>
<td><code>np.mod</code></td>
</tr>
</tbody>
</table>
<p>For an exhaustive list of Numpy’s universal functions, <a href="https://numpy.org/doc/stable/reference/ufuncs.html#available-ufuncs">click here.</a> Here are some examples.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="data-types.html#cb22-1" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">1</span>,<span class="dv">4</span>)<span class="op">*</span>np.arange(<span class="dv">1</span>,<span class="dv">4</span>)</span>
<span id="cb22-2"><a href="data-types.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">## array([1, 4, 9])</span></span>
<span id="cb22-3"><a href="data-types.html#cb22-3" aria-hidden="true" tabindex="-1"></a>np.zeros(<span class="dv">5</span>) <span class="op">&gt;</span> np.arange(<span class="op">-</span><span class="dv">3</span>,<span class="dv">2</span>)</span>
<span id="cb22-4"><a href="data-types.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">## array([ True,  True,  True, False, False])</span></span>
<span id="cb22-5"><a href="data-types.html#cb22-5" aria-hidden="true" tabindex="-1"></a>np.exp( <span class="op">-</span><span class="fl">.5</span> <span class="op">*</span> np.linspace(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">10</span>)<span class="op">**</span><span class="dv">2</span>) <span class="op">/</span> np.sqrt( <span class="dv">2</span> <span class="op">*</span> np.pi)</span>
<span id="cb22-6"><a href="data-types.html#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="co">## array([0.00443185, 0.02622189, 0.09947714, 0.24197072, 0.37738323,</span></span>
<span id="cb22-7"><a href="data-types.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">##        0.37738323, 0.24197072, 0.09947714, 0.02622189, 0.00443185])</span></span></code></pre></div>
<p>Instead of calling it “recycling,” Numpy calls it <a href="https://numpy.org/devdocs/user/theory.broadcasting.html"><strong>broadcasting</strong></a>. It’s the same idea as in R, but in general, Python is stricter and disallows more scenarios.</p>
<p>Then there are the <code>Series</code> objects from pandas. ufuncs still work on <code>Series</code> objects, and they <a href="https://jakevdp.github.io/PythonDataScienceHandbook/03.03-operations-in-pandas.html">respect common index values</a>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="data-types.html#cb23-1" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> pd.Series(np.repeat(<span class="dv">100</span>,<span class="dv">3</span>))</span>
<span id="cb23-2"><a href="data-types.html#cb23-2" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> pd.Series(np.repeat(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb23-3"><a href="data-types.html#cb23-3" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">+</span> s2</span>
<span id="cb23-4"><a href="data-types.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    110</span></span>
<span id="cb23-5"><a href="data-types.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    110</span></span>
<span id="cb23-6"><a href="data-types.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    110</span></span>
<span id="cb23-7"><a href="data-types.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span></code></pre></div>
<p>If you feel more comfortable, and you want to coerce these <code>Series</code> objects to Numpy arrays, you can do that. For example, the following works.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="data-types.html#cb24-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> pd.Series(np.linspace(<span class="op">-</span><span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">5</span>))</span>
<span id="cb24-2"><a href="data-types.html#cb24-2" aria-hidden="true" tabindex="-1"></a>np.exp(s.to_numpy())</span>
<span id="cb24-3"><a href="data-types.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">## array([0.36787944, 0.60653066, 1.        , 1.64872127, 2.71828183])</span></span></code></pre></div>
<p>In addition, they possess many <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html#pandas-series">attributes and methods</a>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="data-types.html#cb25-1" aria-hidden="true" tabindex="-1"></a>ints <span class="op">=</span> pd.Series(np.arange(<span class="dv">10</span>))</span>
<span id="cb25-2"><a href="data-types.html#cb25-2" aria-hidden="true" tabindex="-1"></a>ints.<span class="bu">abs</span>()</span>
<span id="cb25-3"><a href="data-types.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    0</span></span>
<span id="cb25-4"><a href="data-types.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    1</span></span>
<span id="cb25-5"><a href="data-types.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    2</span></span>
<span id="cb25-6"><a href="data-types.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 3    3</span></span>
<span id="cb25-7"><a href="data-types.html#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 4    4</span></span>
<span id="cb25-8"><a href="data-types.html#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 5    5</span></span>
<span id="cb25-9"><a href="data-types.html#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 6    6</span></span>
<span id="cb25-10"><a href="data-types.html#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 7    7</span></span>
<span id="cb25-11"><a href="data-types.html#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 8    8</span></span>
<span id="cb25-12"><a href="data-types.html#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 9    9</span></span>
<span id="cb25-13"><a href="data-types.html#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb25-14"><a href="data-types.html#cb25-14" aria-hidden="true" tabindex="-1"></a>ints.mean()</span>
<span id="cb25-15"><a href="data-types.html#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 4.5</span></span>
<span id="cb25-16"><a href="data-types.html#cb25-16" aria-hidden="true" tabindex="-1"></a>ints.floordiv(<span class="dv">2</span>)</span>
<span id="cb25-17"><a href="data-types.html#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    0</span></span>
<span id="cb25-18"><a href="data-types.html#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    0</span></span>
<span id="cb25-19"><a href="data-types.html#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    1</span></span>
<span id="cb25-20"><a href="data-types.html#cb25-20" aria-hidden="true" tabindex="-1"></a><span class="co">## 3    1</span></span>
<span id="cb25-21"><a href="data-types.html#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="co">## 4    2</span></span>
<span id="cb25-22"><a href="data-types.html#cb25-22" aria-hidden="true" tabindex="-1"></a><span class="co">## 5    2</span></span>
<span id="cb25-23"><a href="data-types.html#cb25-23" aria-hidden="true" tabindex="-1"></a><span class="co">## 6    3</span></span>
<span id="cb25-24"><a href="data-types.html#cb25-24" aria-hidden="true" tabindex="-1"></a><span class="co">## 7    3</span></span>
<span id="cb25-25"><a href="data-types.html#cb25-25" aria-hidden="true" tabindex="-1"></a><span class="co">## 8    4</span></span>
<span id="cb25-26"><a href="data-types.html#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="co">## 9    4</span></span>
<span id="cb25-27"><a href="data-types.html#cb25-27" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span></code></pre></div>
<p><code>Series</code> objects that have <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/text.html#working-with-text-data">text data</a> are a little bit different. For one, you have to access the <code>.str</code> attribute of the <code>Series</code> before calling any <a href="https://jakevdp.github.io/PythonDataScienceHandbook/03.10-working-with-strings.html">vectorized methods</a>. Here is an example.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="data-types.html#cb26-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> pd.Series([<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>,<span class="st">&#39;33&#39;</span>])</span>
<span id="cb26-2"><a href="data-types.html#cb26-2" aria-hidden="true" tabindex="-1"></a>s.dtype</span></code></pre></div>
<pre><code>## dtype(&#39;O&#39;)</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="data-types.html#cb28-1" aria-hidden="true" tabindex="-1"></a>s.<span class="bu">str</span>.isdigit()</span></code></pre></div>
<pre><code>## 0    False
## 1    False
## 2    False
## 3     True
## dtype: bool</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="data-types.html#cb30-1" aria-hidden="true" tabindex="-1"></a>s.<span class="bu">str</span>.replace(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;z&#39;</span>)</span></code></pre></div>
<pre><code>## 0     z
## 1     b
## 2     c
## 3    33
## dtype: object</code></pre>
<p>String operations can be a big game changer.</p>
</div>
<div id="indexing-vectors-in-r" class="section level3" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> Indexing <code>vector</code>s in R</h3>
<p>It is very common to want to extract or modify a subset of elements in a vector. There are a few ways to do this. All of them involve the square bracket operator (e.g. <code>[]</code>). Feel free to retrieve the documentation by typing <code>?'['</code>.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-types.html#cb32-1" aria-hidden="true" tabindex="-1"></a>allElements <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb32-2"><a href="data-types.html#cb32-2" aria-hidden="true" tabindex="-1"></a>allElements[<span class="fu">seq</span>(<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">2</span>)] <span class="co"># extract evens</span></span>
<span id="cb32-3"><a href="data-types.html#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2 4 6</span></span>
<span id="cb32-4"><a href="data-types.html#cb32-4" aria-hidden="true" tabindex="-1"></a>allElements[<span class="sc">-</span><span class="fu">seq</span>(<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">2</span>)] <span class="ot">&lt;-</span> <span class="dv">99</span> <span class="co"># replace all odds with 99</span></span>
<span id="cb32-5"><a href="data-types.html#cb32-5" aria-hidden="true" tabindex="-1"></a>allElements[allElements <span class="sc">&gt;</span> <span class="dv">2</span>] <span class="co"># get nums bigger than 20</span></span>
<span id="cb32-6"><a href="data-types.html#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 99 99  4 99  6</span></span></code></pre></div>
<p>To access the first element, we use the index <code>1</code>. To access the second, we use <code>2</code>, and so on. Also, the <code>-</code> sign tells R to remove elements. Both of these functionalities are <em>very different</em> from Python, as we will see shortly.</p>
<p>We can use names to access elements elements, too, but only if the elements are named.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data-types.html#cb33-1" aria-hidden="true" tabindex="-1"></a>sillyVec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;favorite&quot;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&quot;least favorite&quot;</span> <span class="ot">=</span> <span class="dv">2</span>)</span>
<span id="cb33-2"><a href="data-types.html#cb33-2" aria-hidden="true" tabindex="-1"></a>sillyVec[<span class="st">&#39;favorite&#39;</span>]</span>
<span id="cb33-3"><a href="data-types.html#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="do">## favorite </span></span>
<span id="cb33-4"><a href="data-types.html#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="do">##        1</span></span></code></pre></div>
</div>
<div id="indexing-numpy-arrays" class="section level3" number="2.2.6">
<h3><span class="header-section-number">2.2.6</span> Indexing Numpy arrays</h3>
<p><a href="https://numpy.org/doc/stable/user/basics.indexing.html">Indexing Numpy arrays</a> is very similar to indexing vectors in R. You use the square brackets, and you can do it with logical arrays or index arrays. There are some important differences, though.</p>
<p>For one, indexing is 0-based in Python. The <code>0</code>th element is the first element of an array. Another key difference is that the <code>-</code> isn’t used to remove elements like it is in R, but rather to count backwards. Third, using one or two <code>:</code> inside square brackets is more flexible in Python. This is syntactic sugar for using the <code>slice()</code> function, which is similar to R’s <code>seq()</code> function.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="data-types.html#cb34-1" aria-hidden="true" tabindex="-1"></a>one_through_ten <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">11</span>)</span>
<span id="cb34-2"><a href="data-types.html#cb34-2" aria-hidden="true" tabindex="-1"></a>one_through_ten[np.array([<span class="dv">2</span>,<span class="dv">3</span>])]</span>
<span id="cb34-3"><a href="data-types.html#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">## array([3, 4])</span></span>
<span id="cb34-4"><a href="data-types.html#cb34-4" aria-hidden="true" tabindex="-1"></a>one_through_ten[<span class="dv">1</span>:<span class="dv">10</span>:<span class="dv">2</span>] <span class="co"># evens</span></span>
<span id="cb34-5"><a href="data-types.html#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">## array([ 2,  4,  6,  8, 10])</span></span>
<span id="cb34-6"><a href="data-types.html#cb34-6" aria-hidden="true" tabindex="-1"></a>one_through_ten[::<span class="op">-</span><span class="dv">1</span>] <span class="co"># reversed</span></span>
<span id="cb34-7"><a href="data-types.html#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">## array([10,  9,  8,  7,  6,  5,  4,  3,  2,  1])</span></span>
<span id="cb34-8"><a href="data-types.html#cb34-8" aria-hidden="true" tabindex="-1"></a>one_through_ten[<span class="op">-</span><span class="dv">2</span>] <span class="op">=</span> <span class="dv">99</span> <span class="co"># second to last</span></span>
<span id="cb34-9"><a href="data-types.html#cb34-9" aria-hidden="true" tabindex="-1"></a>one_through_ten</span>
<span id="cb34-10"><a href="data-types.html#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co">## array([ 1,  2,  3,  4,  5,  6,  7,  8, 99, 10])</span></span>
<span id="cb34-11"><a href="data-types.html#cb34-11" aria-hidden="true" tabindex="-1"></a>one_through_ten[one_through_ten <span class="op">&gt;</span> <span class="dv">3</span>] <span class="co"># bigger than three</span></span>
<span id="cb34-12"><a href="data-types.html#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="co">## array([ 4,  5,  6,  7,  8, 99, 10])</span></span></code></pre></div>
</div>
<div id="indexing-pandas-series" class="section level3" number="2.2.7">
<h3><span class="header-section-number">2.2.7</span> Indexing pandas’ Series</h3>
<p>At a minimum, there is little that is new that you <em>need</em> to learn to go from Numpy arrays to pandas’ Series objects. They still have the <code>[]</code> operator, and <a href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html">many methods are shared across these two types</a>. The following is almost equivalent to the code above, and the only apparent difference is that the results are printed a little differently.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="data-types.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb35-2"><a href="data-types.html#cb35-2" aria-hidden="true" tabindex="-1"></a>one_through_ten <span class="op">=</span> pd.Series(np.arange(<span class="dv">1</span>, <span class="dv">11</span>))</span>
<span id="cb35-3"><a href="data-types.html#cb35-3" aria-hidden="true" tabindex="-1"></a>one_through_ten[np.array([<span class="dv">2</span>,<span class="dv">3</span>])]</span>
<span id="cb35-4"><a href="data-types.html#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    3</span></span>
<span id="cb35-5"><a href="data-types.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 3    4</span></span>
<span id="cb35-6"><a href="data-types.html#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb35-7"><a href="data-types.html#cb35-7" aria-hidden="true" tabindex="-1"></a>one_through_ten[<span class="dv">1</span>:<span class="dv">10</span>:<span class="dv">2</span>] <span class="co"># evens</span></span>
<span id="cb35-8"><a href="data-types.html#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 1     2</span></span>
<span id="cb35-9"><a href="data-types.html#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 3     4</span></span>
<span id="cb35-10"><a href="data-types.html#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 5     6</span></span>
<span id="cb35-11"><a href="data-types.html#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 7     8</span></span>
<span id="cb35-12"><a href="data-types.html#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 9    10</span></span>
<span id="cb35-13"><a href="data-types.html#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb35-14"><a href="data-types.html#cb35-14" aria-hidden="true" tabindex="-1"></a>one_through_ten[::<span class="op">-</span><span class="dv">1</span>] <span class="co"># reversed</span></span>
<span id="cb35-15"><a href="data-types.html#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 9    10</span></span>
<span id="cb35-16"><a href="data-types.html#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">## 8     9</span></span>
<span id="cb35-17"><a href="data-types.html#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">## 7     8</span></span>
<span id="cb35-18"><a href="data-types.html#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co">## 6     7</span></span>
<span id="cb35-19"><a href="data-types.html#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co">## 5     6</span></span>
<span id="cb35-20"><a href="data-types.html#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co">## 4     5</span></span>
<span id="cb35-21"><a href="data-types.html#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="co">## 3     4</span></span>
<span id="cb35-22"><a href="data-types.html#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="co">## 2     3</span></span>
<span id="cb35-23"><a href="data-types.html#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="co">## 1     2</span></span>
<span id="cb35-24"><a href="data-types.html#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="co">## 0     1</span></span>
<span id="cb35-25"><a href="data-types.html#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb35-26"><a href="data-types.html#cb35-26" aria-hidden="true" tabindex="-1"></a>one_through_ten[<span class="op">-</span><span class="dv">2</span>] <span class="op">=</span> <span class="dv">99</span> <span class="co"># second to last</span></span>
<span id="cb35-27"><a href="data-types.html#cb35-27" aria-hidden="true" tabindex="-1"></a>one_through_ten</span>
<span id="cb35-28"><a href="data-types.html#cb35-28" aria-hidden="true" tabindex="-1"></a><span class="co">##  0     1</span></span>
<span id="cb35-29"><a href="data-types.html#cb35-29" aria-hidden="true" tabindex="-1"></a><span class="co">##  1     2</span></span>
<span id="cb35-30"><a href="data-types.html#cb35-30" aria-hidden="true" tabindex="-1"></a><span class="co">##  2     3</span></span>
<span id="cb35-31"><a href="data-types.html#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="co">##  3     4</span></span>
<span id="cb35-32"><a href="data-types.html#cb35-32" aria-hidden="true" tabindex="-1"></a><span class="co">##  4     5</span></span>
<span id="cb35-33"><a href="data-types.html#cb35-33" aria-hidden="true" tabindex="-1"></a><span class="co">##  5     6</span></span>
<span id="cb35-34"><a href="data-types.html#cb35-34" aria-hidden="true" tabindex="-1"></a><span class="co">##  6     7</span></span>
<span id="cb35-35"><a href="data-types.html#cb35-35" aria-hidden="true" tabindex="-1"></a><span class="co">##  7     8</span></span>
<span id="cb35-36"><a href="data-types.html#cb35-36" aria-hidden="true" tabindex="-1"></a><span class="co">##  8     9</span></span>
<span id="cb35-37"><a href="data-types.html#cb35-37" aria-hidden="true" tabindex="-1"></a><span class="co">##  9    10</span></span>
<span id="cb35-38"><a href="data-types.html#cb35-38" aria-hidden="true" tabindex="-1"></a><span class="co">## -2    99</span></span>
<span id="cb35-39"><a href="data-types.html#cb35-39" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb35-40"><a href="data-types.html#cb35-40" aria-hidden="true" tabindex="-1"></a>one_through_ten[one_through_ten <span class="op">&gt;</span> <span class="dv">3</span>] <span class="co"># bigger than three</span></span>
<span id="cb35-41"><a href="data-types.html#cb35-41" aria-hidden="true" tabindex="-1"></a><span class="co">##  3     4</span></span>
<span id="cb35-42"><a href="data-types.html#cb35-42" aria-hidden="true" tabindex="-1"></a><span class="co">##  4     5</span></span>
<span id="cb35-43"><a href="data-types.html#cb35-43" aria-hidden="true" tabindex="-1"></a><span class="co">##  5     6</span></span>
<span id="cb35-44"><a href="data-types.html#cb35-44" aria-hidden="true" tabindex="-1"></a><span class="co">##  6     7</span></span>
<span id="cb35-45"><a href="data-types.html#cb35-45" aria-hidden="true" tabindex="-1"></a><span class="co">##  7     8</span></span>
<span id="cb35-46"><a href="data-types.html#cb35-46" aria-hidden="true" tabindex="-1"></a><span class="co">##  8     9</span></span>
<span id="cb35-47"><a href="data-types.html#cb35-47" aria-hidden="true" tabindex="-1"></a><span class="co">##  9    10</span></span>
<span id="cb35-48"><a href="data-types.html#cb35-48" aria-hidden="true" tabindex="-1"></a><span class="co">## -2    99</span></span>
<span id="cb35-49"><a href="data-types.html#cb35-49" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb35-50"><a href="data-types.html#cb35-50" aria-hidden="true" tabindex="-1"></a>one_through_ten.<span class="bu">sum</span>()</span>
<span id="cb35-51"><a href="data-types.html#cb35-51" aria-hidden="true" tabindex="-1"></a><span class="co">## 154</span></span></code></pre></div>
<p>However, <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#different-choices-for-indexing">pandas’ Series have <code>.loc</code> and <code>.iloc</code> methods</a>. We won’t talk much about these two methods now, but they will become very important when we start to discuss pandas’ data frames in section <a href="data-types.html#data-frames-in-python">2.7.2</a>.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="data-types.html#cb36-1" aria-hidden="true" tabindex="-1"></a>one_through_ten.iloc[<span class="dv">2</span>]</span>
<span id="cb36-2"><a href="data-types.html#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">## 3</span></span>
<span id="cb36-3"><a href="data-types.html#cb36-3" aria-hidden="true" tabindex="-1"></a>one_through_ten.loc[<span class="dv">2</span>]</span>
<span id="cb36-4"><a href="data-types.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 3</span></span></code></pre></div>
</div>
<div id="some-gotchas" class="section level3" number="2.2.8">
<h3><span class="header-section-number">2.2.8</span> Some Gotchas</h3>
<div id="shallow-versus-deep-copies" class="section level4" number="2.2.8.1">
<h4><span class="header-section-number">2.2.8.1</span> Shallow versus Deep Copies</h4>
<p>In R, assignment usually produces a <strong>deep copy.</strong> In the code below, we create <code>b</code> from <code>a</code>. If we modify <code>b</code>, these changes don’t affect <code>a</code>. This takes up more memory, but our program is easier to follow as we don’t have to keep track of connections between objects.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-types.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in R</span></span>
<span id="cb37-2"><a href="data-types.html#cb37-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb37-3"><a href="data-types.html#cb37-3" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> a</span>
<span id="cb37-4"><a href="data-types.html#cb37-4" aria-hidden="true" tabindex="-1"></a>b[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">999</span></span>
<span id="cb37-5"><a href="data-types.html#cb37-5" aria-hidden="true" tabindex="-1"></a>a <span class="co"># still the same!</span></span>
<span id="cb37-6"><a href="data-types.html#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3</span></span></code></pre></div>
<p>With Numpy arrays in Python, <a href="https://numpy.org/devdocs/user/quickstart.html#copies-and-views">“shallow copies” can be created by simple assignment, or by explicitly constructing a <strong>view</strong></a>. In the code below, <code>a</code>, <code>b</code>, <code>c</code>, and <code>d</code> all share the same data. If you modify one, you change all the others. This can make the program more confusing, but on the other hand, it can also improve computational efficiency.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="data-types.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in python</span></span>
<span id="cb38-2"><a href="data-types.html#cb38-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb38-3"><a href="data-types.html#cb38-3" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> a <span class="co"># b is an alias</span></span>
<span id="cb38-4"><a href="data-types.html#cb38-4" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> a.view() <span class="co"># c is a view</span></span>
<span id="cb38-5"><a href="data-types.html#cb38-5" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> a[:]</span>
<span id="cb38-6"><a href="data-types.html#cb38-6" aria-hidden="true" tabindex="-1"></a>b[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">999</span></span>
<span id="cb38-7"><a href="data-types.html#cb38-7" aria-hidden="true" tabindex="-1"></a>a <span class="co"># two names for the same object in memory</span></span>
<span id="cb38-8"><a href="data-types.html#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co">## array([999,   2,   3])</span></span>
<span id="cb38-9"><a href="data-types.html#cb38-9" aria-hidden="true" tabindex="-1"></a>b</span>
<span id="cb38-10"><a href="data-types.html#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co">## array([999,   2,   3])</span></span>
<span id="cb38-11"><a href="data-types.html#cb38-11" aria-hidden="true" tabindex="-1"></a>c</span>
<span id="cb38-12"><a href="data-types.html#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="co">## array([999,   2,   3])</span></span>
<span id="cb38-13"><a href="data-types.html#cb38-13" aria-hidden="true" tabindex="-1"></a>d</span>
<span id="cb38-14"><a href="data-types.html#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="co">## array([999,   2,   3])</span></span></code></pre></div>
<p>It’s the same story with pandas’ Series objects. You’re usually making a “shallow” copy.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="data-types.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in python</span></span>
<span id="cb39-2"><a href="data-types.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb39-3"><a href="data-types.html#cb39-3" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> pd.Series(np.array([<span class="fl">100.0</span>,<span class="fl">200.0</span>,<span class="fl">300.0</span>]))</span>
<span id="cb39-4"><a href="data-types.html#cb39-4" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> s1</span>
<span id="cb39-5"><a href="data-types.html#cb39-5" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> s1.view()</span>
<span id="cb39-6"><a href="data-types.html#cb39-6" aria-hidden="true" tabindex="-1"></a>s4 <span class="op">=</span> s1[:]</span>
<span id="cb39-7"><a href="data-types.html#cb39-7" aria-hidden="true" tabindex="-1"></a>s1[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">999</span></span>
<span id="cb39-8"><a href="data-types.html#cb39-8" aria-hidden="true" tabindex="-1"></a>s1</span>
<span id="cb39-9"><a href="data-types.html#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    999.0</span></span>
<span id="cb39-10"><a href="data-types.html#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    200.0</span></span>
<span id="cb39-11"><a href="data-types.html#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    300.0</span></span>
<span id="cb39-12"><a href="data-types.html#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: float64</span></span>
<span id="cb39-13"><a href="data-types.html#cb39-13" aria-hidden="true" tabindex="-1"></a>s2</span>
<span id="cb39-14"><a href="data-types.html#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    999.0</span></span>
<span id="cb39-15"><a href="data-types.html#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    200.0</span></span>
<span id="cb39-16"><a href="data-types.html#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    300.0</span></span>
<span id="cb39-17"><a href="data-types.html#cb39-17" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: float64</span></span>
<span id="cb39-18"><a href="data-types.html#cb39-18" aria-hidden="true" tabindex="-1"></a>s3</span>
<span id="cb39-19"><a href="data-types.html#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    999.0</span></span>
<span id="cb39-20"><a href="data-types.html#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    200.0</span></span>
<span id="cb39-21"><a href="data-types.html#cb39-21" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    300.0</span></span>
<span id="cb39-22"><a href="data-types.html#cb39-22" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: float64</span></span>
<span id="cb39-23"><a href="data-types.html#cb39-23" aria-hidden="true" tabindex="-1"></a>s4</span>
<span id="cb39-24"><a href="data-types.html#cb39-24" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    999.0</span></span>
<span id="cb39-25"><a href="data-types.html#cb39-25" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    200.0</span></span>
<span id="cb39-26"><a href="data-types.html#cb39-26" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    300.0</span></span>
<span id="cb39-27"><a href="data-types.html#cb39-27" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: float64</span></span></code></pre></div>
<p>If you want a “deep copy” in Python, you usually want a function or method called <code>copy()</code>. Use <code>np.copy</code> or <a href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.copy.html#numpy-ndarray-copy"><code>np.ndarray.copy</code></a> when you have a Numpy array.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="data-types.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in python</span></span>
<span id="cb40-2"><a href="data-types.html#cb40-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb40-3"><a href="data-types.html#cb40-3" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.copy(a)</span>
<span id="cb40-4"><a href="data-types.html#cb40-4" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> a.copy()</span>
<span id="cb40-5"><a href="data-types.html#cb40-5" aria-hidden="true" tabindex="-1"></a>b[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">999</span></span>
<span id="cb40-6"><a href="data-types.html#cb40-6" aria-hidden="true" tabindex="-1"></a>a </span>
<span id="cb40-7"><a href="data-types.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co">## array([1, 2, 3])</span></span>
<span id="cb40-8"><a href="data-types.html#cb40-8" aria-hidden="true" tabindex="-1"></a>b</span>
<span id="cb40-9"><a href="data-types.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">## array([999,   2,   3])</span></span>
<span id="cb40-10"><a href="data-types.html#cb40-10" aria-hidden="true" tabindex="-1"></a>c</span>
<span id="cb40-11"><a href="data-types.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">## array([1, 2, 3])</span></span></code></pre></div>
<p>Use <a href="https://pandas.pydata.org/docs/reference/api/pandas.Series.copy.html#pandas-series-copy"><code>pandas.Series.copy</code></a> with pandas’ Series objects. Make sure not to set the <code>deep</code> argument to <code>False</code>. Otherwise you’ll get a shallow copy.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="data-types.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in python</span></span>
<span id="cb41-2"><a href="data-types.html#cb41-2" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> pd.Series(np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]))</span>
<span id="cb41-3"><a href="data-types.html#cb41-3" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> s1.copy()</span>
<span id="cb41-4"><a href="data-types.html#cb41-4" aria-hidden="true" tabindex="-1"></a>s3 <span class="op">=</span> s1.copy(deep<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb41-5"><a href="data-types.html#cb41-5" aria-hidden="true" tabindex="-1"></a>s1[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">999</span></span>
<span id="cb41-6"><a href="data-types.html#cb41-6" aria-hidden="true" tabindex="-1"></a>s1</span>
<span id="cb41-7"><a href="data-types.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    999</span></span>
<span id="cb41-8"><a href="data-types.html#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 1      2</span></span>
<span id="cb41-9"><a href="data-types.html#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 2      3</span></span>
<span id="cb41-10"><a href="data-types.html#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb41-11"><a href="data-types.html#cb41-11" aria-hidden="true" tabindex="-1"></a>s2</span>
<span id="cb41-12"><a href="data-types.html#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    1</span></span>
<span id="cb41-13"><a href="data-types.html#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    2</span></span>
<span id="cb41-14"><a href="data-types.html#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    3</span></span>
<span id="cb41-15"><a href="data-types.html#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span>
<span id="cb41-16"><a href="data-types.html#cb41-16" aria-hidden="true" tabindex="-1"></a>s3</span>
<span id="cb41-17"><a href="data-types.html#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    999</span></span>
<span id="cb41-18"><a href="data-types.html#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="co">## 1      2</span></span>
<span id="cb41-19"><a href="data-types.html#cb41-19" aria-hidden="true" tabindex="-1"></a><span class="co">## 2      3</span></span>
<span id="cb41-20"><a href="data-types.html#cb41-20" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: int64</span></span></code></pre></div>
</div>
</div>
<div id="how-do-r-and-python-handle-missing-values" class="section level3" number="2.2.9">
<h3><span class="header-section-number">2.2.9</span> How do R and Python handle missing values?</h3>
<p>R has <code>NULL</code>, <code>NaN</code>, and <code>NA</code>. Python has <code>None</code>, <code>np.nan</code>. If your eyes are glazing over already and you’re thinking “they all look like the same”–they are not.</p>
<p>R’s <code>NULL</code> and Python’s <code>None</code> are similar. Both represent “nothingness.” This is <em>not</em> the same as <code>0</code>, or an empty string, or <code>FALSE</code>/<code>False</code>. This is commonly used to detect if a user fails to pass in an argument to a function, or if a function fails to “return” (more information on functions can be found in section <a href="data-types.html#user-defined-functions-in-r-and-python">2.5</a>) anything meaningful.</p>
<p>In R, for example, if a function fails to return anything, then it actually returns a <code>NULL</code>.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data-types.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NULL</span><span class="sc">==</span><span class="cn">FALSE</span></span>
<span id="cb42-2"><a href="data-types.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="do">## logical(0)</span></span>
<span id="cb42-3"><a href="data-types.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="cn">NULL</span><span class="sc">==</span><span class="cn">NULL</span></span>
<span id="cb42-4"><a href="data-types.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="do">## logical(0)</span></span>
<span id="cb42-5"><a href="data-types.html#cb42-5" aria-hidden="true" tabindex="-1"></a>doNothingFunc <span class="ot">&lt;-</span> <span class="cf">function</span>(a){}</span>
<span id="cb42-6"><a href="data-types.html#cb42-6" aria-hidden="true" tabindex="-1"></a>thing <span class="ot">&lt;-</span> <span class="fu">doNothingFunc</span>()</span>
<span id="cb42-7"><a href="data-types.html#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">is.null</span>(thing)</span>
<span id="cb42-8"><a href="data-types.html#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb42-9"><a href="data-types.html#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="cn">NULL</span>)</span>
<span id="cb42-10"><a href="data-types.html#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;NULL&quot;</span></span></code></pre></div>
<p>In Python, we have the following.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="data-types.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="va">None</span> <span class="op">==</span> <span class="va">False</span></span>
<span id="cb43-2"><a href="data-types.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co">## False</span></span>
<span id="cb43-3"><a href="data-types.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="va">None</span> <span class="op">==</span> <span class="va">None</span></span>
<span id="cb43-4"><a href="data-types.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">## True</span></span>
<span id="cb43-5"><a href="data-types.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> do_nothing_func():</span>
<span id="cb43-6"><a href="data-types.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">pass</span></span>
<span id="cb43-7"><a href="data-types.html#cb43-7" aria-hidden="true" tabindex="-1"></a>thing <span class="op">=</span> do_nothing_func()</span>
<span id="cb43-8"><a href="data-types.html#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> thing <span class="kw">is</span> <span class="va">None</span>:</span>
<span id="cb43-9"><a href="data-types.html#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&quot;thing is None!&quot;</span>)</span>
<span id="cb43-10"><a href="data-types.html#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co">## thing is None!</span></span>
<span id="cb43-11"><a href="data-types.html#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(<span class="va">None</span>)</span>
<span id="cb43-12"><a href="data-types.html#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;class &#39;NoneType&#39;&gt;</span></span></code></pre></div>
<p>“Nan” stands for “not a number.” <code>NaN</code> is an object of type <code>double</code> in R, and <code>nan</code> is of type <code>float</code> in Python. It can come in handy when you have <span class="math inline">\(0/0\)</span> or <span class="math inline">\(\infty / -\infty\)</span>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-types.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in R</span></span>
<span id="cb44-2"><a href="data-types.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span>
<span id="cb44-3"><a href="data-types.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] NaN</span></span>
<span id="cb44-4"><a href="data-types.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="cn">Inf</span><span class="sc">/</span><span class="cn">Inf</span></span>
<span id="cb44-5"><a href="data-types.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] NaN</span></span>
<span id="cb44-6"><a href="data-types.html#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="dv">0</span><span class="sc">/</span><span class="dv">0</span>)</span>
<span id="cb44-7"><a href="data-types.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb45"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="data-types.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in Python</span></span>
<span id="cb45-2"><a href="data-types.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="op">/</span><span class="dv">0</span></span>
<span id="cb45-3"><a href="data-types.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Error in py_call_impl(callable, dots$args, dots$keywords): ZeroDivisionError: division by zero</span></span>
<span id="cb45-4"><a href="data-types.html#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb45-5"><a href="data-types.html#cb45-5" aria-hidden="true" tabindex="-1"></a>np.inf<span class="op">/</span>np.inf</span>
<span id="cb45-6"><a href="data-types.html#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co">## nan</span></span>
<span id="cb45-7"><a href="data-types.html#cb45-7" aria-hidden="true" tabindex="-1"></a>np.isnan(np.nan)</span>
<span id="cb45-8"><a href="data-types.html#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="co">## True</span></span></code></pre></div>
<p>“NA” is short for “not available.” Missing data is a fact of life in data science. Observations are often missing in data sets, or introduced after joining/merging data sets together (more on this in section <a href="odds-and-ends.html#merging-or-joining-data-sets">3.4.3</a>). There are many techniques designed to estimate quantities in the presence of missing data. When you code them up, you’ll need to make sure you deal with <code>NA</code>s properly.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-types.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># in R</span></span>
<span id="cb46-2"><a href="data-types.html#cb46-2" aria-hidden="true" tabindex="-1"></a>babyData <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="sc">-</span><span class="dv">1</span>,<span class="dv">9</span>,<span class="cn">NA</span>,<span class="dv">21</span>)</span>
<span id="cb46-3"><a href="data-types.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">==</span> <span class="cn">TRUE</span> </span>
<span id="cb46-4"><a href="data-types.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] NA</span></span>
<span id="cb46-5"><a href="data-types.html#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(babyData)</span>
<span id="cb46-6"><a href="data-types.html#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE FALSE FALSE  TRUE FALSE</span></span>
<span id="cb46-7"><a href="data-types.html#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="cn">NA</span>)</span>
<span id="cb46-8"><a href="data-types.html#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;logical&quot;</span></span></code></pre></div>
<p>Unfortunately, Python’s support of an <code>NA</code>-like object is more limited. There is no <code>NA</code> object in base Python. And often <code>NaN</code>s will appear in place of an <code>NA</code>. There are a few useful tools, though. The Numpy library offers <a href="https://numpy.org/devdocs/reference/maskedarray.html">“masked arrays”</a>, for instance.</p>
<p>Also, as of version <code>1.0.0</code>, the <a href="https://pandas.pydata.org/docs/user_guide/index.html#user-guide">pandas library</a> has an experimental <code>pd.NA</code> object. However, they <a href="https://pandas.pydata.org/pandas-docs/dev/user_guide/missing_data.html#missing-data-na">warn</a> that “the behaviour of <code>pd.NA</code> can still change without warning.”</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="data-types.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb47-2"><a href="data-types.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy.ma <span class="im">as</span> ma</span>
<span id="cb47-3"><a href="data-types.html#cb47-3" aria-hidden="true" tabindex="-1"></a>baby_data <span class="op">=</span> ma.array([<span class="dv">0</span>,<span class="op">-</span><span class="dv">1</span>,<span class="dv">9</span>,<span class="op">-</span><span class="dv">9999</span>, <span class="dv">21</span>]) <span class="co"># -9999 &quot;stands for&quot; missing</span></span>
<span id="cb47-4"><a href="data-types.html#cb47-4" aria-hidden="true" tabindex="-1"></a>baby_data[<span class="dv">3</span>] <span class="op">=</span> ma.masked</span>
<span id="cb47-5"><a href="data-types.html#cb47-5" aria-hidden="true" tabindex="-1"></a>np.average(baby_data)</span>
<span id="cb47-6"><a href="data-types.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 7.25</span></span></code></pre></div>
<div class="rmd-caution">
<p>
Be careful of using extreme values to stand in for what should be an <code>NA</code>. Failing to mark the above missing value correctly would lead to extremely wrong calculations!
</p>
</div>
<!---
---------------------------------------------------------------------------
-->
</div>
</div>
<div id="numpys-ndarrays-versus-rs-matrices-and-arrays" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Numpy’s <code>ndarray</code>s versus R’s matrices and arrays</h2>
<p>Sometimes you want a collection of elements that are <em>all the same type</em>, but you want to store them in a two- or three-dimensional structure. For instance, say you need to use matrix multiplication for some linear regression software you’re writing, or that you needed to use tensors for a computer vision project you’re working on.</p>
<div id="numpy-ndarrays-in-python" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Numpy <code>ndarray</code>s In Python</h3>
<p>In Python, you could still use arrays for these kinds of tasks. You will be pleased to learn that the Numpy <code>array</code>s we discussed earlier are a special case of <a href="https://numpy.org/doc/stable/reference/arrays.ndarray.html">Numpy’s N-dimensional arrays</a>. Each array will come with an enormous amount of <a href="https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-methods">methods</a> and <a href="https://numpy.org/doc/stable/reference/arrays.ndarray.html#array-attributes">attributes</a> (more on object-oriented program in chapter <a href="an-introduction-to-object-oriented-programming.html#an-introduction-to-object-oriented-programming">4</a>) attached to it. A few are demonstrated below.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="data-types.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb48-2"><a href="data-types.html#cb48-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.array([[<span class="dv">1</span>,<span class="dv">2</span>],[<span class="dv">3</span>,<span class="dv">4</span>]], np.<span class="bu">float</span>)</span>
<span id="cb48-3"><a href="data-types.html#cb48-3" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb48-4"><a href="data-types.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co">## array([[1., 2.],</span></span>
<span id="cb48-5"><a href="data-types.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co">##        [3., 4.]])</span></span>
<span id="cb48-6"><a href="data-types.html#cb48-6" aria-hidden="true" tabindex="-1"></a>a.shape</span>
<span id="cb48-7"><a href="data-types.html#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co">## (2, 2)</span></span>
<span id="cb48-8"><a href="data-types.html#cb48-8" aria-hidden="true" tabindex="-1"></a>a.ndim</span>
<span id="cb48-9"><a href="data-types.html#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 2</span></span>
<span id="cb48-10"><a href="data-types.html#cb48-10" aria-hidden="true" tabindex="-1"></a>a.dtype</span>
<span id="cb48-11"><a href="data-types.html#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype(&#39;float64&#39;)</span></span>
<span id="cb48-12"><a href="data-types.html#cb48-12" aria-hidden="true" tabindex="-1"></a>a.<span class="bu">max</span>()</span>
<span id="cb48-13"><a href="data-types.html#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="co">## 4.0</span></span>
<span id="cb48-14"><a href="data-types.html#cb48-14" aria-hidden="true" tabindex="-1"></a>a.resize((<span class="dv">1</span>,<span class="dv">4</span>)) <span class="co"># modification is **in place**</span></span>
<span id="cb48-15"><a href="data-types.html#cb48-15" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb48-16"><a href="data-types.html#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="co">## array([[1., 2., 3., 4.]])</span></span></code></pre></div>
</div>
<div id="the-matrix-and-array-classes-in-r" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> The <code>matrix</code> and <code>array</code> classes in R</h3>
<p>In Python, adding a dimension to your “container” is simple. You keep using Numpy arrays, and you just change the <code>.shape</code> attribute (perhaps with a call to <code>.reshape()</code> or something similar). In R, there is a stronger distinction between 1-,2-, and 3-dimensional containers. Each has its own class. 2-dimensional containers that store objects of the same type are of the <code>matrix</code> class. Containers with 3 or more dimensions are of the <code>array</code> class. In this section, I will provide a quick introduction to using these two classes. For more information, see chapter 3 of <span class="citation">(<a href="#ref-matloff_r_book" role="doc-biblioref">Matloff 2011</a>)</span>.</p>
<div class="rmd-caution">
<p>
Just like <code>vector</code>s, <code>matrix</code> objects do not necessarily have to be used to perform matrix arithmetic. Yes, they require all the elements are of the same type, but it doesn’t really make sense to “multiply” <code>matrix</code> objects that hold onto <code>character</code>s.
</p>
</div>
<p>I usually create <code>matrix</code> objects with the <code>matrix()</code> function or the <code>as.matrix()</code> function. <code>matrix()</code> is to be preferred in my opinion. The first argument is explicitly a <code>vector</code> of all the flattened data that you want in your <code>matrix</code>. On the other hand, <code>as.matrix()</code> is more flexible; it takes in a variety of R objects (e.g. <code>data.frame</code>s), and tries to figure out what to do with them on a case-by-case basis. In other words, <code>as.matrix()</code> is a <em>generic function</em>. More information about generic functions is provided in <a href="an-introduction-to-object-oriented-programming.html#using-s3-objects">4.2.2</a>.</p>
<p>Some other things to remember with <code>matrix()</code>: <code>byrow=</code> is <code>FALSE</code> by default, and you will also need to specify either <code>ncol=</code> and/or <code>nrow=</code> if you want anything that isn’t a 1-column <code>matrix</code>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-types.html#cb49-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb49-2"><a href="data-types.html#cb49-2" aria-hidden="true" tabindex="-1"></a>A</span>
<span id="cb49-3"><a href="data-types.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1]</span></span>
<span id="cb49-4"><a href="data-types.html#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1</span></span>
<span id="cb49-5"><a href="data-types.html#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    2</span></span>
<span id="cb49-6"><a href="data-types.html#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [3,]    3</span></span>
<span id="cb49-7"><a href="data-types.html#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [4,]    4</span></span>
<span id="cb49-8"><a href="data-types.html#cb49-8" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb49-9"><a href="data-types.html#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb49-10"><a href="data-types.html#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    3</span></span>
<span id="cb49-11"><a href="data-types.html#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    2    4</span></span>
<span id="cb49-12"><a href="data-types.html#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> T)</span>
<span id="cb49-13"><a href="data-types.html#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb49-14"><a href="data-types.html#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    2</span></span>
<span id="cb49-15"><a href="data-types.html#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    3    4</span></span>
<span id="cb49-16"><a href="data-types.html#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="fu">as.matrix</span>(<span class="fu">data.frame</span>(<span class="at">firstCol =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">secondCol =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>))) <span class="co"># coerces numbers to characters!</span></span>
<span id="cb49-17"><a href="data-types.html#cb49-17" aria-hidden="true" tabindex="-1"></a><span class="do">##      firstCol secondCol</span></span>
<span id="cb49-18"><a href="data-types.html#cb49-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,] &quot;1&quot;      &quot;a&quot;      </span></span>
<span id="cb49-19"><a href="data-types.html#cb49-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,] &quot;2&quot;      &quot;b&quot;      </span></span>
<span id="cb49-20"><a href="data-types.html#cb49-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [3,] &quot;3&quot;      &quot;c&quot;</span></span>
<span id="cb49-21"><a href="data-types.html#cb49-21" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(A)</span>
<span id="cb49-22"><a href="data-types.html#cb49-22" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4 1</span></span>
<span id="cb49-23"><a href="data-types.html#cb49-23" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(A)</span>
<span id="cb49-24"><a href="data-types.html#cb49-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb49-25"><a href="data-types.html#cb49-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(A)</span>
<span id="cb49-26"><a href="data-types.html#cb49-26" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span></code></pre></div>
<p>I use <code>array()</code> to create <code>array</code> objects. Personally, I rarely use this type, but this doesn’t mean you should avoid learning about it. Rather, this is a reflection of what kind of data sets I prefer to work with, and the fact that you can’t matrix-multiply <code>array</code>s together. You won’t be able to avoid 3-d data sets (3-dimensions, not a 3-column <code>matrix</code>) forever, though, particularly if you’re working in an area such as neuroimaging or computer vision.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data-types.html#cb50-1" aria-hidden="true" tabindex="-1"></a>myArray <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">4</span>), <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb50-2"><a href="data-types.html#cb50-2" aria-hidden="true" tabindex="-1"></a>myArray</span>
<span id="cb50-3"><a href="data-types.html#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 1</span></span>
<span id="cb50-4"><a href="data-types.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb50-5"><a href="data-types.html#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb50-6"><a href="data-types.html#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    1</span></span>
<span id="cb50-7"><a href="data-types.html#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    1    1</span></span>
<span id="cb50-8"><a href="data-types.html#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb50-9"><a href="data-types.html#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 2</span></span>
<span id="cb50-10"><a href="data-types.html#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb50-11"><a href="data-types.html#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb50-12"><a href="data-types.html#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    2    2</span></span>
<span id="cb50-13"><a href="data-types.html#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    2    2</span></span>
<span id="cb50-14"><a href="data-types.html#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb50-15"><a href="data-types.html#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="do">## , , 3</span></span>
<span id="cb50-16"><a href="data-types.html#cb50-16" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb50-17"><a href="data-types.html#cb50-17" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2]</span></span>
<span id="cb50-18"><a href="data-types.html#cb50-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    3    3</span></span>
<span id="cb50-19"><a href="data-types.html#cb50-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    3    3</span></span></code></pre></div>
<p>You can matrix-multiply <code>matrix</code> objects together with the <code>%*%</code> operator. If you’re working on this, then the transpose operator (i.e. <code>t()</code>) comes in handy, too. You can still use element-wise (Hadamard) multiplication. This is defined with the more familiar multiplication operator <code>*</code>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data-types.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate a quadratic form y&#39;Qy</span></span>
<span id="cb51-2"><a href="data-types.html#cb51-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span>
<span id="cb51-3"><a href="data-types.html#cb51-3" aria-hidden="true" tabindex="-1"></a>Q <span class="ot">&lt;-</span> <span class="fu">diag</span>(<span class="dv">1</span>, <span class="dv">3</span>) <span class="co"># diag() gets and sets diagonal matrices</span></span>
<span id="cb51-4"><a href="data-types.html#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(y) <span class="sc">%*%</span> Q <span class="sc">%*%</span> y</span>
<span id="cb51-5"><a href="data-types.html#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1]</span></span>
<span id="cb51-6"><a href="data-types.html#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]   14</span></span></code></pre></div>
<p>Sometimes you need to access or modify individual elements of a <code>matrix</code> object. You can use the familiar <code>[</code> and <code>[&lt;-</code> operators to do this. Here is a setting example. You don’t need to worry about coercion to different types here.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data-types.html#cb52-1" aria-hidden="true" tabindex="-1"></a>Qcopy <span class="ot">&lt;-</span> Q</span>
<span id="cb52-2"><a href="data-types.html#cb52-2" aria-hidden="true" tabindex="-1"></a>Qcopy[<span class="dv">1</span>,<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb52-3"><a href="data-types.html#cb52-3" aria-hidden="true" tabindex="-1"></a>Qcopy[<span class="dv">2</span>,<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb52-4"><a href="data-types.html#cb52-4" aria-hidden="true" tabindex="-1"></a>Qcopy</span>
<span id="cb52-5"><a href="data-types.html#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb52-6"><a href="data-types.html#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    3    0    0</span></span>
<span id="cb52-7"><a href="data-types.html#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    0    4    0</span></span>
<span id="cb52-8"><a href="data-types.html#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [3,]    0    0    1</span></span></code></pre></div>
<p>Here are some extraction examples. Notice that, if it can, <code>[</code> will coerce a <code>matrix</code> to <code>vector</code>. If you wish to avoid this, you can specify <code>drop=FALSE</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data-types.html#cb53-1" aria-hidden="true" tabindex="-1"></a>Q</span>
<span id="cb53-2"><a href="data-types.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb53-3"><a href="data-types.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    1    0    0</span></span>
<span id="cb53-4"><a href="data-types.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]    0    1    0</span></span>
<span id="cb53-5"><a href="data-types.html#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [3,]    0    0    1</span></span>
<span id="cb53-6"><a href="data-types.html#cb53-6" aria-hidden="true" tabindex="-1"></a>Q[<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb53-7"><a href="data-types.html#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb53-8"><a href="data-types.html#cb53-8" aria-hidden="true" tabindex="-1"></a>Q[<span class="dv">2</span>,]</span>
<span id="cb53-9"><a href="data-types.html#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0 1 0</span></span>
<span id="cb53-10"><a href="data-types.html#cb53-10" aria-hidden="true" tabindex="-1"></a>Q[<span class="dv">2</span>,,drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb53-11"><a href="data-types.html#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="do">##      [,1] [,2] [,3]</span></span>
<span id="cb53-12"><a href="data-types.html#cb53-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,]    0    1    0</span></span>
<span id="cb53-13"><a href="data-types.html#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(Q)</span>
<span id="cb53-14"><a href="data-types.html#cb53-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;matrix&quot; &quot;array&quot;</span></span>
<span id="cb53-15"><a href="data-types.html#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(Q[<span class="dv">2</span>,])</span>
<span id="cb53-16"><a href="data-types.html#cb53-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;numeric&quot;</span></span>
<span id="cb53-17"><a href="data-types.html#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(Q[<span class="dv">2</span>,,<span class="at">drop=</span><span class="cn">FALSE</span>])  </span>
<span id="cb53-18"><a href="data-types.html#cb53-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;matrix&quot; &quot;array&quot;</span></span>
<span id="cb53-19"><a href="data-types.html#cb53-19" aria-hidden="true" tabindex="-1"></a><span class="fu">row</span>(Q) <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb53-20"><a href="data-types.html#cb53-20" aria-hidden="true" tabindex="-1"></a><span class="do">##       [,1]  [,2]  [,3]</span></span>
<span id="cb53-21"><a href="data-types.html#cb53-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,] FALSE FALSE FALSE</span></span>
<span id="cb53-22"><a href="data-types.html#cb53-22" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,]  TRUE  TRUE  TRUE</span></span>
<span id="cb53-23"><a href="data-types.html#cb53-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [3,]  TRUE  TRUE  TRUE</span></span>
<span id="cb53-24"><a href="data-types.html#cb53-24" aria-hidden="true" tabindex="-1"></a>Q[<span class="fu">row</span>(Q) <span class="sc">&gt;</span> <span class="dv">1</span>] <span class="co"># column-wise ordering</span></span>
<span id="cb53-25"><a href="data-types.html#cb53-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0 0 1 0 0 1</span></span></code></pre></div>
<p>There are other functions that operate on one or more <code>matrix</code> objects in more interesting ways, but much of this will be covered in future sections. For instance, we will describe how <code>apply()</code> works with <code>matrix</code>s in section <a href="functional-programming.html#functional-programming">5</a>, and we will discuss combining <code>matrix</code> objects in different ways in section <a href="odds-and-ends.html#reshaping-and-combining-data-sets">3.4</a>.</p>
</div>
</div>
<div id="rs-lists-versus-pythons-lists-and-dictionaries" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> R’s lists versus Python’s lists and dictionaries</h2>
<p>When you need to store elements in a container, but you can’t guarantee that these elements all have the same type, or you can’t guarantee that they all have the same size, then you need a <code>list</code> in R. In Python, you might need a <code>list</code> or <code>dict</code> (short for dictionary).</p>
<div id="lists-in-r" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Lists In R</h3>
<p><code>list</code>s are one of the most flexible data types in R. You can access individual elements in many different ways, each element can be of different size, and each element can be of a different type.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-types.html#cb54-1" aria-hidden="true" tabindex="-1"></a>myList <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="st">&quot;May 5th, 2021&quot;</span>, <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span>
<span id="cb54-2"><a href="data-types.html#cb54-2" aria-hidden="true" tabindex="-1"></a>myList[<span class="dv">1</span>] <span class="co"># length-1 list; first element is length 3 vector</span></span>
<span id="cb54-3"><a href="data-types.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [[1]]</span></span>
<span id="cb54-4"><a href="data-types.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3</span></span>
<span id="cb54-5"><a href="data-types.html#cb54-5" aria-hidden="true" tabindex="-1"></a>myList[[<span class="dv">1</span>]] <span class="co"># length-3 vector</span></span>
<span id="cb54-6"><a href="data-types.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3</span></span></code></pre></div>
<p>If you want to extract an element, you need to decide between using single square brackets or double square brackets. The former returns a <code>list</code>, while the second returns the type of the individual element.</p>
<p>You can also name the elements of a list. This can lead to more readable code. To see why, examine the example below. The <code>lm()</code> function estimates a linear regression model. It returns a <code>list</code> with plenty of components.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-types.html#cb55-1" aria-hidden="true" tabindex="-1"></a>dataSet <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/cars.csv&quot;</span>)</span>
<span id="cb55-2"><a href="data-types.html#cb55-2" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="fu">log</span>(Horsepower) <span class="sc">~</span> Type, <span class="at">data =</span> dataSet)</span>
<span id="cb55-3"><a href="data-types.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(results)</span>
<span id="cb55-4"><a href="data-types.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 13</span></span>
<span id="cb55-5"><a href="data-types.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(results)</span>
<span id="cb55-6"><a href="data-types.html#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] &quot;coefficients&quot;  &quot;residuals&quot;     &quot;effects&quot;       &quot;rank&quot;          &quot;fitted.values&quot; &quot;assign&quot;        &quot;qr&quot;           </span></span>
<span id="cb55-7"><a href="data-types.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  [8] &quot;df.residual&quot;   &quot;contrasts&quot;     &quot;xlevels&quot;       &quot;call&quot;          &quot;terms&quot;         &quot;model&quot;</span></span>
<span id="cb55-8"><a href="data-types.html#cb55-8" aria-hidden="true" tabindex="-1"></a>results<span class="sc">$</span>contrasts</span>
<span id="cb55-9"><a href="data-types.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="do">## $Type</span></span>
<span id="cb55-10"><a href="data-types.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;contr.treatment&quot;</span></span>
<span id="cb55-11"><a href="data-types.html#cb55-11" aria-hidden="true" tabindex="-1"></a>results[<span class="st">&#39;rank&#39;</span>]</span>
<span id="cb55-12"><a href="data-types.html#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="do">## $rank</span></span>
<span id="cb55-13"><a href="data-types.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6</span></span>
<span id="cb55-14"><a href="data-types.html#cb55-14" aria-hidden="true" tabindex="-1"></a>results[[<span class="st">&#39;terms&#39;</span>]]</span>
<span id="cb55-15"><a href="data-types.html#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="do">## log(Horsepower) ~ Type</span></span>
<span id="cb55-16"><a href="data-types.html#cb55-16" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;variables&quot;)</span></span>
<span id="cb55-17"><a href="data-types.html#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="do">## list(log(Horsepower), Type)</span></span>
<span id="cb55-18"><a href="data-types.html#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;factors&quot;)</span></span>
<span id="cb55-19"><a href="data-types.html#cb55-19" aria-hidden="true" tabindex="-1"></a><span class="do">##                 Type</span></span>
<span id="cb55-20"><a href="data-types.html#cb55-20" aria-hidden="true" tabindex="-1"></a><span class="do">## log(Horsepower)    0</span></span>
<span id="cb55-21"><a href="data-types.html#cb55-21" aria-hidden="true" tabindex="-1"></a><span class="do">## Type               1</span></span>
<span id="cb55-22"><a href="data-types.html#cb55-22" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;term.labels&quot;)</span></span>
<span id="cb55-23"><a href="data-types.html#cb55-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;Type&quot;</span></span>
<span id="cb55-24"><a href="data-types.html#cb55-24" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;order&quot;)</span></span>
<span id="cb55-25"><a href="data-types.html#cb55-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb55-26"><a href="data-types.html#cb55-26" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;intercept&quot;)</span></span>
<span id="cb55-27"><a href="data-types.html#cb55-27" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb55-28"><a href="data-types.html#cb55-28" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;response&quot;)</span></span>
<span id="cb55-29"><a href="data-types.html#cb55-29" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb55-30"><a href="data-types.html#cb55-30" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;.Environment&quot;)</span></span>
<span id="cb55-31"><a href="data-types.html#cb55-31" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb55-32"><a href="data-types.html#cb55-32" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;predvars&quot;)</span></span>
<span id="cb55-33"><a href="data-types.html#cb55-33" aria-hidden="true" tabindex="-1"></a><span class="do">## list(log(Horsepower), Type)</span></span>
<span id="cb55-34"><a href="data-types.html#cb55-34" aria-hidden="true" tabindex="-1"></a><span class="do">## attr(,&quot;dataClasses&quot;)</span></span>
<span id="cb55-35"><a href="data-types.html#cb55-35" aria-hidden="true" tabindex="-1"></a><span class="do">## log(Horsepower)            Type </span></span>
<span id="cb55-36"><a href="data-types.html#cb55-36" aria-hidden="true" tabindex="-1"></a><span class="do">##       &quot;numeric&quot;     &quot;character&quot;</span></span></code></pre></div>
<div class="rmd-caution">
<p>
<code>results</code> is a <code>list</code> (<code>is.list(results)</code> returns <code>TRUE</code>), but to be more specific, it is an S3 object of class <code>lm</code>. If you do not know what this means, do not worry! S3 classes are discussed more in a later chapter. Why is this important? For one, I mention it so that you aren’t confused if you type <code>class(results)</code> and see <code>lm</code> instead of <code>list</code>. Second, the fact that the authors of <code>lm()</code> wrote code that returns <code>result</code> as a “fancy list” suggests that they are encouraging another way to access elements of the <code>results</code>: to use specialized functions! For example, you can use <code>residuals(results)</code>, <code>coefficients(results)</code>, and <code>fitted.values(results)</code>. These functions do not work for all lists in R, but when they do work (for <code>lm</code> and <code>glm</code> objects only), you can be sure you are writing the kind of code that is encouraged by the authors of <code>lm()</code>.
</p>
</div>
</div>
<div id="lists-in-python" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Lists In Python</h3>
<p><a href="https://docs.python.org/3/library/stdtypes.html#lists">Python <code>list</code>s</a> are very flexible, too. There are fewer choices for accessing and modifying elements of lists in Python–you’ll most likely end up using the square bracket operator. Elements can be different sizes and types, just like they were with R’s lists.</p>
<p>Unlike in R, however, you cannot name elements of lists. If you want a container that allows you to access elements by name, look into Python <a href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict">dictionaries</a> (see section <a href="data-types.html#dictionaries-in-python">2.4.3</a>) or pandas’ <code>Series</code> objects (see section <a href="data-types.html#overview-of-python">2.2.2</a>).</p>
<p>From the example below, you can see that we’ve been introduced to lists already. We have been constructing Numpy arrays from them.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb56-1"><a href="data-types.html#cb56-1" aria-hidden="true" tabindex="-1"></a>another_list <span class="op">=</span> [np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]), <span class="st">&quot;May 5th, 2021&quot;</span>, <span class="va">True</span>, [<span class="dv">42</span>,<span class="dv">42</span>]]</span>
<span id="cb56-2"><a href="data-types.html#cb56-2" aria-hidden="true" tabindex="-1"></a>another_list[<span class="dv">2</span>]</span>
<span id="cb56-3"><a href="data-types.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co">## True</span></span>
<span id="cb56-4"><a href="data-types.html#cb56-4" aria-hidden="true" tabindex="-1"></a>another_list[<span class="dv">2</span>] <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb56-5"><a href="data-types.html#cb56-5" aria-hidden="true" tabindex="-1"></a>another_list</span>
<span id="cb56-6"><a href="data-types.html#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co">## [array([1, 2, 3]), &#39;May 5th, 2021&#39;, 100, [42, 42]]</span></span></code></pre></div>
<p>Python lists have <a href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">methods attached to them</a>, which can come in handy.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb57-1"><a href="data-types.html#cb57-1" aria-hidden="true" tabindex="-1"></a>another_list</span>
<span id="cb57-2"><a href="data-types.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co">## [array([1, 2, 3]), &#39;May 5th, 2021&#39;, 100, [42, 42]]</span></span>
<span id="cb57-3"><a href="data-types.html#cb57-3" aria-hidden="true" tabindex="-1"></a>another_list.append(<span class="st">&#39;new element&#39;</span>)</span>
<span id="cb57-4"><a href="data-types.html#cb57-4" aria-hidden="true" tabindex="-1"></a>another_list</span>
<span id="cb57-5"><a href="data-types.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co">## [array([1, 2, 3]), &#39;May 5th, 2021&#39;, 100, [42, 42], &#39;new element&#39;]</span></span></code></pre></div>
<p>Creating lists can be done as above, with the square bracket operators. They can also be created with the <code>list()</code> function, and by creating a <em>list comprehension</em>. List comprehensions are discussed more in <a href="odds-and-ends.html#loops">3.3.2</a>.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="data-types.html#cb58-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="op">=</span> <span class="bu">list</span>((<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>)) <span class="co"># converting a tuple to a list</span></span>
<span id="cb58-2"><a href="data-types.html#cb58-2" aria-hidden="true" tabindex="-1"></a>your_list <span class="op">=</span> [i<span class="op">**</span><span class="dv">2</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>)] <span class="co"># list comprehension</span></span>
<span id="cb58-3"><a href="data-types.html#cb58-3" aria-hidden="true" tabindex="-1"></a>my_list</span>
<span id="cb58-4"><a href="data-types.html#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">## [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span></span>
<span id="cb58-5"><a href="data-types.html#cb58-5" aria-hidden="true" tabindex="-1"></a>your_list</span>
<span id="cb58-6"><a href="data-types.html#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co">## [0, 1, 4]</span></span></code></pre></div>
</div>
<div id="dictionaries-in-python" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Dictionaries In Python</h3>
<p><a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries"><strong>Dictionaries</strong></a> in Python provide a container of key-value pairs. The keys are <em>unique</em>, and they must be <em>immutable</em>. <code>string</code>s are the most common key type, but <code>int</code>s can be used as well.</p>
<p>Here is an example of creating a <code>dict</code> with curly braces (i.e. <code>{}</code>). This <code>dict</code> stores the current price of a few popular cryptocurrencies. Accessing an individual element’s value using its key is done with the square bracket operator (i.e. <code>[]</code>), and deleting elements is done with the <code>del</code> keyword.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb59-1"><a href="data-types.html#cb59-1" aria-hidden="true" tabindex="-1"></a>current_crypto_prices <span class="op">=</span> {<span class="st">&#39;BTC&#39;</span>: <span class="fl">38657.14</span>, <span class="st">&#39;ETH&#39;</span>: <span class="fl">2386.54</span>, <span class="st">&#39;DOGE&#39;</span>: <span class="fl">.308122</span>}</span>
<span id="cb59-2"><a href="data-types.html#cb59-2" aria-hidden="true" tabindex="-1"></a>current_crypto_prices[<span class="st">&#39;DOGE&#39;</span>] <span class="co"># get the current price of Dogecoin</span></span>
<span id="cb59-3"><a href="data-types.html#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="co">## 0.308122</span></span>
<span id="cb59-4"><a href="data-types.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> current_crypto_prices[<span class="st">&#39;BTC&#39;</span>] <span class="co"># remove the current price of Bitcoin</span></span>
<span id="cb59-5"><a href="data-types.html#cb59-5" aria-hidden="true" tabindex="-1"></a>current_crypto_prices.keys()</span>
<span id="cb59-6"><a href="data-types.html#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co">## dict_keys([&#39;ETH&#39;, &#39;DOGE&#39;])</span></span>
<span id="cb59-7"><a href="data-types.html#cb59-7" aria-hidden="true" tabindex="-1"></a>current_crypto_prices.values()</span>
<span id="cb59-8"><a href="data-types.html#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="co">## dict_values([2386.54, 0.308122])</span></span></code></pre></div>
<p>You can also create <code>dict</code>s using <strong>dictionary comprehensions</strong>. Just like list comprehensions, these are discussed more in <a href="odds-and-ends.html#loops">3.3.2</a>.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb60-1"><a href="data-types.html#cb60-1" aria-hidden="true" tabindex="-1"></a>incr_cryptos <span class="op">=</span> {key:val<span class="op">*</span><span class="fl">1.1</span> <span class="cf">for</span> (key,val) <span class="kw">in</span> current_crypto_prices.items()}</span>
<span id="cb60-2"><a href="data-types.html#cb60-2" aria-hidden="true" tabindex="-1"></a>incr_cryptos</span>
<span id="cb60-3"><a href="data-types.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co">## {&#39;ETH&#39;: 2625.194, &#39;DOGE&#39;: 0.3389342}</span></span></code></pre></div>
<p>Personally, I don’t use dictionaries as much as lists. If I have a dictionary, I usually convert it to a pandas data frame (more information on those in <a href="data-types.html#data-frames-in-python">2.7.2</a>).</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb61-1"><a href="data-types.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb61-2"><a href="data-types.html#cb61-2" aria-hidden="true" tabindex="-1"></a>df_from_dict <span class="op">=</span> pd.DataFrame({ <span class="st">&#39;col1&#39;</span>: [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="st">&#39;col2&#39;</span> : [<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>]})</span>
<span id="cb61-3"><a href="data-types.html#cb61-3" aria-hidden="true" tabindex="-1"></a>df_from_dict</span>
<span id="cb61-4"><a href="data-types.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co">##    col1 col2</span></span>
<span id="cb61-5"><a href="data-types.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 0     1    a</span></span>
<span id="cb61-6"><a href="data-types.html#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 1     2    b</span></span>
<span id="cb61-7"><a href="data-types.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 2     3    c</span></span></code></pre></div>
</div>
</div>
<div id="user-defined-functions-in-r-and-python" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> User-defined functions in R and Python</h2>
<p>Why are functions important in statistical programming? In both R and Python (and every other programming language), functions are used to perform calculations. This is a pretty obvious statement.</p>
<p>This text has already covered how to <em>use</em> functions that come to us pre-made. At least we have discussed how to use them in a one-off way–just write the name of the function, write some parentheses after that name, and then plug in any requisite arguments by writing them in a comma-separated way between those two parentheses. This is how it works in both R and Python.
In this section we take a look at how to define our own functions. This will help us understand pre-made functions. It will also be useful if we need some functionality that isn’t already written for us.</p>
<p>Writing our own functions is also useful for “packaging up” computations. The utility of this will become very apparent in chapter <a href="functional-programming.html#functional-programming">5</a>. Consider the task of estimating a regression model. Would you want to write that program using only arithmetic operators? Would it be simpler if you could use matrix multiplications? Would you want your function to work on different types of inputs? Would you want it to estimate several regression models and choose the “best” one?</p>
<p>Thankfully, R functions are very similar to Python functions. In both languages, functions are <strong>first-class objects</strong>. This means that, no matter which of these two languages you’re using, functions</p>
<ul>
<li>can be passed as arguments to other functions,</li>
<li>they can be returned as values from other functions, and</li>
<li>they can be assigned to variables and stored in containers <span class="citation">(<a href="#ref-struc_and_interp" role="doc-biblioref">Abelson and Sussman 1996</a>)</span></li>
</ul>
<div id="defining-r-functions" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Defining R Functions</h3>
<p>To create a function in R, we need another function called <code>function</code>. We give the output of <code>function</code> a name in the same way we give names to any other variable in R, by using the assignment operator <code>&lt;-</code>. Here’s an example of a toy function called <code>addOne</code>. Here <code>myInput</code> is a placeholder that refers to whatever the user of the function ends up plugging in.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data-types.html#cb62-1" aria-hidden="true" tabindex="-1"></a>addOne <span class="ot">&lt;-</span> <span class="cf">function</span>(myInput){  <span class="co"># define the function</span></span>
<span id="cb62-2"><a href="data-types.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  myOutput <span class="ot">&lt;-</span> myInput <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb62-3"><a href="data-types.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(myOutput)</span>
<span id="cb62-4"><a href="data-types.html#cb62-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb62-5"><a href="data-types.html#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="fu">addOne</span>(<span class="dv">41</span>) <span class="co"># call/invoke/use the function </span></span>
<span id="cb62-6"><a href="data-types.html#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 42</span></span></code></pre></div>
<p>Below the definition, the function is called with an input of <code>41</code>. When this happens, the following sequence of events occurs</p>
<ul>
<li>The value <code>41</code> is assigned to <code>myInput</code></li>
<li><code>myOutput</code> is given the value <code>42</code></li>
<li><code>42</code> is returned from the function</li>
<li>the temporary variables <code>myInput</code> and <code>myOutput</code> are destroyed.</li>
</ul>
<p>We get the desired answer, and all the unnecessary intermediate variables are cleaned up and thrown away.</p>
</div>
<div id="defining-python-functions" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Defining Python Functions</h3>
<p>To create a function in Python, we use the <code>def</code> statement (instead of the <code>function</code> function in R). The desired name of the function comes next. After that, the formal parameters come, comma-separated inside parentheses, just like in R.</p>
<p>Defining a function in Python is a little more concise. There is no assignment operator like there is in R, there are no curly braces, and <code>return</code> isn’t a function like it is in R, so there is no need to use parentheses after it. There is one addition, though–we need a colon (<code>:</code>).</p>
<p>Here is an example of a toy function called <code>add_one</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="data-types.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_one(my_input):  <span class="co"># define the function</span></span>
<span id="cb63-2"><a href="data-types.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  my_output <span class="op">=</span> my_input <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb63-3"><a href="data-types.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> my_output</span>
<span id="cb63-4"><a href="data-types.html#cb63-4" aria-hidden="true" tabindex="-1"></a>add_one(<span class="dv">41</span>) <span class="co"># call/invoke/use the function </span></span>
<span id="cb63-5"><a href="data-types.html#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 42</span></span></code></pre></div>
<p>Below the definition, the function is called with an input of <code>41</code>. When this happens, the following sequence of events occurs</p>
<ul>
<li>The value <code>41</code> is assigned to <code>my_input</code></li>
<li><code>my_output</code> is given the value <code>42</code></li>
<li><code>42</code> is returned from the function</li>
<li>the temporary variables <code>my_input</code> and <code>my_output</code> are destroyed.</li>
</ul>
<p>We get the desired answer, and all the unnecessary intermediate variables are cleaned up and thrown away.</p>
</div>
<div id="more-details-on-rs-user-defined-functions" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> More details on R’s user-defined functions</h3>
<p>Technically, in R, functions are <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Function-objects">defined as three things bundled together</a>:</p>
<ol style="list-style-type: decimal">
<li>a <strong>formal argument list</strong> (also known as <em>formals</em>),</li>
<li>a <strong>body</strong>, and</li>
<li>a <strong>parent environment</strong>.</li>
</ol>
<p>The <em>formal argument list</em> is exactly what it sounds like. It is the list of arguments a function takes. You can access a function’s formal argument list using the <code>formals()</code> function. Note that it is not the <em>actual</em> arguments a user will plug in–that isn’t knowable at the time the function is created in the first place.</p>
<p>Here is another function that takes a <em>default</em> argument called <code>whichNumber</code>. If the user of the function doesn’t specify how much she wants to add to <code>myInput</code>, <code>addNumber</code> will use <code>1</code> as the default. This default value shows up in the output of <code>formals(addNumber)</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-types.html#cb64-1" aria-hidden="true" tabindex="-1"></a>addNumber <span class="ot">&lt;-</span> <span class="cf">function</span>(myInput, <span class="at">whichNumber =</span> <span class="dv">1</span>){  </span>
<span id="cb64-2"><a href="data-types.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  myOutput <span class="ot">&lt;-</span> myInput <span class="sc">+</span> whichNumber</span>
<span id="cb64-3"><a href="data-types.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(myOutput)</span>
<span id="cb64-4"><a href="data-types.html#cb64-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-5"><a href="data-types.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">addNumber</span>(<span class="dv">3</span>) <span class="co"># no second argument being provided by the user here</span></span>
<span id="cb64-6"><a href="data-types.html#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb64-7"><a href="data-types.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(addNumber)</span>
<span id="cb64-8"><a href="data-types.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="do">## $myInput</span></span>
<span id="cb64-9"><a href="data-types.html#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb64-10"><a href="data-types.html#cb64-10" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb64-11"><a href="data-types.html#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="do">## $whichNumber</span></span>
<span id="cb64-12"><a href="data-types.html#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span></code></pre></div>
<p>The function’s <em>body</em> is also exactly what it sounds like. It is the work that a function performs. You can access a functions body using the the <code>body()</code> function.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-types.html#cb65-1" aria-hidden="true" tabindex="-1"></a>addNumber <span class="ot">&lt;-</span> <span class="cf">function</span>(myInput, <span class="at">whichNumber =</span> <span class="dv">1</span>){  </span>
<span id="cb65-2"><a href="data-types.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  myOutput <span class="ot">&lt;-</span> myInput <span class="sc">+</span> whichNumber</span>
<span id="cb65-3"><a href="data-types.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(myOutput)</span>
<span id="cb65-4"><a href="data-types.html#cb65-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-5"><a href="data-types.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">body</span>(addNumber)</span>
<span id="cb65-6"><a href="data-types.html#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="do">## {</span></span>
<span id="cb65-7"><a href="data-types.html#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="do">##     myOutput &lt;- myInput + whichNumber</span></span>
<span id="cb65-8"><a href="data-types.html#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="do">##     return(myOutput)</span></span>
<span id="cb65-9"><a href="data-types.html#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="do">## }</span></span></code></pre></div>
<p>Every function you create also has a <em>parent environment</em><a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>. You can get/set this using the <code>environment()</code> function. Environments help a function know which variables it is allowed to use and how to use them. The parent environment of a function is where the function was <em>created</em>, and it contains variables outside of the body that the function can also use. The rules of which variables a function can use are called <em>scoping</em>. When you create functions in R, you are primarily using <strong>lexical scoping</strong>. To understand functions well in R, these examples are important to understand, so I provide more detail in <a href="data-types.html#function-scope-in-r">2.5.5</a>.</p>
<div class="rmd-details">
<p>
There is a lot more information about environments that isn’t provided in this text. For instance, a user-defined function also has <a href="http://adv-r.had.co.nz/Environments.html#function-envs">binding, execution, and calling environments associated with it</a>, and environments are used in creating package namespaces, which are important when two packages each have a function with the same name.
</p>
</div>
</div>
<div id="more-details-on-pythons-user-defined-functions" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> More details on Python’s user-defined functions</h3>
<p>Python functions have the same things R functions have: a <strong>formal parameter list</strong>, a body, and there are <a href="https://docs.python.org/3/tutorial/classes.html#python-scopes-and-namespaces">namespaces</a> created that help organize which variables the function can access, as well as which pieces of code can call this new function. These three concepts are analogous to those in R. The names are just a bit different sometimes, and it isn’t organized in the same way.</p>
<p>Below is a table, taken straight from <a href="https://docs.python.org/3/reference/datamodel.html#objects-values-and-types">the documentation</a>, of all each user-defined function’s <em>special attributes</em>.</p>
<table>
<colgroup>
<col width="36%" />
<col width="63%" />
</colgroup>
<thead>
<tr class="header">
<th>Attribute</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>__doc__</code></td>
<td>The function’s documentation string, or <code>None</code> if unavailable; not inherited by subclasses.</td>
</tr>
<tr class="even">
<td><code>__name__</code></td>
<td>The function’s name.</td>
</tr>
<tr class="odd">
<td><code>__qualname__</code></td>
<td>The function’s qualified name.</td>
</tr>
<tr class="even">
<td><code>__module__</code></td>
<td>The name of the module the function was defined in, or None if unavailable.</td>
</tr>
<tr class="odd">
<td><code>__defaults__</code></td>
<td>A tuple containing default argument values for those arguments that have defaults, or None if no arguments have a default value.</td>
</tr>
<tr class="even">
<td><code>__code__</code></td>
<td>The code object representing the compiled function body.</td>
</tr>
<tr class="odd">
<td><code>__globals__</code></td>
<td>A reference to the dictionary that holds the function’s global variables — the global namespace of the module in which the function was defined.</td>
</tr>
<tr class="even">
<td><code>__dict__</code></td>
<td>The namespace supporting arbitrary function attributes.</td>
</tr>
<tr class="odd">
<td><code>__closure__</code></td>
<td><code>None</code> or a tuple of cells that contain bindings for the function’s free variables. See below for information on the <code>cell_contents</code> attribute.</td>
</tr>
<tr class="even">
<td><code>__annotations__</code></td>
<td>A dict containing annotations of parameters. The keys of the dict are the parameter names, and ‘return’ for the return annotation, if provided.</td>
</tr>
<tr class="odd">
<td><code>__kwdefaults__</code></td>
<td>A dict containing defaults for keyword-only parameters.</td>
</tr>
</tbody>
</table>
<p>So take the <em>formal parameter list</em> of a user-defined function, which is, again, the list of inputs a function takes. Just like in R, this is not the <em>actual</em> arguments a user will plug in–that isn’t knowable at the time the function is created.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> Below we have another function that takes a <strong>default argument</strong> called <code>which_number</code>. If the user of the function doesn’t specify how much she wants to add to <code>my_input</code>, <code>add_number</code> will use <code>1</code> as the default. This default value can be obtained with <code>add_number.__defaults__</code>.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="data-types.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_number(my_input, which_number <span class="op">=</span> <span class="dv">1</span>):</span>
<span id="cb66-2"><a href="data-types.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  my_output <span class="op">=</span> my_input <span class="op">+</span> which_number</span>
<span id="cb66-3"><a href="data-types.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> my_output</span>
<span id="cb66-4"><a href="data-types.html#cb66-4" aria-hidden="true" tabindex="-1"></a>add_number(<span class="dv">3</span>) <span class="co"># no second argument being provided by the user here</span></span>
<span id="cb66-5"><a href="data-types.html#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 4</span></span>
<span id="cb66-6"><a href="data-types.html#cb66-6" aria-hidden="true" tabindex="-1"></a>add_number.__code__.co_varnames <span class="co"># this also contains my_output</span></span>
<span id="cb66-7"><a href="data-types.html#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co">## (&#39;my_input&#39;, &#39;which_number&#39;, &#39;my_output&#39;)</span></span>
<span id="cb66-8"><a href="data-types.html#cb66-8" aria-hidden="true" tabindex="-1"></a>add_number.__defaults__</span>
<span id="cb66-9"><a href="data-types.html#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="co">## (1,)</span></span></code></pre></div>
<p>The code attribute has much more to offer. To see a list of names of all its contents, you can use <code>dir(add_number.__code__)</code>.</p>
<div class="rmd-details">
<p>
Don’t worry if the notation <code>add_number.__code__</code> looks strange. The dot (<code>.</code>) operator will become more clear in the future chapter on <em>object-oriented programming</em>. For now, just think of <code><strong>code</strong></code> as being an object <em>belonging to</em> <code>add_number</code>. Objects that belong to other objects are called <strong>attributes</strong> in Python. The dot operator helps us access attributes <em>inside</em> other objects.
</p>
</div>
</div>
<div id="function-scope-in-r" class="section level3" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> Function Scope in R</h3>
<p>R uses <strong>lexical scoping</strong>.</p>
<p>R functions can use variables that are defined in the function body, and variables that were defined in the environment that the function itself was defined in. R functions <strong>cannot</strong> necessarily find variables in an environment where the function was <em>called</em> in. Code outside the body of a function cannot access variables inside the body of a function.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-types.html#cb67-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb67-2"><a href="data-types.html#cb67-2" aria-hidden="true" tabindex="-1"></a>sillyFunction <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb67-3"><a href="data-types.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(a <span class="sc">+</span> <span class="dv">20</span>) </span>
<span id="cb67-4"><a href="data-types.html#cb67-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb67-5"><a href="data-types.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(sillyFunction) <span class="co"># the env. it was defined in contains a</span></span>
<span id="cb67-6"><a href="data-types.html#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="do">## &lt;environment: R_GlobalEnv&gt;</span></span>
<span id="cb67-7"><a href="data-types.html#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sillyFunction</span>()</span>
<span id="cb67-8"><a href="data-types.html#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 23</span></span></code></pre></div>
<p>From the point of view of the function, when it attempts to access a variable, it first looks in its own body. In the example below, there are two variables named <code>a</code>, but they exist in different environments. Inside the function, the innermost one gets used. Outside the function, the global variable gets used.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-types.html#cb68-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb68-2"><a href="data-types.html#cb68-2" aria-hidden="true" tabindex="-1"></a>sillyFunction <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb68-3"><a href="data-types.html#cb68-3" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb68-4"><a href="data-types.html#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(a <span class="sc">+</span> <span class="dv">20</span>) </span>
<span id="cb68-5"><a href="data-types.html#cb68-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb68-6"><a href="data-types.html#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sillyFunction</span>()</span>
<span id="cb68-7"><a href="data-types.html#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 40</span></span>
<span id="cb68-8"><a href="data-types.html#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a)</span>
<span id="cb68-9"><a href="data-types.html#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span></code></pre></div>
<p>The same concept applies if you create functions within functions. The inner function looks “inside-out” for variables. Below we call <code>outerFunc()</code>, which calls <code>innerFunc()</code>. <code>innerFunc()</code> can refer to the variable <code>b</code>, because it lies in the same environment in which <code>innerFunc()</code> was created. Interestingly, <code>innerFunc()</code> can also refer to the variable <code>a</code>, because that variable was captured by <code>outerFunc</code>, which provides access to <code>innerFunc</code>.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-types.html#cb69-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="st">&quot;outside both&quot;</span></span>
<span id="cb69-2"><a href="data-types.html#cb69-2" aria-hidden="true" tabindex="-1"></a>outerFunc <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb69-3"><a href="data-types.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  b <span class="ot">&lt;-</span> <span class="st">&quot;inside one&quot;</span></span>
<span id="cb69-4"><a href="data-types.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  innerFunc <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb69-5"><a href="data-types.html#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(a) </span>
<span id="cb69-6"><a href="data-types.html#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(b)</span>
<span id="cb69-7"><a href="data-types.html#cb69-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-8"><a href="data-types.html#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">innerFunc</span>())</span>
<span id="cb69-9"><a href="data-types.html#cb69-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb69-10"><a href="data-types.html#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="fu">outerFunc</span>()</span>
<span id="cb69-11"><a href="data-types.html#cb69-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;outside both&quot;</span></span>
<span id="cb69-12"><a href="data-types.html#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;inside one&quot;</span></span></code></pre></div>
<p>If we ask <code>outerFunc</code> to return the function <code>innerFunc</code> (functions are objects!), then we might be surprised to see that <code>innerFunc()</code> can still successfully refer to <code>b</code>, even though it doesn’t exist inside the <em>calling environment.</em> But don’t be surprised! What matters is what was available when the function was <em>created</em>. In this example, <code>outerFuncV2</code> is sometimes called a <em>function factory</em>. More information about this is provided in <a href="functional-programming.html#functional-programming">5</a>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-types.html#cb70-1" aria-hidden="true" tabindex="-1"></a>outerFuncV2 <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb70-2"><a href="data-types.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  b <span class="ot">&lt;-</span> <span class="st">&quot;inside one&quot;</span></span>
<span id="cb70-3"><a href="data-types.html#cb70-3" aria-hidden="true" tabindex="-1"></a>  innerFunc <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb70-4"><a href="data-types.html#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(b)</span>
<span id="cb70-5"><a href="data-types.html#cb70-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb70-6"><a href="data-types.html#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(innerFunc) <span class="co"># note the missing inner parentheses!</span></span>
<span id="cb70-7"><a href="data-types.html#cb70-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb70-8"><a href="data-types.html#cb70-8" aria-hidden="true" tabindex="-1"></a>myFunc <span class="ot">&lt;-</span> <span class="fu">outerFuncV2</span>() <span class="co"># get a new function</span></span>
<span id="cb70-9"><a href="data-types.html#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="fu">environment</span>(myFunc)) <span class="co"># list all data attached to this function</span></span>
<span id="cb70-10"><a href="data-types.html#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;b&quot;         &quot;innerFunc&quot;</span></span>
<span id="cb70-11"><a href="data-types.html#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="fu">myFunc</span>()</span>
<span id="cb70-12"><a href="data-types.html#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;inside one&quot;</span></span></code></pre></div>
<div class="rmd-details">
<p>
Sometimes, in R, functions are called <strong>closures</strong> to emphasize that they are capturing variables from the parent environment in which they were created, to emphasize the data that they are bundled with.
</p>
</div>
</div>
<div id="function-scope-in-python" class="section level3" number="2.5.6">
<h3><span class="header-section-number">2.5.6</span> Function Scope in Python</h3>
<p>Python uses <strong>lexical scoping</strong> just like R! There’s a famous acronym for the concept in Python: <strong>LEGB</strong>.</p>
<ul>
<li>L: Local,</li>
<li>E: Enclosing,</li>
<li>G: Global, and</li>
<li>B: Built-in.</li>
</ul>
<p>A Python function will search for a variable in these <a href="https://docs.python.org/3/tutorial/classes.html#python-scopes-and-namespaces">namespaces</a> in this order.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>.</p>
<p>“<em>Local</em>” refers to variables that are defined inside of the function’s block. The function below uses the local <code>a</code> over the global one.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb71-1"><a href="data-types.html#cb71-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb71-2"><a href="data-types.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> silly_function():</span>
<span id="cb71-3"><a href="data-types.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  a <span class="op">=</span> <span class="dv">22</span> <span class="co"># local a</span></span>
<span id="cb71-4"><a href="data-types.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="st">&quot;local variables are &quot;</span>, <span class="bu">locals</span>())</span>
<span id="cb71-5"><a href="data-types.html#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> a <span class="op">+</span> <span class="dv">20</span></span>
<span id="cb71-6"><a href="data-types.html#cb71-6" aria-hidden="true" tabindex="-1"></a>silly_function()</span>
<span id="cb71-7"><a href="data-types.html#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co">## local variables are  {&#39;a&#39;: 22}</span></span>
<span id="cb71-8"><a href="data-types.html#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 42</span></span>
<span id="cb71-9"><a href="data-types.html#cb71-9" aria-hidden="true" tabindex="-1"></a>silly_function.__code__.co_nlocals <span class="co"># number of local variables</span></span>
<span id="cb71-10"><a href="data-types.html#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 1</span></span>
<span id="cb71-11"><a href="data-types.html#cb71-11" aria-hidden="true" tabindex="-1"></a>silly_function.__code__.co_varnames <span class="co"># names of local variables</span></span>
<span id="cb71-12"><a href="data-types.html#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="co">## (&#39;a&#39;,)</span></span></code></pre></div>
<p>“<em>Enclosing</em>” refers to variables that were defined in the enclosing namespace, but not the global namespace. These variables are sometimes called <strong>free variables.</strong> In the example below, there is no local <code>a</code> variable for <code>inner_func</code>. But there is a global one and one in the enclosing namespace. It chooses the one in the enclosing namespace.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="data-types.html#cb72-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="st">&quot;outside both&quot;</span></span>
<span id="cb72-2"><a href="data-types.html#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> outer_func():</span>
<span id="cb72-3"><a href="data-types.html#cb72-3" aria-hidden="true" tabindex="-1"></a>  a <span class="op">=</span> <span class="st">&quot;inside one&quot;</span></span>
<span id="cb72-4"><a href="data-types.html#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> inner_func():</span>
<span id="cb72-5"><a href="data-types.html#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(a)</span>
<span id="cb72-6"><a href="data-types.html#cb72-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> inner_func</span>
<span id="cb72-7"><a href="data-types.html#cb72-7" aria-hidden="true" tabindex="-1"></a>my_new_func <span class="op">=</span> outer_func()</span>
<span id="cb72-8"><a href="data-types.html#cb72-8" aria-hidden="true" tabindex="-1"></a>my_new_func()</span>
<span id="cb72-9"><a href="data-types.html#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="co">## inside one</span></span>
<span id="cb72-10"><a href="data-types.html#cb72-10" aria-hidden="true" tabindex="-1"></a>my_new_func.__code__.co_freevars</span>
<span id="cb72-11"><a href="data-types.html#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="co">## (&#39;a&#39;,)</span></span></code></pre></div>
<p>“<em>Global</em>” scope contains variables defined in the module-level namespace. If the below example code was the entirety of your script, then <code>a</code> would be a global variable.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb73-1"><a href="data-types.html#cb73-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="st">&quot;outside both&quot;</span></span>
<span id="cb73-2"><a href="data-types.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> outer_func():</span>
<span id="cb73-3"><a href="data-types.html#cb73-3" aria-hidden="true" tabindex="-1"></a>  b <span class="op">=</span> <span class="st">&quot;inside one&quot;</span></span>
<span id="cb73-4"><a href="data-types.html#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> inner_func():</span>
<span id="cb73-5"><a href="data-types.html#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(a) </span>
<span id="cb73-6"><a href="data-types.html#cb73-6" aria-hidden="true" tabindex="-1"></a>  inner_func()</span>
<span id="cb73-7"><a href="data-types.html#cb73-7" aria-hidden="true" tabindex="-1"></a>outer_func()</span>
<span id="cb73-8"><a href="data-types.html#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="co">## outside both</span></span></code></pre></div>
<p>Just like in R, Python functions <strong>cannot</strong> necessarily find variables in an environment where the function was <em>called</em> in. For example, here is some code that mimics the above R example. Both <code>a</code> and <code>b</code> are accessible from within <code>inner_func</code>. That is due to LEGB.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb74-1"><a href="data-types.html#cb74-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="st">&quot;outside both&quot;</span></span>
<span id="cb74-2"><a href="data-types.html#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> outer_func():</span>
<span id="cb74-3"><a href="data-types.html#cb74-3" aria-hidden="true" tabindex="-1"></a>  b <span class="op">=</span> <span class="st">&quot;inside one&quot;</span></span>
<span id="cb74-4"><a href="data-types.html#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> inner_func():</span>
<span id="cb74-5"><a href="data-types.html#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(a) </span>
<span id="cb74-6"><a href="data-types.html#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(b)</span>
<span id="cb74-7"><a href="data-types.html#cb74-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> inner_func() </span>
<span id="cb74-8"><a href="data-types.html#cb74-8" aria-hidden="true" tabindex="-1"></a>outer_func()</span></code></pre></div>
<pre><code>## outside both
## inside one</code></pre>
<p>However, if we start using <code>outer_func</code> inside another function, <em>calling</em> it in another function, when it was <em>defined</em> somewhere else, well then it doesn’t have access to some variables. You might be surprised at how the following code functions. Does this print the right string: <code>"this is the a I want to use now!"</code> No!</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb76-1"><a href="data-types.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> third_func():</span>
<span id="cb76-2"><a href="data-types.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  a <span class="op">=</span> <span class="st">&quot;this is the a I want to use now!&quot;</span></span>
<span id="cb76-3"><a href="data-types.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  outer_func()</span>
<span id="cb76-4"><a href="data-types.html#cb76-4" aria-hidden="true" tabindex="-1"></a>third_func() </span></code></pre></div>
<pre><code>## outside both
## inside one</code></pre>
<p>Again, these examples get at <em>functional programming</em>, which is discussed more in depth in chapter <a href="functional-programming.html#functional-programming">5</a>. There it will describe strategies to make your code easier to maintain (e.g. keep your functions “pure!”)</p>
</div>
<div id="modifying-a-functions-arguments" class="section level3" number="2.5.7">
<h3><span class="header-section-number">2.5.7</span> Modifying a Function’s Arguments</h3>
<p>Can/should we modify a function’s argument? The flexibility to do this sounds empowering; however, not doing it is recommended because it makes programs easier to reason about.</p>
<div id="passing-by-value-in-r" class="section level4" number="2.5.7.1">
<h4><span class="header-section-number">2.5.7.1</span> Passing By Value In R</h4>
<p>In R, it is <em>difficult</em> for a function to modify the variable that a user plugs in to a function as its argument.<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> Consider the following code.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="data-types.html#cb78-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb78-2"><a href="data-types.html#cb78-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(arg){</span>
<span id="cb78-3"><a href="data-types.html#cb78-3" aria-hidden="true" tabindex="-1"></a>  arg <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb78-4"><a href="data-types.html#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(arg)</span>
<span id="cb78-5"><a href="data-types.html#cb78-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb78-6"><a href="data-types.html#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a)</span>
<span id="cb78-7"><a href="data-types.html#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb78-8"><a href="data-types.html#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">f</span>(a))</span>
<span id="cb78-9"><a href="data-types.html#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb78-10"><a href="data-types.html#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a)</span>
<span id="cb78-11"><a href="data-types.html#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span></code></pre></div>
<p>The function <code>f</code> has an argument called <code>arg</code>. When <code>f(a)</code> is performed, changes are made to a <em>copy</em> of <code>a</code>. When a function constructs a copy of all input variables inside its body, this is called <strong>pass-by-value</strong> semantics. This copy is a temporary intermediate value that only serves as a starting point for the function to produce a return value of <code>2</code>.</p>
<p><code>arg</code> could have been called <code>a</code>, and the same behavior will take place. However, giving these two things different names is helpful to remind you and others that R copies its arguments.</p>
<p>It is still possible to modify <code>a</code>, but I don’t recommend doing this either. I will discuss this more in subsection <a href="data-types.html#modifying-a-functions-arguments">2.5.7</a>.</p>
</div>
<div id="passing-by-assignment-in-python" class="section level4" number="2.5.7.2">
<h4><span class="header-section-number">2.5.7.2</span> Passing By Assignment In Python</h4>
<p>The story is more complicated in Python. Python functions have <strong>pass-by-assignment</strong> semantics. This is something that is very unique to Python. What this means is that your ability to modify the arguments of a function depends on</p>
<ul>
<li>what the type of the argument is, and</li>
<li>what you’re trying to do to it.</li>
</ul>
<p>We will go throw some examples first, and then explain why this works the way it does. Here is some code that is analogous to the example above.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb79-1"><a href="data-types.html#cb79-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb79-2"><a href="data-types.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(arg):</span>
<span id="cb79-3"><a href="data-types.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  arg <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb79-4"><a href="data-types.html#cb79-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> arg</span>
<span id="cb79-5"><a href="data-types.html#cb79-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-6"><a href="data-types.html#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(a))</span>
<span id="cb79-7"><a href="data-types.html#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;class &#39;int&#39;&gt;</span></span>
<span id="cb79-8"><a href="data-types.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb79-9"><a href="data-types.html#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 1</span></span>
<span id="cb79-10"><a href="data-types.html#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f(a))</span>
<span id="cb79-11"><a href="data-types.html#cb79-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 2</span></span>
<span id="cb79-12"><a href="data-types.html#cb79-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb79-13"><a href="data-types.html#cb79-13" aria-hidden="true" tabindex="-1"></a><span class="co">## 1</span></span></code></pre></div>
<p>In this case, <code>a</code> is not modified. That is because <code>a</code> is an <code>int</code>. <code>int</code>s are <strong>immutable</strong> in Python, which means that their <a href="https://docs.python.org/3/reference/datamodel.html#objects-values-and-types">value</a> cannot be changed after they are created, either inside or outside of the function’s scope. However, consider the case when <code>a</code> is a <code>list</code>, which is a <strong>mutable</strong> type. A mutable type is one that can have its value changed after its created.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb80-1"><a href="data-types.html#cb80-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">999</span>]</span>
<span id="cb80-2"><a href="data-types.html#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(arg):</span>
<span id="cb80-3"><a href="data-types.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  arg[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb80-4"><a href="data-types.html#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> arg</span>
<span id="cb80-5"><a href="data-types.html#cb80-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-6"><a href="data-types.html#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(a))</span>
<span id="cb80-7"><a href="data-types.html#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;class &#39;list&#39;&gt;</span></span>
<span id="cb80-8"><a href="data-types.html#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb80-9"><a href="data-types.html#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="co">## [999]</span></span>
<span id="cb80-10"><a href="data-types.html#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f(a))</span>
<span id="cb80-11"><a href="data-types.html#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="co">## [2]</span></span>
<span id="cb80-12"><a href="data-types.html#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb80-13"><a href="data-types.html#cb80-13" aria-hidden="true" tabindex="-1"></a><span class="co">## [2]</span></span></code></pre></div>
<p>In this case <code>a</code> <em>is</em> modified. Changing the value of the argument <em>inside</em> the function effects changes to that variable outside of the function.</p>
<p>Ready to be confused? What happens if we take in a list, but try to do something else with it.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb81-1"><a href="data-types.html#cb81-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">999</span>]</span>
<span id="cb81-2"><a href="data-types.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(arg):</span>
<span id="cb81-3"><a href="data-types.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  arg <span class="op">=</span> [<span class="dv">2</span>]</span>
<span id="cb81-4"><a href="data-types.html#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> arg</span>
<span id="cb81-5"><a href="data-types.html#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="data-types.html#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb81-7"><a href="data-types.html#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="co">## [999]</span></span>
<span id="cb81-8"><a href="data-types.html#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f(a))</span>
<span id="cb81-9"><a href="data-types.html#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="co">## [2]</span></span>
<span id="cb81-10"><a href="data-types.html#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb81-11"><a href="data-types.html#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="co">## [999]</span></span></code></pre></div>
<p>That time <code>a</code> did not permanently change in the global scope. Why does this happen? I thought <code>list</code>s were mutable!</p>
<p>The reason behind all of this doesn’t even have anything to do with functions, per se. Rather, it has to do with how Python manages, <a href="https://docs.python.org/3/reference/datamodel.html#objects-values-and-types">objects, values, and types</a>. It also has to do with what happens during <a href="https://docs.python.org/3/reference/executionmodel.html#naming-and-binding">assignment</a>.</p>
<p>Let’s revisit the above code, but bring everything out of a function. Python is pass-by-assignment, so all we have to do is understand how assignment works. Starting with the immutable <code>int</code> example, we have the following.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb82-1"><a href="data-types.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># old code: </span></span>
<span id="cb82-2"><a href="data-types.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co"># a = 1</span></span>
<span id="cb82-3"><a href="data-types.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># def f(arg):</span></span>
<span id="cb82-4"><a href="data-types.html#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   arg = 2</span></span>
<span id="cb82-5"><a href="data-types.html#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   return arg</span></span>
<span id="cb82-6"><a href="data-types.html#cb82-6" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">1</span>    <span class="co"># still done in global scope</span></span>
<span id="cb82-7"><a href="data-types.html#cb82-7" aria-hidden="true" tabindex="-1"></a>arg <span class="op">=</span> a  <span class="co"># arg is a name that is bound to the object a refers to</span></span>
<span id="cb82-8"><a href="data-types.html#cb82-8" aria-hidden="true" tabindex="-1"></a>arg <span class="op">=</span> <span class="dv">2</span>  <span class="co"># arg is a name that is bound to the object 2</span></span>
<span id="cb82-9"><a href="data-types.html#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arg <span class="kw">is</span> a)</span>
<span id="cb82-10"><a href="data-types.html#cb82-10" aria-hidden="true" tabindex="-1"></a><span class="co">## False</span></span>
<span id="cb82-11"><a href="data-types.html#cb82-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">id</span>(a), <span class="bu">id</span>(arg))</span>
<span id="cb82-12"><a href="data-types.html#cb82-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 140084926104928 140084926104960</span></span>
<span id="cb82-13"><a href="data-types.html#cb82-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb82-14"><a href="data-types.html#cb82-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 1</span></span></code></pre></div>
<div class="rmd-details">
<p>
The <a href="https://docs.python.org/3/library/functions.html#id"><code>id()</code></a> function returns the <strong>identity</strong> of an object, which is kind of like its memory address. Identities of objects are unique and constant. If two variables, <code>a</code> and <code>b</code> say, have the same identity, <code>a is b</code> will evaluate to <code>True</code>. Otherwise, it will evaluate to <code>False</code>.
</p>
</div>
<p>In the first line, the <em>name</em> <code>a</code> is bound to the <em>object</em> <code>1</code>. In the second line, the name <code>arg</code> is bound to the <em>object</em> that is referred to by the <em>name</em> <code>a</code>. After the second line finishes, <code>arg</code> and <code>a</code> are two names for the same object (a fact that you can confirm by inserting <code>arg is a</code> immediately after this line).</p>
<p>In the third line, <code>arg</code> is bound to <code>2</code>. The variable <code>arg</code> can be changed, but only by re-binding it with a separate object. Re-binding <code>arg</code> does not change the value referred to by <code>a</code> because <code>a</code> still refers to <code>1</code>, an object separate from <code>2</code>. There is no reason to re-bind <code>a</code> because it wasn’t mentioned at all in the third line.</p>
<p>If we go back to the first function example, it’s basically the same idea. The only difference, however, is that <code>arg</code> is in its own scope. Let’s look at a simplified version of our second code chunk that uses a mutable list.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb83-1"><a href="data-types.html#cb83-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">999</span>]</span>
<span id="cb83-2"><a href="data-types.html#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co"># old code:</span></span>
<span id="cb83-3"><a href="data-types.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="co"># def f(arg):</span></span>
<span id="cb83-4"><a href="data-types.html#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   arg[0] = 2</span></span>
<span id="cb83-5"><a href="data-types.html#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   return arg</span></span>
<span id="cb83-6"><a href="data-types.html#cb83-6" aria-hidden="true" tabindex="-1"></a>arg <span class="op">=</span> a</span>
<span id="cb83-7"><a href="data-types.html#cb83-7" aria-hidden="true" tabindex="-1"></a>arg[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb83-8"><a href="data-types.html#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arg)</span>
<span id="cb83-9"><a href="data-types.html#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="co">## [2]</span></span>
<span id="cb83-10"><a href="data-types.html#cb83-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb83-11"><a href="data-types.html#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="co">## [2]</span></span>
<span id="cb83-12"><a href="data-types.html#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arg <span class="kw">is</span> a)</span>
<span id="cb83-13"><a href="data-types.html#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="co">## True</span></span></code></pre></div>
<p>In this example, when we run <code>arg = a</code>, the name <code>arg</code> is bound to the same object that is bound to <code>a</code>. This much is the same. The only difference here, though, is that because lists are mutable, changing the first element of <code>arg</code> is done “in place,” and all variables can access the mutated object.</p>
<p>Why did the third example produce unexpected results?</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb84-1"><a href="data-types.html#cb84-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">999</span>]</span>
<span id="cb84-2"><a href="data-types.html#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co"># old code</span></span>
<span id="cb84-3"><a href="data-types.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co"># def f(arg):</span></span>
<span id="cb84-4"><a href="data-types.html#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   arg = [2]</span></span>
<span id="cb84-5"><a href="data-types.html#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   return arg</span></span>
<span id="cb84-6"><a href="data-types.html#cb84-6" aria-hidden="true" tabindex="-1"></a>arg <span class="op">=</span> a</span>
<span id="cb84-7"><a href="data-types.html#cb84-7" aria-hidden="true" tabindex="-1"></a>arg <span class="op">=</span> [<span class="dv">2</span>]</span>
<span id="cb84-8"><a href="data-types.html#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arg <span class="kw">is</span> a)</span>
<span id="cb84-9"><a href="data-types.html#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="co">## False</span></span>
<span id="cb84-10"><a href="data-types.html#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb84-11"><a href="data-types.html#cb84-11" aria-hidden="true" tabindex="-1"></a><span class="co">## [999]</span></span>
<span id="cb84-12"><a href="data-types.html#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(arg)</span>
<span id="cb84-13"><a href="data-types.html#cb84-13" aria-hidden="true" tabindex="-1"></a><span class="co">## [2]</span></span></code></pre></div>
<p>The difference is in the line <code>arg = [2]</code>. This rebinds the name <code>arg</code> to a different variable. <code>list</code>s are still mutable, but this has nothing to do with re-binding–re-binding a name works no matter what type of object you’re binding it to. In this case we are re-binding <code>arg</code> to a completely different list.</p>
</div>
</div>
<div id="accessing-and-modifying-non-local-variables" class="section level3" number="2.5.8">
<h3><span class="header-section-number">2.5.8</span> Accessing and Modifying Non-Local Variables</h3>
<p>In the last subsection, we were talking about variables that were passed in as arguments to a function. Here we are talking about variables that are not, but are still referred to inside a function’s body.</p>
<p>In general, even though it is possible to access and modify non-local variables in both languages, it is not a good idea.</p>
<div id="accessing-and-modifying-non-local-variables-in-r" class="section level4" number="2.5.8.1">
<h4><span class="header-section-number">2.5.8.1</span> Accessing and Modifying Non-Local Variables in R</h4>
<p>As Hadley Wickham writes in <a href="https://adv-r.hadley.nz/functions.html#dynamic-lookup">his book</a>, “[l]exical scoping determines where, but not when to look for values.” R has <strong>dynamic lookup</strong>, meaning code inside a function will only try to access a referred-to variable when the function is <em>running</em>, not when it is defined.</p>
<p>Consider the R code below.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="data-types.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R</span></span>
<span id="cb85-2"><a href="data-types.html#cb85-2" aria-hidden="true" tabindex="-1"></a>missileLaunchCodesSet <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb85-3"><a href="data-types.html#cb85-3" aria-hidden="true" tabindex="-1"></a>everythingIsSafe <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb85-4"><a href="data-types.html#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="sc">!</span>missileLaunchCodesSet)</span>
<span id="cb85-5"><a href="data-types.html#cb85-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb85-6"><a href="data-types.html#cb85-6" aria-hidden="true" tabindex="-1"></a>missileLaunchCodesSet <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb85-7"><a href="data-types.html#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="co"># everythingIsSafe() # what happens if we call it?</span></span></code></pre></div>
<p><code>everythingIsSafe</code> is created in the global environment, and the global environment contains a Boolean variable called <code>missileLaunchCodesAreSet</code>.</p>
<p>Now imagine sharing some code with a collaborator. Imagine, further, that your collaborator is the subject-matter expert, and knows little about R programming. Suppose that he changes a global variable in the script. Shouldn’t this induce a relatively trivial change to the overall program?</p>
<p>Let’s explore this hypothetical further. Consider what could happen if any of the following (very typical) conditions are true:</p>
<ul>
<li>you or your collaborators aren’t sure what <code>everythingIsSafe</code> will return because you don’t understand dynamic lookup, or</li>
<li>it’s difficult to visually keep track of all assignments to <code>missileLaunchCodesAreSet</code> (e.g. your script is quite long or it changes often), or</li>
<li>you are not running code sequentially (e.g. you are testing chunks at a time instead of clearing out your memory and <code>source()</code>ing from scratch, over and over again).</li>
</ul>
<p>In each of these situations, understanding of the program would be compromised. However, if you follow the above principle of never referring to non-local variables in function code, all members of the group could do their own work separately, minimizing the dependence on one another.</p>
<p>Another reason violating this could be troublesome is if you define a function that refers to a nonexistent variable. <em>Defining</em> the function will never throw an error because R will assume that variable is defined in the global environment. <em>Calling</em> the function might throw an error, unless you accidentally defined the variable, or if you forgot to delete a variable whose name you no longer want to use.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="data-types.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R</span></span>
<span id="cb86-2"><a href="data-types.html#cb86-2" aria-hidden="true" tabindex="-1"></a>myFunc <span class="ot">&lt;-</span> <span class="cf">function</span>(){</span>
<span id="cb86-3"><a href="data-types.html#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(varigbleNameWithTypo)</span>
<span id="cb86-4"><a href="data-types.html#cb86-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Running the above code to define <code>myFunc</code> will not throw an error, even if you think it should!</p>
</div>
<div id="accessing-and-modifying-non-local-variables-in-python" class="section level4" number="2.5.8.2">
<h4><span class="header-section-number">2.5.8.2</span> Accessing and Modifying Non-Local Variables in Python</h4>
<p>It is the same exact situation in Python. Consider <code>everything_is_safe</code>, a function that is analogous to <code>everythingIsSafe</code>.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb87-1"><a href="data-types.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># python</span></span>
<span id="cb87-2"><a href="data-types.html#cb87-2" aria-hidden="true" tabindex="-1"></a>missile_launch_codes_set <span class="op">=</span> <span class="va">True</span></span>
<span id="cb87-3"><a href="data-types.html#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> everything_is_safe():</span>
<span id="cb87-4"><a href="data-types.html#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">not</span> missile_launch_codes_set</span>
<span id="cb87-5"><a href="data-types.html#cb87-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-6"><a href="data-types.html#cb87-6" aria-hidden="true" tabindex="-1"></a>missile_launch_codes_set <span class="op">=</span> <span class="va">False</span></span>
<span id="cb87-7"><a href="data-types.html#cb87-7" aria-hidden="true" tabindex="-1"></a>everything_is_safe()</span>
<span id="cb87-8"><a href="data-types.html#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="co">## True</span></span></code></pre></div>
<p>We can also define <code>my_func</code>, which is analogous to <code>myFunc</code>. Defining this function doesn’t throw an error either!</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb88-1"><a href="data-types.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># python</span></span>
<span id="cb88-2"><a href="data-types.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_func():</span>
<span id="cb88-3"><a href="data-types.html#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> varigble_name_with_typo</span></code></pre></div>
<p>So stay away from referring to variables outside the body of your function!</p>
</div>
<div id="modifying-non-local-variables-in-r" class="section level4" number="2.5.8.3">
<h4><span class="header-section-number">2.5.8.3</span> Modifying Non-Local Variables In R</h4>
<p>Now what if we want to be extra bad, and in addition to <em>accessing</em> global variables, we <em>modify</em> them, too.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data-types.html#cb89-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb89-2"><a href="data-types.html#cb89-2" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(arg){</span>
<span id="cb89-3"><a href="data-types.html#cb89-3" aria-hidden="true" tabindex="-1"></a>  arg <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb89-4"><a href="data-types.html#cb89-4" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;&lt;-</span> arg</span>
<span id="cb89-5"><a href="data-types.html#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># return(arg) # no return value</span></span>
<span id="cb89-6"><a href="data-types.html#cb89-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb89-7"><a href="data-types.html#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a)</span>
<span id="cb89-8"><a href="data-types.html#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1</span></span>
<span id="cb89-9"><a href="data-types.html#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">f</span>(a))</span>
<span id="cb89-10"><a href="data-types.html#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span>
<span id="cb89-11"><a href="data-types.html#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(a)</span>
<span id="cb89-12"><a href="data-types.html#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2</span></span></code></pre></div>
<p>In the program above, <code>arg</code> creates a copy of <code>a</code>. It assigns <code>2</code> to that copy. Then it takes that <code>2</code> and writes it to the global variable in the parent environment. Notice that the function can take in different inputs, but the global assignment is hard-coded.</p>
</div>
<div id="modifying-non-local-variables-in-python" class="section level4" number="2.5.8.4">
<h4><span class="header-section-number">2.5.8.4</span> Modifying Non-Local Variables In Python</h4>
<p>Finally, there is something in Python that is like R’s super assignment operator (<code>&lt;&lt;-</code>). It is the <code>global</code> keyword. This will let you <em>modify</em> global variables.</p>
<div class="rmd-details">
<p>
Referring to global variables <em>without</em> modifying them was always allowed, even without using the <code>global</code> keyword. This keyword should be used sparingly, and when it is used, it identifies that a function causes <strong>side effects</strong>, which are changes in some variable defined outside of the function’s scope.
</p>
</div>
<div class="sourceCode" id="cb90"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb90-1"><a href="data-types.html#cb90-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb90-2"><a href="data-types.html#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> increment_a():</span>
<span id="cb90-3"><a href="data-types.html#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">global</span> a</span>
<span id="cb90-4"><a href="data-types.html#cb90-4" aria-hidden="true" tabindex="-1"></a>  a <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb90-5"><a href="data-types.html#cb90-5" aria-hidden="true" tabindex="-1"></a>increment_a()</span>
<span id="cb90-6"><a href="data-types.html#cb90-6" aria-hidden="true" tabindex="-1"></a>increment_a()</span>
<span id="cb90-7"><a href="data-types.html#cb90-7" aria-hidden="true" tabindex="-1"></a>increment_a()</span>
<span id="cb90-8"><a href="data-types.html#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)</span>
<span id="cb90-9"><a href="data-types.html#cb90-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 4</span></span></code></pre></div>
<p>Here’s a last example that will be important for us in particular. Notice that Numpy <code>array</code>s are mutable.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb91-1"><a href="data-types.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb91-2"><a href="data-types.html#cb91-2" aria-hidden="true" tabindex="-1"></a>my_array <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span>
<span id="cb91-3"><a href="data-types.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_calc(arr):</span>
<span id="cb91-4"><a href="data-types.html#cb91-4" aria-hidden="true" tabindex="-1"></a>  arr[<span class="dv">0</span>] <span class="op">=</span> np.average(my_array)</span>
<span id="cb91-5"><a href="data-types.html#cb91-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">2</span><span class="op">*</span>arr</span>
<span id="cb91-6"><a href="data-types.html#cb91-6" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> make_calc(my_array)</span>
<span id="cb91-7"><a href="data-types.html#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)</span>
<span id="cb91-8"><a href="data-types.html#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="co">## [4 4 6]</span></span>
<span id="cb91-9"><a href="data-types.html#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_array) <span class="co"># watch out: side effect</span></span>
<span id="cb91-10"><a href="data-types.html#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="co">## [2 2 3]</span></span></code></pre></div>
</div>
</div>
</div>
<div id="categorical-data" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Categorical Data</h2>
<div id="categorical-data-in-r" class="section level3" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Categorical Data in R</h3>
<p>Categorical data is typically stored in a <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Factors"><code>factor</code></a> variable in R. For example, say we asked three people what their favorite season was. The data might look something like this.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="data-types.html#cb92-1" aria-hidden="true" tabindex="-1"></a>responses <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;summer&quot;</span>), </span>
<span id="cb92-2"><a href="data-types.html#cb92-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;winter&quot;</span>))</span>
<span id="cb92-3"><a href="data-types.html#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(responses)</span>
<span id="cb92-4"><a href="data-types.html#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;autumn&quot; &quot;summer&quot; &quot;spring&quot; &quot;winter&quot;</span></span>
<span id="cb92-5"><a href="data-types.html#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="fu">contrasts</span>(responses)</span>
<span id="cb92-6"><a href="data-types.html#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="do">##        summer spring winter</span></span>
<span id="cb92-7"><a href="data-types.html#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="do">## autumn      0      0      0</span></span>
<span id="cb92-8"><a href="data-types.html#cb92-8" aria-hidden="true" tabindex="-1"></a><span class="do">## summer      1      0      0</span></span>
<span id="cb92-9"><a href="data-types.html#cb92-9" aria-hidden="true" tabindex="-1"></a><span class="do">## spring      0      1      0</span></span>
<span id="cb92-10"><a href="data-types.html#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="do">## winter      0      0      1</span></span>
<span id="cb92-11"><a href="data-types.html#cb92-11" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(responses)</span>
<span id="cb92-12"><a href="data-types.html#cb92-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb92-13"><a href="data-types.html#cb92-13" aria-hidden="true" tabindex="-1"></a><span class="fu">is.ordered</span>(responses)</span>
<span id="cb92-14"><a href="data-types.html#cb92-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span></code></pre></div>
<p><code>factor</code>s have a <code>levels</code> attribute, which is comprised of all the possible values that each response could be. They also have a <code>contrasts</code> attribute, which will be important once you start using <code>factor</code>s as inputs to functions such as <code>lm</code>. In the case of using <code>factor</code>s as inputs to <code>lm()</code>, the <code>factor</code> would tell <code>lm()</code> <em>how</em> to create the dummy predictors in a linear regression model. It’s perfectly fine if you’re rusty on regression–the reason I mention this is that in Python, dummy variable construction is done more explicitly/manually.</p>
<div class="rmd-caution">
<p>
In the above example, there wasn’t at least one person who prefers each season (that’s a confusing sentence). Here, if we did not specify a <code>levels</code> argument, there would only be two levels. This is a common source of bugs! Another source of bugs: what if some people say “autumn” and others say “fall?”
</p>
</div>
<p><code>factor</code>s can be ordered or unordered. Ordered <code>factor</code>s are for ordinal data. As another example, say we asked ten people how much they liked programming, and they could only respond “love it,” “hate it,” or “it’s okay.” The data might look something like this.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data-types.html#cb93-1" aria-hidden="true" tabindex="-1"></a>responses <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;love it&quot;</span>, <span class="st">&quot;it&#39;s okay&quot;</span>, <span class="st">&quot;love it&quot;</span>, </span>
<span id="cb93-2"><a href="data-types.html#cb93-2" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;love it&quot;</span>, <span class="st">&quot;it&#39;s okay&quot;</span>, <span class="st">&quot;love it&quot;</span>, </span>
<span id="cb93-3"><a href="data-types.html#cb93-3" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;love it&quot;</span>, <span class="st">&quot;love it&quot;</span>, <span class="st">&quot;it&#39;s okay&quot;</span>, </span>
<span id="cb93-4"><a href="data-types.html#cb93-4" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;it&#39;s okay&quot;</span>), </span>
<span id="cb93-5"><a href="data-types.html#cb93-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;hate it&quot;</span>, <span class="st">&quot;it&#39;s okay&quot;</span>, <span class="st">&quot;love it&quot;</span>),</span>
<span id="cb93-6"><a href="data-types.html#cb93-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb93-7"><a href="data-types.html#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(responses)</span>
<span id="cb93-8"><a href="data-types.html#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;hate it&quot;   &quot;it&#39;s okay&quot; &quot;love it&quot;</span></span>
<span id="cb93-9"><a href="data-types.html#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="fu">contrasts</span>(responses)</span>
<span id="cb93-10"><a href="data-types.html#cb93-10" aria-hidden="true" tabindex="-1"></a><span class="do">##                 .L         .Q</span></span>
<span id="cb93-11"><a href="data-types.html#cb93-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1,] -7.071068e-01  0.4082483</span></span>
<span id="cb93-12"><a href="data-types.html#cb93-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [2,] -7.850462e-17 -0.8164966</span></span>
<span id="cb93-13"><a href="data-types.html#cb93-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [3,]  7.071068e-01  0.4082483</span></span>
<span id="cb93-14"><a href="data-types.html#cb93-14" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(responses)</span>
<span id="cb93-15"><a href="data-types.html#cb93-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb93-16"><a href="data-types.html#cb93-16" aria-hidden="true" tabindex="-1"></a><span class="fu">is.ordered</span>(responses)</span>
<span id="cb93-17"><a href="data-types.html#cb93-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<p>Whether a <code>factor</code> is ordered or not can affect its <code>contrasts</code> and the behavior of functions it is fed into. Intuitively, it should be clear when to impose ordering or not. In the first example, there isn’t a clear ordering of the seasons (which one should come first?). In the second example, we are looking at responses to a “how much” question.</p>
<p>Here’s a third example. We can take non-categorical data, and <code>cut</code> it into something categorical.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="data-types.html#cb94-1" aria-hidden="true" tabindex="-1"></a>stockReturns <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>) <span class="co"># not categorical here</span></span>
<span id="cb94-2"><a href="data-types.html#cb94-2" aria-hidden="true" tabindex="-1"></a>typeOfDay <span class="ot">&lt;-</span> <span class="fu">cut</span>(stockReturns, <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="cn">Inf</span>, <span class="dv">0</span>, <span class="cn">Inf</span>)) </span>
<span id="cb94-3"><a href="data-types.html#cb94-3" aria-hidden="true" tabindex="-1"></a>typeOfDay</span>
<span id="cb94-4"><a href="data-types.html#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] (0, Inf] (0, Inf] (0, Inf] (-Inf,0] (0, Inf] (-Inf,0] (0, Inf] (0, Inf] (-Inf,0] (-Inf,0]</span></span>
<span id="cb94-5"><a href="data-types.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Levels: (-Inf,0] (0, Inf]</span></span>
<span id="cb94-6"><a href="data-types.html#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(typeOfDay)</span>
<span id="cb94-7"><a href="data-types.html#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;(-Inf,0]&quot; &quot;(0, Inf]&quot;</span></span>
<span id="cb94-8"><a href="data-types.html#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(typeOfDay)</span>
<span id="cb94-9"><a href="data-types.html#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb94-10"><a href="data-types.html#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="fu">is.ordered</span>(typeOfDay)</span>
<span id="cb94-11"><a href="data-types.html#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span></code></pre></div>
</div>
<div id="categorical-data-in-python" class="section level3" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Categorical Data in Python</h3>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/categorical.html">Categorical data can be handled with the pandas library</a>, which takes a lot of inspiration from R. We’ve talked about <code>Series</code> objects before in section <a href="data-types.html#vectorization-in-python">2.2.4</a>, and here we will use them again. All we have to do to make a <code>Series</code> object categorical is to change its <code>dtype</code>. The <code>dtype</code> we provide will control the categories (like <code>levels</code> in R), and whether it’s ordered or not.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb95-1"><a href="data-types.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb95-2"><a href="data-types.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.api.types <span class="im">import</span> CategoricalDtype</span>
<span id="cb95-3"><a href="data-types.html#cb95-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-4"><a href="data-types.html#cb95-4" aria-hidden="true" tabindex="-1"></a>cat_type <span class="op">=</span> CategoricalDtype(categories<span class="op">=</span>[<span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;spring&quot;</span>, <span class="st">&quot;winter&quot;</span>], </span>
<span id="cb95-5"><a href="data-types.html#cb95-5" aria-hidden="true" tabindex="-1"></a>                            ordered<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb95-6"><a href="data-types.html#cb95-6" aria-hidden="true" tabindex="-1"></a>responses <span class="op">=</span> pd.Series([<span class="st">&quot;autumn&quot;</span>, <span class="st">&quot;summer&quot;</span>, <span class="st">&quot;summer&quot;</span>], </span>
<span id="cb95-7"><a href="data-types.html#cb95-7" aria-hidden="true" tabindex="-1"></a>                      dtype <span class="op">=</span> cat_type)</span>
<span id="cb95-8"><a href="data-types.html#cb95-8" aria-hidden="true" tabindex="-1"></a>responses</span>
<span id="cb95-9"><a href="data-types.html#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    autumn</span></span>
<span id="cb95-10"><a href="data-types.html#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    summer</span></span>
<span id="cb95-11"><a href="data-types.html#cb95-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    summer</span></span>
<span id="cb95-12"><a href="data-types.html#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: category</span></span>
<span id="cb95-13"><a href="data-types.html#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="co">## Categories (4, object): [&#39;autumn&#39;, &#39;summer&#39;, &#39;spring&#39;, &#39;winter&#39;]</span></span>
<span id="cb95-14"><a href="data-types.html#cb95-14" aria-hidden="true" tabindex="-1"></a>responses.cat.categories</span>
<span id="cb95-15"><a href="data-types.html#cb95-15" aria-hidden="true" tabindex="-1"></a><span class="co">## Index([&#39;autumn&#39;, &#39;summer&#39;, &#39;spring&#39;, &#39;winter&#39;], dtype=&#39;object&#39;)</span></span>
<span id="cb95-16"><a href="data-types.html#cb95-16" aria-hidden="true" tabindex="-1"></a>responses.cat.ordered</span>
<span id="cb95-17"><a href="data-types.html#cb95-17" aria-hidden="true" tabindex="-1"></a><span class="co">## False</span></span></code></pre></div>
<p>The pandas library also provides a <code>pd.cut()</code> function, which can return either of these types, or even a regular Numpy array.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb96-1"><a href="data-types.html#cb96-1" aria-hidden="true" tabindex="-1"></a>stock_returns <span class="op">=</span> np.random.normal(size<span class="op">=</span><span class="dv">10</span>) <span class="co"># not categorical here</span></span>
<span id="cb96-2"><a href="data-types.html#cb96-2" aria-hidden="true" tabindex="-1"></a>type_of_day <span class="op">=</span> pd.cut(stock_returns, [<span class="op">-</span>np.inf, <span class="dv">0</span>, np.inf], labels <span class="op">=</span> [<span class="st">&#39;bad day&#39;</span>, <span class="st">&#39;good day&#39;</span>]) </span>
<span id="cb96-3"><a href="data-types.html#cb96-3" aria-hidden="true" tabindex="-1"></a>type_of_day</span>
<span id="cb96-4"><a href="data-types.html#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co">## [&#39;good day&#39;, &#39;good day&#39;, &#39;good day&#39;, &#39;bad day&#39;, &#39;bad day&#39;, &#39;good day&#39;, &#39;bad day&#39;, &#39;bad day&#39;, &#39;bad day&#39;, &#39;bad day&#39;]</span></span>
<span id="cb96-5"><a href="data-types.html#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Categories (2, object): [&#39;bad day&#39; &lt; &#39;good day&#39;]</span></span>
<span id="cb96-6"><a href="data-types.html#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(type_of_day)</span>
<span id="cb96-7"><a href="data-types.html#cb96-7" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;class &#39;pandas.core.arrays.categorical.Categorical&#39;&gt;</span></span>
<span id="cb96-8"><a href="data-types.html#cb96-8" aria-hidden="true" tabindex="-1"></a>type_of_day <span class="op">=</span> pd.Series(type_of_day)</span>
<span id="cb96-9"><a href="data-types.html#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(type_of_day)</span>
<span id="cb96-10"><a href="data-types.html#cb96-10" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;class &#39;pandas.core.series.Series&#39;&gt;</span></span>
<span id="cb96-11"><a href="data-types.html#cb96-11" aria-hidden="true" tabindex="-1"></a>type_of_day.cat.categories</span>
<span id="cb96-12"><a href="data-types.html#cb96-12" aria-hidden="true" tabindex="-1"></a><span class="co">## Index([&#39;bad day&#39;, &#39;good day&#39;], dtype=&#39;object&#39;)</span></span>
<span id="cb96-13"><a href="data-types.html#cb96-13" aria-hidden="true" tabindex="-1"></a>type_of_day.cat.ordered</span>
<span id="cb96-14"><a href="data-types.html#cb96-14" aria-hidden="true" tabindex="-1"></a><span class="co">## True</span></span></code></pre></div>
<div class="rmd-details">
<p>
You’ll notice that, in this instance, <code>pd.cut</code> did not return a <code>Series</code> object. It can, but <code>pd.cut</code>’s return type will depend on the inputs you feed in. In this case, it returned a <a href="http://pandas-docs.github.io/pandas-docs-travis/reference/api/pandas.Categorical.html#pandas.Categorical"><code>Categorical</code></a>, which is not the same thing as a <code>Series</code>. In the code above, I had to convert it back before accessing the <code>cat</code> attribute.
</p>
</div>
</div>
</div>
<div id="data-frames" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Data Frames</h2>
<p>The rectangular array (e.g. an Excel spreadsheet ) of information is what many think of when they hear the word “data.” Each column contains elements of a shared data type, and these data types can vary from column to column.</p>
<p>There is a type for this in R and Python: a data frame. It might even be the most common way that data is stored in both R and Python scripts because many functions that read in data from an external source return objects of this type (e.g. <code>read.csv()</code> in R and <code>pd.read_csv()</code> in Python).</p>
<div id="data-frames-in-r" class="section level3" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Data Frames in R</h3>
<p>Let’s consider as an example Fisher’s “Iris” data set obtained from <span class="citation">(<a href="#ref-uci_data" role="doc-biblioref">Dua and Graff 2017</a>)</span>. We will read this data set in from a comma separated file (more on input/output in chapter <a href="odds-and-ends.html#input-and-output">3.1</a>). This file can be downloaded from this link: <a href="https://archive.ics.uci.edu/ml/datasets/iris">https://archive.ics.uci.edu/ml/datasets/iris</a>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data-types.html#cb97-1" aria-hidden="true" tabindex="-1"></a>irisData <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/iris.csv&quot;</span>, <span class="at">header =</span> F)</span>
<span id="cb97-2"><a href="data-types.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(irisData)</span>
<span id="cb97-3"><a href="data-types.html#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    V1  V2  V3  V4          V5</span></span>
<span id="cb97-4"><a href="data-types.html#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 5.1 3.5 1.4 0.2 Iris-setosa</span></span>
<span id="cb97-5"><a href="data-types.html#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 4.9 3.0 1.4 0.2 Iris-setosa</span></span>
<span id="cb97-6"><a href="data-types.html#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 4.7 3.2 1.3 0.2 Iris-setosa</span></span>
<span id="cb97-7"><a href="data-types.html#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 4.6 3.1 1.5 0.2 Iris-setosa</span></span>
<span id="cb97-8"><a href="data-types.html#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 5.0 3.6 1.4 0.2 Iris-setosa</span></span>
<span id="cb97-9"><a href="data-types.html#cb97-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 5.4 3.9 1.7 0.4 Iris-setosa</span></span>
<span id="cb97-10"><a href="data-types.html#cb97-10" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(irisData)</span>
<span id="cb97-11"><a href="data-types.html#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;list&quot;</span></span>
<span id="cb97-12"><a href="data-types.html#cb97-12" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(irisData) <span class="co"># we&#39;ll talk more about classes later</span></span>
<span id="cb97-13"><a href="data-types.html#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;data.frame&quot;</span></span>
<span id="cb97-14"><a href="data-types.html#cb97-14" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(irisData)</span>
<span id="cb97-15"><a href="data-types.html#cb97-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 150   5</span></span>
<span id="cb97-16"><a href="data-types.html#cb97-16" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(irisData)</span>
<span id="cb97-17"><a href="data-types.html#cb97-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 150</span></span>
<span id="cb97-18"><a href="data-types.html#cb97-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(irisData)</span>
<span id="cb97-19"><a href="data-types.html#cb97-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5</span></span></code></pre></div>
<div class="rmd-caution">
<p>
Do not rely on the default arguments of <code>read.csv</code> or <code>read.table</code>! After you read in a data frame, always check the first few rows to make sure that
</p>
<ol style="list-style-type: decimal">
<li>
The number of columns is correct because the correct column <em>separator</em> was used (c.f. <code>sep=</code>),
</li>
<li>
column names were parsed correctly, if there were some in the raw text file,
</li>
<li>
the first row of data wasn’t used as a column name sequence, if there weren’t column names in the text file, and
</li>
<li>
the last few rows aren’t reading in empty spaces
</li>
<li>
character columns are read in correctly (c.f. <code>stringsAsFactors=</code>), and
</li>
<li>
special characters signifying missing data were correctly identified (c.f. <code>na.strings=</code>).
</li>
</ol>
</div>
<p>There are some exceptions, but most data sets can be stored as a <code>data.frame</code>. This is because usually a data set comes in a two-dimensional shape Looking at one particular row gives you an observation with all its variables. Looking at an particular column gives you one particular variable for each observation.</p>
<p><a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Data-frame-objects">A <code>data.frame</code> is a special case of a <code>list</code></a>. Every element of the list is a column. Columns can be <code>vector</code>s or <code>factor</code>s, and they can all be of a different type. This is one of the biggest differences between data frames and <code>matrix</code>s. They are both two-dimensional, but a <code>matrix</code> needs elements to be all the same type. Unlike a general <code>list</code>, a <code>data.frame</code> requires all of its columns to have the same number of elements. In other words, the <code>data.frame</code> is not a “<em>ragged</em>” list.</p>
<p>Often times you will need to extract pieces of information from a <code>data.frame</code>. This can be done in many ways. If the columns have names, you can use the <code>$</code> operator to access a single column. Accessing a single column might be followed up by creating a new vector. You can also use the <code>[</code> operator to access multiple columns by name.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="data-types.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(irisData) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;sepal.length&quot;</span>, <span class="st">&quot;sepal.width&quot;</span>, <span class="st">&quot;petal.length&quot;</span>,<span class="st">&quot;petal.width&quot;</span>, <span class="st">&quot;species&quot;</span>)</span>
<span id="cb98-2"><a href="data-types.html#cb98-2" aria-hidden="true" tabindex="-1"></a>firstCol <span class="ot">&lt;-</span> irisData<span class="sc">$</span>sepal.length</span>
<span id="cb98-3"><a href="data-types.html#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(firstCol)</span>
<span id="cb98-4"><a href="data-types.html#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5.1 4.9 4.7 4.6 5.0 5.4</span></span>
<span id="cb98-5"><a href="data-types.html#cb98-5" aria-hidden="true" tabindex="-1"></a>firstTwoCols <span class="ot">&lt;-</span> irisData[<span class="fu">c</span>(<span class="st">&quot;sepal.length&quot;</span>, <span class="st">&quot;sepal.width&quot;</span>)] </span>
<span id="cb98-6"><a href="data-types.html#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(firstTwoCols)</span>
<span id="cb98-7"><a href="data-types.html#cb98-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   sepal.length sepal.width</span></span>
<span id="cb98-8"><a href="data-types.html#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 1          5.1         3.5</span></span>
<span id="cb98-9"><a href="data-types.html#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 2          4.9         3.0</span></span>
<span id="cb98-10"><a href="data-types.html#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 3          4.7         3.2</span></span>
<span id="cb98-11"><a href="data-types.html#cb98-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 4          4.6         3.1</span></span>
<span id="cb98-12"><a href="data-types.html#cb98-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 5          5.0         3.6</span></span>
<span id="cb98-13"><a href="data-types.html#cb98-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 6          5.4         3.9</span></span></code></pre></div>
<p>The <code>[</code> operator is also useful for selecting rows and columns by index numbers, or by some logical criteria.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="data-types.html#cb99-1" aria-hidden="true" tabindex="-1"></a>topLeft <span class="ot">&lt;-</span> irisData[<span class="dv">1</span>,<span class="dv">1</span>] <span class="co"># first row, first col</span></span>
<span id="cb99-2"><a href="data-types.html#cb99-2" aria-hidden="true" tabindex="-1"></a>topLeft</span>
<span id="cb99-3"><a href="data-types.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 5.1</span></span>
<span id="cb99-4"><a href="data-types.html#cb99-4" aria-hidden="true" tabindex="-1"></a>firstThreeRows <span class="ot">&lt;-</span> irisData[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,] <span class="co"># rows 1-3, all cols</span></span>
<span id="cb99-5"><a href="data-types.html#cb99-5" aria-hidden="true" tabindex="-1"></a>firstThreeRows</span>
<span id="cb99-6"><a href="data-types.html#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   sepal.length sepal.width petal.length petal.width     species</span></span>
<span id="cb99-7"><a href="data-types.html#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1          5.1         3.5          1.4         0.2 Iris-setosa</span></span>
<span id="cb99-8"><a href="data-types.html#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2          4.9         3.0          1.4         0.2 Iris-setosa</span></span>
<span id="cb99-9"><a href="data-types.html#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 3          4.7         3.2          1.3         0.2 Iris-setosa</span></span>
<span id="cb99-10"><a href="data-types.html#cb99-10" aria-hidden="true" tabindex="-1"></a>setosaOnly <span class="ot">&lt;-</span> irisData[irisData<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;Iris-setosa&quot;</span>,] <span class="co"># rows where species column is setosa</span></span>
<span id="cb99-11"><a href="data-types.html#cb99-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(setosaOnly)</span>
<span id="cb99-12"><a href="data-types.html#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   sepal.length sepal.width petal.length petal.width     species</span></span>
<span id="cb99-13"><a href="data-types.html#cb99-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1          5.1         3.5          1.4         0.2 Iris-setosa</span></span>
<span id="cb99-14"><a href="data-types.html#cb99-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2          4.9         3.0          1.4         0.2 Iris-setosa</span></span>
<span id="cb99-15"><a href="data-types.html#cb99-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 3          4.7         3.2          1.3         0.2 Iris-setosa</span></span>
<span id="cb99-16"><a href="data-types.html#cb99-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 4          4.6         3.1          1.5         0.2 Iris-setosa</span></span>
<span id="cb99-17"><a href="data-types.html#cb99-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 5          5.0         3.6          1.4         0.2 Iris-setosa</span></span>
<span id="cb99-18"><a href="data-types.html#cb99-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 6          5.4         3.9          1.7         0.4 Iris-setosa</span></span></code></pre></div>
<p>In the code above, <code>irisData$species == "Iris-setosa"</code> creates a logical vector (try it!) using the vectorized <code>==</code> operator. The <code>[</code> operator selects the rows for which the corresponding element of this logical vector is <code>TRUE</code>.</p>
<div class="rmd-details">
<p>
Be careful: depending on how you use the square brackets, you can either get a <code>data.frame</code> or a <code>vector.</code> As an example, try both <code>class(irisData[,1])</code> and <code>class(irisData[,c(1,2)])</code>.
</p>
</div>
<p>In R, <code>data.frame</code>s have row names. You can get/set this character <code>vector</code> with the <code>rownames()</code> function. You can access rows by name using the square bracket operator. Personally, I don’t typically use this functionality that often.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="data-types.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">rownames</span>(irisData))</span>
<span id="cb100-2"><a href="data-types.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot;</span></span>
<span id="cb100-3"><a href="data-types.html#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(irisData) <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">rownames</span>(irisData)) <span class="sc">+</span> <span class="dv">1000</span></span>
<span id="cb100-4"><a href="data-types.html#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">rownames</span>(irisData))</span>
<span id="cb100-5"><a href="data-types.html#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;1001&quot; &quot;1002&quot; &quot;1003&quot; &quot;1004&quot; &quot;1005&quot; &quot;1006&quot;</span></span>
<span id="cb100-6"><a href="data-types.html#cb100-6" aria-hidden="true" tabindex="-1"></a>irisData[<span class="st">&quot;1002&quot;</span>,]</span>
<span id="cb100-7"><a href="data-types.html#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="do">##      sepal.length sepal.width petal.length petal.width     species</span></span>
<span id="cb100-8"><a href="data-types.html#cb100-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 1002          4.9           3          1.4         0.2 Iris-setosa</span></span></code></pre></div>
</div>
<div id="data-frames-in-python" class="section level3" number="2.7.2">
<h3><span class="header-section-number">2.7.2</span> Data Frames in Python</h3>
<p>The pandas library in Python has data frames that are modeled after R’s.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb101-1"><a href="data-types.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb101-2"><a href="data-types.html#cb101-2" aria-hidden="true" tabindex="-1"></a>iris_data <span class="op">=</span> pd.read_csv(<span class="st">&quot;data/iris.csv&quot;</span>, header <span class="op">=</span> <span class="va">None</span>)</span>
<span id="cb101-3"><a href="data-types.html#cb101-3" aria-hidden="true" tabindex="-1"></a>iris_data.head()</span>
<span id="cb101-4"><a href="data-types.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co">##      0    1    2    3            4</span></span>
<span id="cb101-5"><a href="data-types.html#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 0  5.1  3.5  1.4  0.2  Iris-setosa</span></span>
<span id="cb101-6"><a href="data-types.html#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 1  4.9  3.0  1.4  0.2  Iris-setosa</span></span>
<span id="cb101-7"><a href="data-types.html#cb101-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 2  4.7  3.2  1.3  0.2  Iris-setosa</span></span>
<span id="cb101-8"><a href="data-types.html#cb101-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 3  4.6  3.1  1.5  0.2  Iris-setosa</span></span>
<span id="cb101-9"><a href="data-types.html#cb101-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 4  5.0  3.6  1.4  0.2  Iris-setosa</span></span>
<span id="cb101-10"><a href="data-types.html#cb101-10" aria-hidden="true" tabindex="-1"></a>iris_data.shape</span>
<span id="cb101-11"><a href="data-types.html#cb101-11" aria-hidden="true" tabindex="-1"></a><span class="co">## (150, 5)</span></span>
<span id="cb101-12"><a href="data-types.html#cb101-12" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(iris_data) <span class="co"># num rows</span></span>
<span id="cb101-13"><a href="data-types.html#cb101-13" aria-hidden="true" tabindex="-1"></a><span class="co">## 150</span></span>
<span id="cb101-14"><a href="data-types.html#cb101-14" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(iris_data.columns) <span class="co"># num columns</span></span>
<span id="cb101-15"><a href="data-types.html#cb101-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 5</span></span>
<span id="cb101-16"><a href="data-types.html#cb101-16" aria-hidden="true" tabindex="-1"></a>iris_data.dtypes</span>
<span id="cb101-17"><a href="data-types.html#cb101-17" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    float64</span></span>
<span id="cb101-18"><a href="data-types.html#cb101-18" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    float64</span></span>
<span id="cb101-19"><a href="data-types.html#cb101-19" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    float64</span></span>
<span id="cb101-20"><a href="data-types.html#cb101-20" aria-hidden="true" tabindex="-1"></a><span class="co">## 3    float64</span></span>
<span id="cb101-21"><a href="data-types.html#cb101-21" aria-hidden="true" tabindex="-1"></a><span class="co">## 4     object</span></span>
<span id="cb101-22"><a href="data-types.html#cb101-22" aria-hidden="true" tabindex="-1"></a><span class="co">## dtype: object</span></span></code></pre></div>
<p>The structure is very similar to that of R’s data frame. It’s two dimensional, and you can <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html">access columns and rows by name or number.</a> Each column is a <code>Series</code> object, and each column can have a different <code>dtype</code>, which is analogous to R’s situation. Again, because the elements need to be the same type along columns only, this is a big difference between 2-d Numpy <code>array</code>s and <code>DataFrame</code>s.</p>
<p>Just like in R, you can access columns by name. You do that using square brackets. Observe how similar this code is to the corresponding R code above.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb102-1"><a href="data-types.html#cb102-1" aria-hidden="true" tabindex="-1"></a>iris_data.columns <span class="op">=</span> [<span class="st">&quot;sepal.length&quot;</span>, <span class="st">&quot;sepal.width&quot;</span>, <span class="st">&quot;petal.length&quot;</span>,</span>
<span id="cb102-2"><a href="data-types.html#cb102-2" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;petal.width&quot;</span>, <span class="st">&quot;species&quot;</span>]</span>
<span id="cb102-3"><a href="data-types.html#cb102-3" aria-hidden="true" tabindex="-1"></a>first_col <span class="op">=</span> iris_data[<span class="st">&#39;sepal.length&#39;</span>]</span>
<span id="cb102-4"><a href="data-types.html#cb102-4" aria-hidden="true" tabindex="-1"></a>first_col.head()</span>
<span id="cb102-5"><a href="data-types.html#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 0    5.1</span></span>
<span id="cb102-6"><a href="data-types.html#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    4.9</span></span>
<span id="cb102-7"><a href="data-types.html#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    4.7</span></span>
<span id="cb102-8"><a href="data-types.html#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 3    4.6</span></span>
<span id="cb102-9"><a href="data-types.html#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 4    5.0</span></span>
<span id="cb102-10"><a href="data-types.html#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: sepal.length, dtype: float64</span></span>
<span id="cb102-11"><a href="data-types.html#cb102-11" aria-hidden="true" tabindex="-1"></a>first_two_cols <span class="op">=</span> iris_data[[<span class="st">&quot;sepal.length&quot;</span>, <span class="st">&quot;sepal.width&quot;</span>]]</span>
<span id="cb102-12"><a href="data-types.html#cb102-12" aria-hidden="true" tabindex="-1"></a>first_two_cols.head()</span>
<span id="cb102-13"><a href="data-types.html#cb102-13" aria-hidden="true" tabindex="-1"></a><span class="co">##    sepal.length  sepal.width</span></span>
<span id="cb102-14"><a href="data-types.html#cb102-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 0           5.1          3.5</span></span>
<span id="cb102-15"><a href="data-types.html#cb102-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 1           4.9          3.0</span></span>
<span id="cb102-16"><a href="data-types.html#cb102-16" aria-hidden="true" tabindex="-1"></a><span class="co">## 2           4.7          3.2</span></span>
<span id="cb102-17"><a href="data-types.html#cb102-17" aria-hidden="true" tabindex="-1"></a><span class="co">## 3           4.6          3.1</span></span>
<span id="cb102-18"><a href="data-types.html#cb102-18" aria-hidden="true" tabindex="-1"></a><span class="co">## 4           5.0          3.6</span></span></code></pre></div>
<div class="rmd-details">
<p>
Notice that <code>iris_data[‘sepal.length’]</code> returns a <code>Series</code> and <code>iris_data[[“sepal.length,” “sepal.width”]</code> returns a Pandas <code>DataFrame</code>. This behavior is similar to what happened in R’s. For more details, click <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/dsintro.html#indexing-selection">here</a>.
</p>
</div>
<p>You can select columns and rows by number with the <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.iloc.html"><code>.iloc</code> method</a>. <code>iloc</code> is (probably) short for “integer location.”</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb103-1"><a href="data-types.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify rows/cols by number</span></span>
<span id="cb103-2"><a href="data-types.html#cb103-2" aria-hidden="true" tabindex="-1"></a>top_left <span class="op">=</span> iris_data.iloc[<span class="dv">0</span>,<span class="dv">0</span>]</span>
<span id="cb103-3"><a href="data-types.html#cb103-3" aria-hidden="true" tabindex="-1"></a>top_left</span>
<span id="cb103-4"><a href="data-types.html#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co">## 5.1</span></span>
<span id="cb103-5"><a href="data-types.html#cb103-5" aria-hidden="true" tabindex="-1"></a>first_three_rows <span class="op">=</span> iris_data.iloc[:<span class="dv">3</span>,]</span>
<span id="cb103-6"><a href="data-types.html#cb103-6" aria-hidden="true" tabindex="-1"></a>first_three_rows</span>
<span id="cb103-7"><a href="data-types.html#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="co">#setosa_only = iris_data[irisData$species == &quot;Iris-setosa&quot;,]  # easieriwith loc?</span></span>
<span id="cb103-8"><a href="data-types.html#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="co">#head(setosaOnly)</span></span>
<span id="cb103-9"><a href="data-types.html#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="co">##    sepal.length  sepal.width  petal.length  petal.width      species</span></span>
<span id="cb103-10"><a href="data-types.html#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 0           5.1          3.5           1.4          0.2  Iris-setosa</span></span>
<span id="cb103-11"><a href="data-types.html#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 1           4.9          3.0           1.4          0.2  Iris-setosa</span></span>
<span id="cb103-12"><a href="data-types.html#cb103-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 2           4.7          3.2           1.3          0.2  Iris-setosa</span></span></code></pre></div>
<p>Selecting columns by anything besides integer number can be done with the <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.loc.html"><code>.loc()</code> method</a>. You should generally prefer this method to access columns because accessing things by <em>name</em> instead of <em>number</em> is more readable. Here are some examples.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb104-1"><a href="data-types.html#cb104-1" aria-hidden="true" tabindex="-1"></a>sepal_w_to_pedal_w <span class="op">=</span> iris_data.loc[<span class="st">&#39;sepal.width&#39;</span>:<span class="st">&#39;pedal.width&#39;</span>]</span>
<span id="cb104-2"><a href="data-types.html#cb104-2" aria-hidden="true" tabindex="-1"></a>sepal_w_to_pedal_w</span>
<span id="cb104-3"><a href="data-types.html#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="co">## Empty DataFrame</span></span>
<span id="cb104-4"><a href="data-types.html#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="co">## Columns: [sepal.length, sepal.width, petal.length, petal.width, species]</span></span>
<span id="cb104-5"><a href="data-types.html#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Index: []</span></span>
<span id="cb104-6"><a href="data-types.html#cb104-6" aria-hidden="true" tabindex="-1"></a>setosa_only <span class="op">=</span> iris_data.loc[iris_data[<span class="st">&#39;species&#39;</span>] <span class="op">==</span> <span class="st">&quot;Iris-setosa&quot;</span>,]</span>
<span id="cb104-7"><a href="data-types.html#cb104-7" aria-hidden="true" tabindex="-1"></a>setosa_only.head()</span>
<span id="cb104-8"><a href="data-types.html#cb104-8" aria-hidden="true" tabindex="-1"></a><span class="co">##    sepal.length  sepal.width  petal.length  petal.width      species</span></span>
<span id="cb104-9"><a href="data-types.html#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 0           5.1          3.5           1.4          0.2  Iris-setosa</span></span>
<span id="cb104-10"><a href="data-types.html#cb104-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 1           4.9          3.0           1.4          0.2  Iris-setosa</span></span>
<span id="cb104-11"><a href="data-types.html#cb104-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 2           4.7          3.2           1.3          0.2  Iris-setosa</span></span>
<span id="cb104-12"><a href="data-types.html#cb104-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 3           4.6          3.1           1.5          0.2  Iris-setosa</span></span>
<span id="cb104-13"><a href="data-types.html#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="co">## 4           5.0          3.6           1.4          0.2  Iris-setosa</span></span></code></pre></div>
<p>Notice we used a <code>slice</code> to access many columns by only referring to the left-most and the right-most. This does not work with the regular square bracket operator. The second example filters out the rows where the <code>"species"</code> column elements are equal to <code>"Iris-setosa"</code>.</p>
<p>Each <code>DataFrame</code> in pandas comes with an <code>.index</code> attribute. This is analogous to a row name in R, but it’s much more flexible because the index can take on a variety of types. This can help us highlight the difference between <code>.loc</code> and <code>.iloc</code>. Recall that <code>.loc</code> was label-based selection. Labels don’t necessarily have to be strings. Consider the following example</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb105-1"><a href="data-types.html#cb105-1" aria-hidden="true" tabindex="-1"></a>iris_data.index</span>
<span id="cb105-2"><a href="data-types.html#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="co">## RangeIndex(start=0, stop=150, step=1)</span></span>
<span id="cb105-3"><a href="data-types.html#cb105-3" aria-hidden="true" tabindex="-1"></a>iris_data <span class="op">=</span> iris_data.set_index(iris_data.index[::<span class="op">-</span><span class="dv">1</span>]) <span class="co"># reverse the index</span></span>
<span id="cb105-4"><a href="data-types.html#cb105-4" aria-hidden="true" tabindex="-1"></a>iris_data.head(<span class="dv">2</span>)</span>
<span id="cb105-5"><a href="data-types.html#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="co">##      sepal.length  sepal.width  petal.length  petal.width      species</span></span>
<span id="cb105-6"><a href="data-types.html#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 149           5.1          3.5           1.4          0.2  Iris-setosa</span></span>
<span id="cb105-7"><a href="data-types.html#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 148           4.9          3.0           1.4          0.2  Iris-setosa</span></span>
<span id="cb105-8"><a href="data-types.html#cb105-8" aria-hidden="true" tabindex="-1"></a>iris_data.tail(<span class="dv">2</span>)</span>
<span id="cb105-9"><a href="data-types.html#cb105-9" aria-hidden="true" tabindex="-1"></a><span class="co">##    sepal.length  sepal.width  petal.length  petal.width         species</span></span>
<span id="cb105-10"><a href="data-types.html#cb105-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 1           6.2          3.4           5.4          2.3  Iris-virginica</span></span>
<span id="cb105-11"><a href="data-types.html#cb105-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 0           5.9          3.0           5.1          1.8  Iris-virginica</span></span>
<span id="cb105-12"><a href="data-types.html#cb105-12" aria-hidden="true" tabindex="-1"></a>iris_data.loc[<span class="dv">0</span>]</span>
<span id="cb105-13"><a href="data-types.html#cb105-13" aria-hidden="true" tabindex="-1"></a><span class="co">## sepal.length               5.9</span></span>
<span id="cb105-14"><a href="data-types.html#cb105-14" aria-hidden="true" tabindex="-1"></a><span class="co">## sepal.width                  3</span></span>
<span id="cb105-15"><a href="data-types.html#cb105-15" aria-hidden="true" tabindex="-1"></a><span class="co">## petal.length               5.1</span></span>
<span id="cb105-16"><a href="data-types.html#cb105-16" aria-hidden="true" tabindex="-1"></a><span class="co">## petal.width                1.8</span></span>
<span id="cb105-17"><a href="data-types.html#cb105-17" aria-hidden="true" tabindex="-1"></a><span class="co">## species         Iris-virginica</span></span>
<span id="cb105-18"><a href="data-types.html#cb105-18" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: 0, dtype: object</span></span>
<span id="cb105-19"><a href="data-types.html#cb105-19" aria-hidden="true" tabindex="-1"></a>iris_data.iloc[<span class="dv">0</span>] </span>
<span id="cb105-20"><a href="data-types.html#cb105-20" aria-hidden="true" tabindex="-1"></a><span class="co">## sepal.length            5.1</span></span>
<span id="cb105-21"><a href="data-types.html#cb105-21" aria-hidden="true" tabindex="-1"></a><span class="co">## sepal.width             3.5</span></span>
<span id="cb105-22"><a href="data-types.html#cb105-22" aria-hidden="true" tabindex="-1"></a><span class="co">## petal.length            1.4</span></span>
<span id="cb105-23"><a href="data-types.html#cb105-23" aria-hidden="true" tabindex="-1"></a><span class="co">## petal.width             0.2</span></span>
<span id="cb105-24"><a href="data-types.html#cb105-24" aria-hidden="true" tabindex="-1"></a><span class="co">## species         Iris-setosa</span></span>
<span id="cb105-25"><a href="data-types.html#cb105-25" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: 149, dtype: object</span></span></code></pre></div>
<p><code>iris_data.loc[0]</code> selects the <code>0</code>th index. The second line reversed the indexes, so this is actually the last row. If you want the first row, use <code>iris_data.iloc[0]</code>.</p>
<!-- [`DataFrame`s have a huge amount  many useful attributes and methods, too.](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#) -->
</div>
<div id="row-names-and-indexes" class="section level3" number="2.7.3">
<h3><span class="header-section-number">2.7.3</span> Row Names and Indexes</h3>
<p>In Python, pandas’ <code>DataFrame</code>s have an</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb106-1"><a href="data-types.html#cb106-1" aria-hidden="true" tabindex="-1"></a>iris_data.index</span>
<span id="cb106-2"><a href="data-types.html#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co">## RangeIndex(start=149, stop=-1, step=-1)</span></span></code></pre></div>
</div>
<div id="getting-versus-setting" class="section level3" number="2.7.4">
<h3><span class="header-section-number">2.7.4</span> Getting Versus Setting</h3>
</div>
</div>
<div id="exercises-1" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Exercises</h2>
<p>All answers to questions related to R should be written in a file named <code>data_types_exercises.R</code>. All answers to questions related to Python should be written in a file named <code>data_types_exercises.py</code>.</p>
<ol style="list-style-type: decimal">
<li>Which Python type is appropriate for each piece of data?</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>TODO</li>
<li>TODO</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>In R, say you have a vector of prices of some financial asset:</li>
</ol>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="data-types.html#cb107-1" aria-hidden="true" tabindex="-1"></a>prices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">100.10</span>, <span class="fl">95.98</span>, <span class="fl">100.01</span>, <span class="fl">99.87</span>)</span></code></pre></div>
<ol style="list-style-type: lower-alpha">
<li><p>Convert this vector into a vector of <em>log returns</em>. Call the variable <code>log_returns</code>. If <span class="math inline">\(p_t\)</span> is the price at time <span class="math inline">\(t\)</span>, the log return ending at time <span class="math inline">\(t\)</span> is
<span class="math display">\[ r_t = \log \left( \frac{p_t}{p_{t-1}} \right) = \log p_t - \log p_{t-1}\]</span></p></li>
<li><p>Do the same for <em>arithmetic returns</em>. These are regular percent changes if you scale by <span class="math inline">\(100\)</span>. Call the variable <code>arith_returns</code>. The mathematical formula you need is</p></li>
</ol>
<p><span class="math display">\[ a_t = \left( \frac{p_t - p_{t-1} }{p_{t-1}} \right) \times 100 \]</span></p>
<ol start="3" style="list-style-type: decimal">
<li>Assume we are interested in the probability that a normal random variable with mean <span class="math inline">\(5\)</span> and standard deviation <span class="math inline">\(6\)</span> is greater than <span class="math inline">\(6\)</span>.</li>
</ol>
<p>We will make use of the <em>Monte Carlo</em> <span class="citation">(<a href="#ref-monte-carlo-stat-methods" role="doc-biblioref">Robert and Casella 2005</a>)</span> method below. It is a technique to approximate expectations and probabilities. If <span class="math inline">\(n\)</span> is a large number, then the right hand side of
<span class="math display">\[
\mathbb{P}(X &gt; 6) \approx \frac{1}{n}\sum_{i=1}^n \mathbf{1}(X_i &gt; 6)
\]</span>
is an accurate approximation. If you haven’t seen an <strong>indicator</strong> function before, it is defined as</p>
<p><span class="math display">\[
\mathbf{1}(X_i &gt; 6)
=
\begin{cases}
1 &amp; X_i &gt; 6 \\
0 &amp; X_i \le 6
\end{cases}.
\]</span></p>
<ol style="list-style-type: lower-alpha">
<li><p>Evaluate this probability exactly in R and assign it to the variable <code>exactExceedanceProb</code></p></li>
<li><p>Evaluate this probability exactly in Python and assign it to the variable <code>exact_exceedance_prob</code></p></li>
<li><p>In R, use the Monte Carlo method to estimate the probability. Use one thousand samples. Assign it to the variable <code>approxExceedanceProb</code></p></li>
<li><p>In Python, use the Monte Carlo method to estimate the probability. Use one thousand samples. Assign it to the variable <code>approx_exceedance_prob</code></p></li>
</ol>
<ol start="4" style="list-style-type: decimal">
<li>For a collection of random variables <span class="math inline">\(X_1, \ldots, X_n\)</span>, a <em>covariance matrix</em> arranges all of the covariances between every possible pair of random variables:</li>
</ol>
<p><span class="math display">\[
\begin{bmatrix}
\text{Cov}(X_1, X_1) &amp; \text{Cov}(X_1, X_2) &amp; \cdots &amp; \text{Cov}(X_1, X_n) \\
\text{Cov}(X_2, X_1) &amp; \text{Cov}(X_2, X_2) &amp; \cdots &amp; \text{Cov}(X_2, X_n) \\
\vdots &amp; \vdots &amp; \ddots &amp; \vdots\\
\text{Cov}(X_n, X_1) &amp; \text{Cov}(X_n, X_2) &amp; \cdots &amp; \text{Cov}(X_n, X_n) \\
\end{bmatrix}
\]</span>
where
<span class="math display">\[\text{Cov}(X_i, X_j) = \mathbb{E}\left[(X_i - \mathbb{E}[X_i])((X_j - \mathbb{E}[X_j])\right]\]</span>
is the covariance between <span class="math inline">\(X_i\)</span> and <span class="math inline">\(X_j\)</span> resting in row <span class="math inline">\(i\)</span> and column <span class="math inline">\(j\)</span>.</p>
<p>Using this definition, it is easy to show that <span class="math inline">\(\text{Cov}(X_i, X_i) = \mathbb{E}\left[(X_i - \mathbb{E}[X_i])^2\right] = \text{Var}(X_i)\)</span>.</p>
<p>An <strong>exchangeable</strong> covariance matrix for a random vector is one that has all the same variances, and all the same covariances. In other words, it has two unique elements: the diagonal elements should be the same, and the off-diagonals should be the same.</p>
<ol style="list-style-type: lower-alpha">
<li><p>In R, generate <span class="math inline">\(10\)</span> <span class="math inline">\(4 \times 4\)</span> exchangeable covariance matrices, each with <span class="math inline">\(2\)</span> as the variance, and have the possible covariances take values in the collection <span class="math inline">\(0,.01,.02, ..., .09.\)</span> Store these <span class="math inline">\(10\)</span> covariance matrices in a three-dimensional array. The first index should be each matrix’s row index, the second should be the column index of each matrix, and the third index should be the “layer” or “slice” indicating which of the <span class="math inline">\(10\)</span> matrices you have. Name this array <code>myCovMats</code></p></li>
<li><p>Do the same thing in Python, but call the variable <code>my_cov_mats</code></p></li>
</ol>
<ol start="5" style="list-style-type: decimal">
<li><p>In R, read in the <code>cars.csv</code> data set using <code>read.table()</code> (more on IO in chapter TODO). Find the average <code>EngineSize</code>, <code>Cylinders</code>, <code>Horsepower</code>, <code>MPG_City</code>, <code>MPG_Highway</code>, <code>Weight</code>, <code>Wheelbase</code> and <code>Length</code> <strong>for each type of vehicle</strong> (i.e. <code>Hybrid</code> <code>Sedan</code> <code>Sports</code>, <code>SUV</code>, <code>Truck</code> and <code>Wagon</code>). Which of these averages is an <code>NA</code>? How many observations in that column are missing?</p></li>
<li><p>In Python (TODO finish this question), read in the <code>cars.csv</code> data set using <code>read.table()</code> (more on IO in chapter TODO). Find the average <code>EngineSize</code>, <code>Cylinders</code>, <code>Horsepower</code>, <code>MPG_City</code>, <code>MPG_Highway</code>, <code>Weight</code>, <code>Wheelbase</code> and <code>Length</code> <strong>for each type of vehicle</strong> (i.e. <code>Hybrid</code> <code>Sedan</code> <code>Sports</code>, <code>SUV</code>, <code>Truck</code> and <code>Wagon</code>). Which of these averages is an <code>NA</code>? How many observations in that column are missing?</p></li>
<li><p>Here are two lists in R:</p></li>
</ol>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-types.html#cb108-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">first=</span><span class="st">&quot;a&quot;</span>, <span class="at">second=</span><span class="dv">1</span>)</span>
<span id="cb108-2"><a href="data-types.html#cb108-2" aria-hidden="true" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">first=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">second =</span> <span class="st">&quot;statistics&quot;</span>)</span></code></pre></div>
<ol style="list-style-type: lower-alpha">
<li><p>Make a new <code>list</code> that is these two lists above “squished together.” It has to be length <span class="math inline">\(4\)</span>, and each element is one of the elements of <span class="math inline">\(l1\)</span> and <span class="math inline">\(l2\)</span>. Call this list <code>l3</code>.</p></li>
<li><p>Delete all the “tags” or “names” of these four elements.</p></li>
<li><p>Make a <code>vector</code> of all the unique single digit numbers in both of the lists. You should end up with the vector with elements <code>1</code>, <code>2</code>, and <code>3</code>.</p></li>
</ol>
<ol start="7" style="list-style-type: decimal">
<li>Here are two <code>dict</code>s in Python:</li>
</ol>
<div class="sourceCode" id="cb109"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb109-1"><a href="data-types.html#cb109-1" aria-hidden="true" tabindex="-1"></a>d1 <span class="op">=</span> { <span class="st">&quot;first&quot;</span> : <span class="st">&quot;a&quot;</span>, <span class="st">&quot;second&quot;</span> : <span class="dv">1</span>}</span>
<span id="cb109-2"><a href="data-types.html#cb109-2" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> { <span class="st">&quot;first&quot;</span> : [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], <span class="st">&quot;second&quot;</span> : <span class="st">&quot;statistics&quot;</span>}</span></code></pre></div>
<ol style="list-style-type: lower-alpha">
<li>Make a new <code>list</code> that is these two <code>dict</code>s above “squished together” (why can’t it be another <code>dict</code>?) It has to be length <span class="math inline">\(4\)</span>, and each value is one of the values of <span class="math inline">\(d1\)</span> and <span class="math inline">\(d2\)</span>. Call this list <code>l3</code>.</li>
</ol>
<ol start="8" style="list-style-type: decimal">
<li><p>How might you explain the difference between Python and R’s type systems? What do you know about the historical development of these languages that might assist your explanation?</p></li>
<li><p>Example on underflow and overflow.</p></li>
<li><p>infix functions in R</p></li>
<li><p>setter methods in R</p></li>
<li><p>Python functions that have return types specified</p></li>
<li><p>log-sum-exp trick problem</p></li>
<li><p>linear algebra problems</p></li>
<li><p>demo complete.cases versus dropna</p></li>
<li><p>question on likert scales</p></li>
<li><p>question with cut that induces NAs</p></li>
</ol>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-struc_and_interp" class="csl-entry">
Abelson, Harold, and Gerald J. Sussman. 1996. <em>Structure and Interpretation of Computer Programs</em>. 2nd ed. Cambridge, MA, USA: MIT Press.
</div>
<div id="ref-uci_data" class="csl-entry">
Dua, Dheeru, and Casey Graff. 2017. <span>“<span>UCI</span> Machine Learning Repository.”</span> University of California, Irvine, School of Information; Computer Sciences. <a href="http://archive.ics.uci.edu/ml">http://archive.ics.uci.edu/ml</a>.
</div>
<div id="ref-harris2020array" class="csl-entry">
Harris, Charles R., K. Jarrod Millman, Stéfan J. van der Walt, Ralf Gommers, Pauli Virtanen, David Cournapeau, Eric Wieser, et al. 2020. <span>“Array Programming with <span>NumPy</span>.”</span> <em>Nature</em> 585 (7825): 357–62. <a href="https://doi.org/10.1038/s41586-020-2649-2">https://doi.org/10.1038/s41586-020-2649-2</a>.
</div>
<div id="ref-matloff_r_book" class="csl-entry">
Matloff, Norman. 2011. <em>The Art of r Programming: A Tour of Statistical Software Design</em>. 1st ed. USA: No Starch Press.
</div>
<div id="ref-monte-carlo-stat-methods" class="csl-entry">
Robert, Christian P., and George Casella. 2005. <em>Monte Carlo Statistical Methods (Springer Texts in Statistics)</em>. Berlin, Heidelberg: Springer-Verlag.
</div>
<div id="ref-py_ds_handbook" class="csl-entry">
VanderPlas, Jake. 2016. <em>Python Data Science Handbook: Essential Tools for Working with Data</em>. 1st ed. O’Reilly Media, Inc.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p>“double” is short for “double precision floating point.” In the programming language <code>C</code>, which is what both R and Python are written in, the programmer has more control on how many decimal points of precision he wants.<a href="data-types.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>Primitive functions are functions that contain no R code and are internally implemented in C. These are the only type of function in R that don’t have a parent environment.<a href="data-types.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>You might have noticed that Python uses two different words to prevent confusion–unlike R, Python uses the word “parameter” (instead of “argument”) to refer to the inputs a function takes, and “arguments” to the specific values a user plugs in.<a href="data-types.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>Functions aren’t the only thing that get their own namespace. For instance, <a href="https://docs.python.org/3/tutorial/classes.html#a-first-look-at-classes">classes do as well</a>. More information on classes is provided in Chapter <a href="an-introduction-to-object-oriented-programming.html#an-introduction-to-object-oriented-programming">4</a><a href="data-types.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>There are some exceptions to this, but it’s generally true.<a href="data-types.html#fnref7" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="odds-and-ends.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tbrown122387/r_and_python_book/edit/master/02-types.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
